{"kind": "docs.coverage", "path": "v2/models/introspection_index_OLD.py", "module_doc": true, "classes": {"total": 2, "with_doc": 0, "coverage": 0.0}, "methods": {"total": 0, "with_doc": 0, "coverage": null}, "functions": {"total": 0, "with_doc": 0, "coverage": null}, "overall": {"documentables": 3, "with_doc": 1, "coverage": 0.3333333333333333}}
{"kind": "docs.coverage", "path": "v2/patches/__init__.py", "module_doc": true, "classes": {"total": 0, "with_doc": 0, "coverage": null}, "methods": {"total": 0, "with_doc": 0, "coverage": null}, "functions": {"total": 0, "with_doc": 0, "coverage": null}, "overall": {"documentables": 1, "with_doc": 1, "coverage": 1.0}}
{"kind": "docs.coverage", "path": "v2/patches/core/__init__.py", "module_doc": true, "classes": {"total": 0, "with_doc": 0, "coverage": null}, "methods": {"total": 0, "with_doc": 0, "coverage": null}, "functions": {"total": 0, "with_doc": 0, "coverage": null}, "overall": {"documentables": 1, "with_doc": 1, "coverage": 1.0}}
{"kind": "docs.coverage", "path": "v2/patches/core/patch_ops.py", "module_doc": false, "classes": {"total": 1, "with_doc": 0, "coverage": 0.0}, "methods": {"total": 4, "with_doc": 4, "coverage": 1.0}, "functions": {"total": 0, "with_doc": 0, "coverage": null}, "overall": {"documentables": 6, "with_doc": 4, "coverage": 0.6666666666666666}}
{"kind": "docs.coverage", "path": "v2/patches/core/rewrite.py", "module_doc": false, "classes": {"total": 0, "with_doc": 0, "coverage": null}, "methods": {"total": 0, "with_doc": 0, "coverage": null}, "functions": {"total": 10, "with_doc": 8, "coverage": 0.8}, "overall": {"documentables": 11, "with_doc": 8, "coverage": 0.7272727272727273}}
{"kind": "docs.coverage", "path": "v2/patches/executor/__init__.py", "module_doc": true, "classes": {"total": 0, "with_doc": 0, "coverage": null}, "methods": {"total": 0, "with_doc": 0, "coverage": null}, "functions": {"total": 0, "with_doc": 0, "coverage": null}, "overall": {"documentables": 1, "with_doc": 1, "coverage": 1.0}}
{"kind": "docs.coverage", "path": "v2/patches/executor/run_patch_loop.py", "module_doc": false, "classes": {"total": 0, "with_doc": 0, "coverage": null}, "methods": {"total": 0, "with_doc": 0, "coverage": null}, "functions": {"total": 8, "with_doc": 7, "coverage": 0.875}, "overall": {"documentables": 9, "with_doc": 7, "coverage": 0.7777777777777778}}
{"kind": "docs.coverage", "path": "v2/patches/executor/run_patch_loop_local.py", "module_doc": false, "classes": {"total": 1, "with_doc": 0, "coverage": 0.0}, "methods": {"total": 6, "with_doc": 0, "coverage": 0.0}, "functions": {"total": 9, "with_doc": 8, "coverage": 0.8888888888888888}, "overall": {"documentables": 17, "with_doc": 8, "coverage": 0.47058823529411764}}
{"kind": "docs.coverage", "path": "v2/routes/__init__.py", "module_doc": false, "classes": {"total": 0, "with_doc": 0, "coverage": null}, "methods": {"total": 0, "with_doc": 0, "coverage": null}, "functions": {"total": 0, "with_doc": 0, "coverage": null}, "overall": {"documentables": 1, "with_doc": 0, "coverage": 0.0}}
{"kind": "docs.coverage.summary", "files": 203, "totals": {"modules": {"total": 203, "with_doc": 60, "coverage": 0.2955665024630542}, "classes": {"total": 175, "with_doc": 79, "coverage": 0.4514285714285714}, "methods": {"total": 316, "with_doc": 69, "coverage": 0.21835443037974683}, "functions": {"total": 700, "with_doc": 263, "coverage": 0.3757142857142857}, "overall": {"documentables": 1394, "with_doc": 471, "coverage": 0.33787661406025826}}}
{"kind": "quality.complexity", "path": "cold_start/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "cold_start/bootstrap_check.py", "functions": 3, "total_complexity": 16, "avg_complexity": 5.333, "max_complexity": 11, "p95_complexity": 11.0, "by_function": [{"name": "main", "lineno": 34, "complexity": 11, "nested": false}, {"name": "check_locks", "lineno": 18, "complexity": 3, "nested": false}, {"name": "check_exists", "lineno": 26, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "cold_start/cleanup_locks.py", "functions": 1, "total_complexity": 5, "avg_complexity": 5.0, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "cleanup_locks", "lineno": 16, "complexity": 5, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/configuration/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/configuration/config.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/configuration/loader.py", "functions": 6, "total_complexity": 54, "avg_complexity": 9.0, "max_complexity": 22, "p95_complexity": 22.0, "by_function": [{"name": "get_packager", "lineno": 95, "complexity": 22, "nested": false}, {"name": "get_secrets", "lineno": 165, "complexity": 18, "nested": false}, {"name": "ConfigPaths.detect", "lineno": 43, "complexity": 6, "nested": false}, {"name": "_read_yaml", "lineno": 82, "complexity": 4, "nested": false}, {"name": "_validate_non_empty_string", "lineno": 159, "complexity": 3, "nested": false}, {"name": "get_repo_root", "lineno": 75, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/configuration/spine_paths.py", "functions": 3, "total_complexity": 8, "avg_complexity": 2.667, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "sanity_check", "lineno": 53, "complexity": 5, "nested": false}, {"name": "_compute_spine_dir", "lineno": 29, "complexity": 2, "nested": false}, {"name": "determine_spine_dir", "lineno": 48, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/db/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/db/access/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/db/access/db_init.py", "functions": 3, "total_complexity": 7, "avg_complexity": 2.333, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "get_engine", "lineno": 36, "complexity": 4, "nested": false}, {"name": "_make_engine", "lineno": 26, "complexity": 2, "nested": false}, {"name": "get_session", "lineno": 50, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/db/access/sqlite.py", "functions": 17, "total_complexity": 31, "avg_complexity": 1.824, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "load_extension", "lineno": 170, "complexity": 4, "nested": false}, {"name": "close", "lineno": 98, "complexity": 3, "nested": false}, {"name": "_ensure_connection_config", "lineno": 112, "complexity": 3, "nested": false}, {"name": "set_pragma", "lineno": 126, "complexity": 3, "nested": false}, {"name": "close_connection", "lineno": 61, "complexity": 2, "nested": false}, {"name": "connect_to", "lineno": 81, "complexity": 2, "nested": false}, {"name": "execute", "lineno": 141, "complexity": 2, "nested": false}, {"name": "query_all", "lineno": 155, "complexity": 2, "nested": false}, {"name": "query_one", "lineno": 161, "complexity": 2, "nested": false}, {"name": "_log_info", "lineno": 29, "complexity": 1, "nested": false}, {"name": "_log_warn", "lineno": 30, "complexity": 1, "nested": false}, {"name": "_log_err", "lineno": 31, "complexity": 1, "nested": false}, {"name": "_log_info", "lineno": 36, "complexity": 1, "nested": false}, {"name": "_log_warn", "lineno": 37, "complexity": 1, "nested": false}, {"name": "_log_err", "lineno": 38, "complexity": 1, "nested": false}, {"name": "get_connection", "lineno": 51, "complexity": 1, "nested": false}, {"name": "executemany", "lineno": 148, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/db/writers/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/db/writers/docstring_writer.py", "functions": 5, "total_complexity": 40, "avg_complexity": 8.0, "max_complexity": 17, "p95_complexity": 17.0, "by_function": [{"name": "DocstringWriter._update_existing", "lineno": 116, "complexity": 17, "nested": false}, {"name": "DocstringWriter.write", "lineno": 68, "complexity": 16, "nested": false}, {"name": "DocstringWriter._extract_name", "lineno": 60, "complexity": 4, "nested": false}, {"name": "DocstringWriter.__init__", "lineno": 54, "complexity": 2, "nested": false}, {"name": "_now_utc", "lineno": 45, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/ast_utils.py", "functions": 8, "total_complexity": 37, "avg_complexity": 4.625, "max_complexity": 15, "p95_complexity": 15.0, "by_function": [{"name": "find_target_by_lineno", "lineno": 81, "complexity": 15, "nested": false}, {"name": "_func_signature", "lineno": 55, "complexity": 5, "nested": false}, {"name": "_get_indent_of_line", "lineno": 25, "complexity": 4, "nested": false}, {"name": "_compute_body_indent_for_node", "lineno": 32, "complexity": 4, "nested": false}, {"name": "_first_statement_positions", "lineno": 66, "complexity": 4, "nested": false}, {"name": "_class_signature", "lineno": 48, "complexity": 3, "nested": false}, {"name": "parse_source", "lineno": 21, "complexity": 1, "nested": false}, {"name": "_module_has_docstring", "lineno": 76, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/context.py", "functions": 11, "total_complexity": 64, "avg_complexity": 5.818, "max_complexity": 20, "p95_complexity": 20.0, "by_function": [{"name": "build_context_for_items", "lineno": 247, "complexity": 20, "nested": false}, {"name": "_find_target_node", "lineno": 91, "complexity": 11, "nested": false}, {"name": "analyze_python_context", "lineno": 146, "complexity": 10, "nested": false}, {"name": "read_source_window", "lineno": 202, "complexity": 6, "nested": false}, {"name": "_resolve_path", "lineno": 50, "complexity": 4, "nested": false}, {"name": "_node_signature", "lineno": 65, "complexity": 4, "nested": false}, {"name": "_lineno", "lineno": 84, "complexity": 3, "nested": false}, {"name": "_is_name_match", "lineno": 107, "complexity": 3, "nested": true}, {"name": "_read_text", "lineno": 36, "complexity": 1, "nested": false}, {"name": "_split_lines", "lineno": 40, "complexity": 1, "nested": false}, {"name": "_clip_lines", "lineno": 44, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/formatter.py", "functions": 7, "total_complexity": 32, "avg_complexity": 4.571, "max_complexity": 9, "p95_complexity": 9.0, "by_function": [{"name": "_wrap_paragraph", "lineno": 34, "complexity": 9, "nested": false}, {"name": "render_docstring_block", "lineno": 111, "complexity": 8, "nested": false}, {"name": "_normalize_lines", "lineno": 8, "complexity": 4, "nested": false}, {"name": "_split_summary_body", "lineno": 23, "complexity": 4, "nested": false}, {"name": "format_inner_docstring", "lineno": 94, "complexity": 3, "nested": false}, {"name": "flush", "lineno": 41, "complexity": 2, "nested": true}, {"name": "strip_triple_quotes", "lineno": 89, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/locator.py", "functions": 6, "total_complexity": 34, "avg_complexity": 5.667, "max_complexity": 17, "p95_complexity": 17.0, "by_function": [{"name": "find_orphan_module_string_span", "lineno": 67, "complexity": 17, "nested": false}, {"name": "_existing_docstring_span_for_node", "lineno": 20, "complexity": 7, "nested": false}, {"name": "find_symbol_docstring_span", "lineno": 46, "complexity": 6, "nested": false}, {"name": "find_module_docstring_span", "lineno": 34, "complexity": 2, "nested": false}, {"name": "_split_lines_keepends", "lineno": 12, "complexity": 1, "nested": false}, {"name": "_indent_of", "lineno": 16, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/patchplan.py", "functions": 5, "total_complexity": 33, "avg_complexity": 6.6, "max_complexity": 24, "p95_complexity": 24.0, "by_function": [{"name": "build_patchplan_v1", "lineno": 55, "complexity": 24, "nested": false}, {"name": "_payload", "lineno": 45, "complexity": 4, "nested": false}, {"name": "Artifact.__init__", "lineno": 20, "complexity": 2, "nested": false}, {"name": "_problem", "lineno": 39, "complexity": 2, "nested": false}, {"name": "_ok", "lineno": 35, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/prompt_api.py", "functions": 3, "total_complexity": 11, "avg_complexity": 3.667, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "context_build", "lineno": 14, "complexity": 5, "nested": false}, {"name": "results_unpack_v1", "lineno": 39, "complexity": 5, "nested": false}, {"name": "schema_select", "lineno": 32, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/prompt_builder.py", "functions": 3, "total_complexity": 11, "avg_complexity": 3.667, "max_complexity": 6, "p95_complexity": 6.0, "by_function": [{"name": "build_user_prompt", "lineno": 45, "complexity": 6, "nested": false}, {"name": "_format_item_block", "lineno": 22, "complexity": 4, "nested": false}, {"name": "build_system_prompt", "lineno": 5, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/providers.py", "functions": 14, "total_complexity": 106, "avg_complexity": 7.571, "max_complexity": 18, "p95_complexity": 18.0, "by_function": [{"name": "_coerce_single_edit", "lineno": 194, "complexity": 18, "nested": false}, {"name": "_materialize_edits", "lineno": 229, "complexity": 18, "nested": false}, {"name": "_build_user_prompt_from_item", "lineno": 110, "complexity": 16, "nested": false}, {"name": "verify_v1", "lineno": 298, "complexity": 11, "nested": false}, {"name": "_normalize_item_keys", "lineno": 32, "complexity": 10, "nested": false}, {"name": "sanitize_v1", "lineno": 268, "complexity": 9, "nested": false}, {"name": "_drop_excluded", "lineno": 51, "complexity": 6, "nested": false}, {"name": "build_prompts_v1", "lineno": 156, "complexity": 4, "nested": false}, {"name": "_ensure_list", "lineno": 22, "complexity": 3, "nested": false}, {"name": "_truncate", "lineno": 64, "complexity": 3, "nested": false}, {"name": "_ensure_dict", "lineno": 29, "complexity": 2, "nested": false}, {"name": "_normalize_items", "lineno": 48, "complexity": 2, "nested": false}, {"name": "context_build_v1", "lineno": 332, "complexity": 2, "nested": false}, {"name": "context_read_source_window_v1", "lineno": 336, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/sanitize.py", "functions": 12, "total_complexity": 70, "avg_complexity": 5.833, "max_complexity": 34, "p95_complexity": 34.0, "by_function": [{"name": "sanitize_outputs_v1", "lineno": 171, "complexity": 34, "nested": false}, {"name": "_wrap_paragraph", "lineno": 79, "complexity": 9, "nested": false}, {"name": "_task_payload", "lineno": 40, "complexity": 4, "nested": false}, {"name": "_normalize_lines", "lineno": 52, "complexity": 4, "nested": false}, {"name": "_split_summary_body", "lineno": 68, "complexity": 4, "nested": false}, {"name": "_format_docstring_content", "lineno": 141, "complexity": 3, "nested": false}, {"name": "_format_docstrings_inplace", "lineno": 163, "complexity": 3, "nested": false}, {"name": "Artifact.__init__", "lineno": 23, "complexity": 2, "nested": false}, {"name": "_problem", "lineno": 34, "complexity": 2, "nested": false}, {"name": "flush", "lineno": 86, "complexity": 2, "nested": true}, {"name": "_strip_triple_quotes", "lineno": 136, "complexity": 2, "nested": false}, {"name": "_ok", "lineno": 30, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/docstrings/verify.py", "functions": 5, "total_complexity": 40, "avg_complexity": 8.0, "max_complexity": 31, "p95_complexity": 31.0, "by_function": [{"name": "verify_batch_v1", "lineno": 42, "complexity": 31, "nested": false}, {"name": "_payload", "lineno": 33, "complexity": 4, "nested": false}, {"name": "Artifact.__init__", "lineno": 19, "complexity": 2, "nested": false}, {"name": "_problem", "lineno": 28, "complexity": 2, "nested": false}, {"name": "_ok", "lineno": 25, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/introspect/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/introspect/providers.py", "functions": 7, "total_complexity": 52, "avg_complexity": 7.429, "max_complexity": 28, "p95_complexity": 28.0, "by_function": [{"name": "fetch_v1", "lineno": 134, "complexity": 28, "nested": false}, {"name": "_resolve_sqlite_url", "lineno": 53, "complexity": 7, "nested": false}, {"name": "_normalize_statuses", "lineno": 88, "complexity": 7, "nested": false}, {"name": "_globs_exclude", "lineno": 109, "complexity": 5, "nested": false}, {"name": "_cwd", "lineno": 46, "complexity": 2, "nested": false}, {"name": "_problem", "lineno": 124, "complexity": 2, "nested": false}, {"name": "_artifact", "lineno": 120, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/introspect/read_docstrings.py", "functions": 25, "total_complexity": 138, "avg_complexity": 5.52, "max_complexity": 24, "p95_complexity": 18.0, "by_function": [{"name": "DocStringAnalyzer.traverse_and_write", "lineno": 413, "complexity": 24, "nested": false}, {"name": "run_v1", "lineno": 515, "complexity": 18, "nested": false}, {"name": "DocStringAnalyzer.extract_docstrings", "lineno": 290, "complexity": 13, "nested": false}, {"name": "DocStringAnalyzer.__init__", "lineno": 184, "complexity": 10, "nested": false}, {"name": "DocStringAnalyzer._to_writer_row", "lineno": 367, "complexity": 10, "nested": false}, {"name": "_SuppressStdoutCaptureStderr.__exit__", "lineno": 78, "complexity": 9, "nested": false}, {"name": "_dirnames_from_globs", "lineno": 151, "complexity": 8, "nested": false}, {"name": "_CaptureOnlyStderr.__exit__", "lineno": 119, "complexity": 7, "nested": false}, {"name": "DocStringAnalyzer.summarize_docstring", "lineno": 265, "complexity": 7, "nested": false}, {"name": "_print_stderr_summary", "lineno": 39, "complexity": 4, "nested": false}, {"name": "_path_matches_any", "lineno": 143, "complexity": 4, "nested": false}, {"name": "_stderr_to_oneliner", "lineno": 34, "complexity": 3, "nested": false}, {"name": "_SuppressStdoutCaptureStderr.read", "lineno": 68, "complexity": 3, "nested": false}, {"name": "_CaptureOnlyStderr.read", "lineno": 109, "complexity": 3, "nested": false}, {"name": "DocStringAnalyzer._annotate_parents", "lineno": 249, "complexity": 3, "nested": false}, {"name": "DocStringAnalyzer._enclosing_class_name", "lineno": 255, "complexity": 3, "nested": false}, {"name": "_SuppressStdoutCaptureStderr.__init__", "lineno": 53, "complexity": 1, "nested": false}, {"name": "_SuppressStdoutCaptureStderr.__enter__", "lineno": 59, "complexity": 1, "nested": false}, {"name": "_CaptureOnlyStderr.__init__", "lineno": 99, "complexity": 1, "nested": false}, {"name": "_CaptureOnlyStderr.__enter__", "lineno": 103, "complexity": 1, "nested": false}, {"name": "_as_posix", "lineno": 137, "complexity": 1, "nested": false}, {"name": "_both_sep", "lineno": 140, "complexity": 1, "nested": false}, {"name": "DocStringAnalyzer._hash_for_writer", "lineno": 362, "complexity": 1, "nested": false}, {"name": "_problem", "lineno": 493, "complexity": 1, "nested": false}, {"name": "_result", "lineno": 504, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/applier.py", "functions": 12, "total_complexity": 79, "avg_complexity": 6.583, "max_complexity": 15, "p95_complexity": 15.0, "by_function": [{"name": "parse_unified_diff", "lineno": 66, "complexity": 15, "nested": false}, {"name": "PatchApplier._apply", "lineno": 243, "complexity": 15, "nested": false}, {"name": "PatchApplier._dry_run", "lineno": 206, "complexity": 13, "nested": false}, {"name": "PatchApplier._try_apply_to_lines", "lineno": 282, "complexity": 13, "nested": false}, {"name": "_parse_header_path", "lineno": 46, "complexity": 6, "nested": false}, {"name": "PatchApplier._detect_eol", "lineno": 185, "complexity": 5, "nested": false}, {"name": "PatchApplier._write_rejects", "lineno": 334, "complexity": 4, "nested": false}, {"name": "PatchApplier.apply_unified_diff", "lineno": 139, "complexity": 3, "nested": false}, {"name": "PatchApplier._write_lines", "lineno": 199, "complexity": 2, "nested": false}, {"name": "PatchApplier.__init__", "lineno": 132, "complexity": 1, "nested": false}, {"name": "PatchApplier._read_lines", "lineno": 180, "complexity": 1, "nested": false}, {"name": "PatchApplier._coerce_eol", "lineno": 195, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/config.py", "functions": 5, "total_complexity": 11, "avg_complexity": 2.2, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "PatchEngineConfig.default_ignores", "lineno": 95, "complexity": 4, "nested": false}, {"name": "SafetyLimits._int", "lineno": 40, "complexity": 3, "nested": true}, {"name": "SafetyLimits.from_env", "lineno": 38, "complexity": 2, "nested": false}, {"name": "SafetyLimits.defaults", "lineno": 33, "complexity": 1, "nested": false}, {"name": "PatchEngineConfig.ensure_dirs", "lineno": 89, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/evaluator.py", "functions": 3, "total_complexity": 8, "avg_complexity": 2.667, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "Evaluator.run", "lineno": 55, "complexity": 4, "nested": false}, {"name": "Evaluator._run_command", "lineno": 41, "complexity": 3, "nested": false}, {"name": "Evaluator.__init__", "lineno": 36, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/interactive_run.py", "functions": 3, "total_complexity": 18, "avg_complexity": 6.0, "max_complexity": 16, "p95_complexity": 16.0, "by_function": [{"name": "run_one", "lineno": 28, "complexity": 16, "nested": false}, {"name": "_read_text", "lineno": 20, "complexity": 1, "nested": false}, {"name": "_sha256_bytes", "lineno": 24, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/ops_compile.py", "functions": 4, "total_complexity": 38, "avg_complexity": 9.5, "max_complexity": 18, "p95_complexity": 18.0, "by_function": [{"name": "ops_to_unified_diff", "lineno": 117, "complexity": 18, "nested": false}, {"name": "_apply_ops_to_file", "lineno": 21, "complexity": 17, "nested": false}, {"name": "_to_block", "lineno": 33, "complexity": 2, "nested": true}, {"name": "_unified_diff", "lineno": 88, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/plan.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/providers.py", "functions": 9, "total_complexity": 110, "avg_complexity": 12.222, "max_complexity": 43, "p95_complexity": 43.0, "by_function": [{"name": "apply_files_v1", "lineno": 138, "complexity": 43, "nested": false}, {"name": "_jsonify", "lineno": 42, "complexity": 17, "nested": false}, {"name": "run_v1", "lineno": 343, "complexity": 17, "nested": false}, {"name": "_prune_empty_dirs", "lineno": 108, "complexity": 12, "nested": false}, {"name": "_move_all", "lineno": 64, "complexity": 11, "nested": false}, {"name": "_normalize_verify_dir", "lineno": 93, "complexity": 4, "nested": false}, {"name": "_slug", "lineno": 36, "complexity": 3, "nested": false}, {"name": "_err", "lineno": 30, "complexity": 2, "nested": false}, {"name": "_ok", "lineno": 26, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/run_manifest.py", "functions": 6, "total_complexity": 6, "avg_complexity": 1.0, "max_complexity": 1, "p95_complexity": 1.0, "by_function": [{"name": "new_run_id", "lineno": 12, "complexity": 1, "nested": false}, {"name": "RunManifest._fp", "lineno": 23, "complexity": 1, "nested": false}, {"name": "RunManifest.write", "lineno": 26, "complexity": 1, "nested": false}, {"name": "RunManifest.update", "lineno": 31, "complexity": 1, "nested": false}, {"name": "RunManifest.add_section", "lineno": 35, "complexity": 1, "nested": false}, {"name": "RunManifest.read", "lineno": 41, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/scope.py", "functions": 3, "total_complexity": 16, "avg_complexity": 5.333, "max_complexity": 7, "p95_complexity": 7.0, "by_function": [{"name": "Scope.parse_patch_paths", "lineno": 45, "complexity": 7, "nested": false}, {"name": "Scope.is_within_scope", "lineno": 19, "complexity": 5, "nested": false}, {"name": "Scope.validate_touched_files", "lineno": 33, "complexity": 4, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "functions": 4, "total_complexity": 12, "avg_complexity": 3.0, "max_complexity": 9, "p95_complexity": 9.0, "by_function": [{"name": "test_end_to_end_apply_and_promote", "lineno": 64, "complexity": 9, "nested": false}, {"name": "_write", "lineno": 22, "complexity": 1, "nested": false}, {"name": "_make_repo", "lineno": 27, "complexity": 1, "nested": false}, {"name": "_make_patch", "lineno": 40, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/textops.py", "functions": 11, "total_complexity": 28, "avg_complexity": 2.545, "max_complexity": 9, "p95_complexity": 9.0, "by_function": [{"name": "after_import_block", "lineno": 86, "complexity": 9, "nested": false}, {"name": "after_shebang_and_encoding", "lineno": 71, "complexity": 6, "nested": false}, {"name": "detect_eol", "lineno": 41, "complexity": 5, "nested": false}, {"name": "read_text_preserve", "lineno": 12, "complexity": 1, "nested": false}, {"name": "write_text_preserve", "lineno": 20, "complexity": 1, "nested": false}, {"name": "split_lines_keepends", "lineno": 29, "complexity": 1, "nested": false}, {"name": "join_lines", "lineno": 33, "complexity": 1, "nested": false}, {"name": "indent_of", "lineno": 37, "complexity": 1, "nested": false}, {"name": "coerce_eol", "lineno": 52, "complexity": 1, "nested": false}, {"name": "replace_span", "lineno": 56, "complexity": 1, "nested": false}, {"name": "insert_after_line", "lineno": 63, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/patch_engine/workspace.py", "functions": 10, "total_complexity": 30, "avg_complexity": 3.0, "max_complexity": 6, "p95_complexity": 6.0, "by_function": [{"name": "sha256_dir", "lineno": 15, "complexity": 6, "nested": false}, {"name": "WorkspaceManager.promote", "lineno": 84, "complexity": 5, "nested": false}, {"name": "WorkspaceManager._gc_old_snapshots", "lineno": 119, "complexity": 5, "nested": false}, {"name": "WorkspaceManager.ensure_mirror_seeded", "lineno": 40, "complexity": 4, "nested": false}, {"name": "WorkspaceManager.make_run_dirs", "lineno": 53, "complexity": 2, "nested": false}, {"name": "WorkspaceManager.clone_to_workspace", "lineno": 69, "complexity": 2, "nested": false}, {"name": "WorkspaceManager.snapshot_mirror", "lineno": 74, "complexity": 2, "nested": false}, {"name": "WorkspaceManager.archive_snapshot", "lineno": 103, "complexity": 2, "nested": false}, {"name": "now_ts", "lineno": 11, "complexity": 1, "nested": false}, {"name": "WorkspaceManager.mirror_digest", "lineno": 116, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "functions": 9, "total_complexity": 140, "avg_complexity": 15.556, "max_complexity": 76, "p95_complexity": 76.0, "by_function": [{"name": "run_v1", "lineno": 204, "complexity": 76, "nested": false}, {"name": "_get_records", "lineno": 67, "complexity": 18, "nested": false}, {"name": "_parse_llm_items", "lineno": 140, "complexity": 16, "nested": false}, {"name": "_make_per_item_batches", "lineno": 168, "complexity": 16, "nested": false}, {"name": "_normalize", "lineno": 59, "complexity": 6, "nested": false}, {"name": "_messages_from_build", "lineno": 121, "complexity": 4, "nested": false}, {"name": "_write_json", "lineno": 46, "complexity": 2, "nested": false}, {"name": "_ensure_dir", "lineno": 42, "complexity": 1, "nested": false}, {"name": "_now_token", "lineno": 55, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "functions": 1, "total_complexity": 2, "avg_complexity": 2.0, "max_complexity": 2, "p95_complexity": 2.0, "by_function": [{"name": "to_problem_meta", "lineno": 43, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "functions": 5, "total_complexity": 27, "avg_complexity": 5.4, "max_complexity": 12, "p95_complexity": 12.0, "by_function": [{"name": "_resolve_runner", "lineno": 42, "complexity": 12, "nested": false}, {"name": "capability_run", "lineno": 122, "complexity": 6, "nested": false}, {"name": "_to_artifacts_list", "lineno": 92, "complexity": 4, "nested": false}, {"name": "_ensure_caps_loaded", "lineno": 23, "complexity": 3, "nested": false}, {"name": "_problem_artifact", "lineno": 103, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "functions": 1, "total_complexity": 2, "avg_complexity": 2.0, "max_complexity": 2, "p95_complexity": 2.0, "by_function": [{"name": "Result.as_dict", "lineno": 45, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "functions": 6, "total_complexity": 29, "avg_complexity": 4.833, "max_complexity": 9, "p95_complexity": 9.0, "by_function": [{"name": "ensure_chat_messages", "lineno": 74, "complexity": 9, "nested": false}, {"name": "clamp_messages", "lineno": 114, "complexity": 8, "nested": false}, {"name": "make_user_prompt", "lineno": 36, "complexity": 4, "nested": false}, {"name": "make_system_prompt", "lineno": 18, "complexity": 3, "nested": false}, {"name": "to_messages", "lineno": 62, "complexity": 3, "nested": false}, {"name": "add_json_return_guidance", "lineno": 103, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "functions": 6, "total_complexity": 50, "avg_complexity": 8.333, "max_complexity": 20, "p95_complexity": 20.0, "by_function": [{"name": "enrich_v1", "lineno": 66, "complexity": 20, "nested": false}, {"name": "_coerce", "lineno": 151, "complexity": 14, "nested": true}, {"name": "_is_excluded", "lineno": 52, "complexity": 6, "nested": false}, {"name": "unpack_results_v1", "lineno": 137, "complexity": 4, "nested": false}, {"name": "_as_posix", "lineno": 33, "complexity": 3, "nested": false}, {"name": "_rel", "lineno": 42, "complexity": 3, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "functions": 1, "total_complexity": 9, "avg_complexity": 9.0, "max_complexity": 9, "p95_complexity": 9.0, "by_function": [{"name": "normalize_record", "lineno": 27, "complexity": 9, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "functions": 5, "total_complexity": 53, "avg_complexity": 10.6, "max_complexity": 26, "p95_complexity": 26.0, "by_function": [{"name": "fetch_v1", "lineno": 133, "complexity": 26, "nested": false}, {"name": "_discover_columns", "lineno": 54, "complexity": 11, "nested": false}, {"name": "_make_select_columns", "lineno": 89, "complexity": 8, "nested": false}, {"name": "_payload_of", "lineno": 34, "complexity": 5, "nested": false}, {"name": "_as_list", "lineno": 46, "complexity": 3, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "functions": 4, "total_complexity": 8, "avg_complexity": 2.0, "max_complexity": 2, "p95_complexity": 2.0, "by_function": [{"name": "build_system_prompt", "lineno": 23, "complexity": 2, "nested": false}, {"name": "build_user_prompt", "lineno": 36, "complexity": 2, "nested": false}, {"name": "BuildContextStep.run", "lineno": 60, "complexity": 2, "nested": false}, {"name": "UnpackResultsStep.run", "lineno": 76, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/llm/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "functions": 8, "total_complexity": 40, "avg_complexity": 5.0, "max_complexity": 15, "p95_complexity": 15.0, "by_function": [{"name": "_openai_complete", "lineno": 76, "complexity": 15, "nested": false}, {"name": "complete_v1", "lineno": 115, "complexity": 10, "nested": false}, {"name": "_messages_to_openai", "lineno": 40, "complexity": 6, "nested": false}, {"name": "_shim_response_format", "lineno": 27, "complexity": 4, "nested": false}, {"name": "_mock_items_json", "lineno": 58, "complexity": 2, "nested": false}, {"name": "_http_post_json", "lineno": 67, "complexity": 1, "nested": false}, {"name": "complete", "lineno": 143, "complexity": 1, "nested": false}, {"name": "run", "lineno": 147, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "functions": 6, "total_complexity": 30, "avg_complexity": 5.0, "max_complexity": 9, "p95_complexity": 9.0, "by_function": [{"name": "_to_dict", "lineno": 19, "complexity": 9, "nested": false}, {"name": "_openai_chat_complete", "lineno": 44, "complexity": 7, "nested": false}, {"name": "complete_batches_v1", "lineno": 109, "complexity": 6, "nested": false}, {"name": "complete_v1", "lineno": 74, "complexity": 5, "nested": false}, {"name": "_save_json", "lineno": 11, "complexity": 2, "nested": false}, {"name": "_ensure_dir", "lineno": 8, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "functions": 4, "total_complexity": 27, "avg_complexity": 6.75, "max_complexity": 15, "p95_complexity": 15.0, "by_function": [{"name": "_coerce_items", "lineno": 34, "complexity": 15, "nested": false}, {"name": "parse_json_response", "lineno": 70, "complexity": 8, "nested": false}, {"name": "_strip_fences", "lineno": 21, "complexity": 2, "nested": false}, {"name": "_loads_maybe", "lineno": 27, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "functions": 2, "total_complexity": 8, "avg_complexity": 4.0, "max_complexity": 6, "p95_complexity": 6.0, "by_function": [{"name": "select_schema_key", "lineno": 17, "complexity": 6, "nested": false}, {"name": "parse_with_schema", "lineno": 44, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "functions": 2, "total_complexity": 2, "avg_complexity": 1.0, "max_complexity": 1, "p95_complexity": 1.0, "by_function": [{"name": "known_schema_keys", "lineno": 61, "complexity": 1, "nested": false}, {"name": "get_schema", "lineno": 66, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/preflight/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "functions": 4, "total_complexity": 14, "avg_complexity": 3.5, "max_complexity": 8, "p95_complexity": 8.0, "by_function": [{"name": "clamp_to_budget", "lineno": 56, "complexity": 8, "nested": false}, {"name": "_approx_tokens_for_messages", "lineno": 32, "complexity": 3, "nested": false}, {"name": "_approx_tokens_for_text", "lineno": 19, "complexity": 2, "nested": false}, {"name": "estimate_tokens", "lineno": 47, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/run/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/run/docstrings.py", "functions": 19, "total_complexity": 85, "avg_complexity": 4.474, "max_complexity": 22, "p95_complexity": 22.0, "by_function": [{"name": "main", "lineno": 144, "complexity": 22, "nested": false}, {"name": "_bootstrap_spine", "lineno": 41, "complexity": 11, "nested": false}, {"name": "_arts_list", "lineno": 71, "complexity": 7, "nested": false}, {"name": "_normalize_record", "lineno": 125, "complexity": 7, "nested": false}, {"name": "_normalize_enriched_item", "lineno": 135, "complexity": 5, "nested": false}, {"name": "_unwrap_meta", "lineno": 85, "complexity": 4, "nested": false}, {"name": "_get", "lineno": 96, "complexity": 4, "nested": false}, {"name": "_spine_run", "lineno": 115, "complexity": 4, "nested": false}, {"name": "_project_root", "lineno": 18, "complexity": 3, "nested": false}, {"name": "_ensure_list_of_dicts", "lineno": 92, "complexity": 3, "nested": false}, {"name": "_get_messages_and_batch", "lineno": 108, "complexity": 3, "nested": false}, {"name": "_write_json", "lineno": 11, "complexity": 2, "nested": false}, {"name": "_load_vars", "lineno": 25, "complexity": 2, "nested": false}, {"name": "_import_callable", "lineno": 34, "complexity": 2, "nested": false}, {"name": "_get_items", "lineno": 103, "complexity": 2, "nested": false}, {"name": "_ensure_dir", "lineno": 10, "complexity": 1, "nested": false}, {"name": "_now_token", "lineno": 30, "complexity": 1, "nested": false}, {"name": "_normalize_records", "lineno": 132, "complexity": 1, "nested": false}, {"name": "_normalize_enriched", "lineno": 141, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/adapters/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/adapters/base.py", "functions": 2, "total_complexity": 2, "avg_complexity": 1.0, "max_complexity": 1, "p95_complexity": 1.0, "by_function": [{"name": "Adapter.to_native", "lineno": 30, "complexity": 1, "nested": false}, {"name": "Adapter.from_native", "lineno": 33, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/bootstrap.py", "functions": 20, "total_complexity": 88, "avg_complexity": 4.4, "max_complexity": 18, "p95_complexity": 11.0, "by_function": [{"name": "Spine.load_pipeline_and_run", "lineno": 193, "complexity": 18, "nested": false}, {"name": "Spine._eval_expr", "lineno": 282, "complexity": 11, "nested": false}, {"name": "Spine._resolve", "lineno": 250, "complexity": 8, "nested": false}, {"name": "Spine._top_level_char", "lineno": 352, "complexity": 7, "nested": false}, {"name": "Spine._resolve_path_or_var", "lineno": 370, "complexity": 7, "nested": false}, {"name": "load_middlewares_from_config", "lineno": 69, "complexity": 5, "nested": false}, {"name": "Spine.dispatch_capability", "lineno": 166, "complexity": 5, "nested": false}, {"name": "Spine.__post_init__", "lineno": 136, "complexity": 4, "nested": false}, {"name": "Spine.run", "lineno": 154, "complexity": 4, "nested": false}, {"name": "setup_registry", "lineno": 94, "complexity": 3, "nested": false}, {"name": "_split_target", "lineno": 49, "complexity": 2, "nested": false}, {"name": "_import_callable", "lineno": 56, "complexity": 2, "nested": false}, {"name": "Spine._parse_literal", "lineno": 325, "complexity": 2, "nested": false}, {"name": "Spine._stringify", "lineno": 336, "complexity": 2, "nested": false}, {"name": "Spine._truthy", "lineno": 342, "complexity": 2, "nested": false}, {"name": "_echo_provider", "lineno": 415, "complexity": 2, "nested": false}, {"name": "build_spine", "lineno": 106, "complexity": 1, "nested": false}, {"name": "Spine.from_registry", "lineno": 143, "complexity": 1, "nested": false}, {"name": "Spine.from_capabilities", "lineno": 147, "complexity": 1, "nested": false}, {"name": "Spine._coerce_bool", "lineno": 348, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/contracts.py", "functions": 3, "total_complexity": 4, "avg_complexity": 1.333, "max_complexity": 2, "p95_complexity": 2.0, "by_function": [{"name": "new_envelope", "lineno": 32, "complexity": 2, "nested": false}, {"name": "_uuid", "lineno": 10, "complexity": 1, "nested": false}, {"name": "to_dict", "lineno": 95, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/errors.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/loader.py", "functions": 6, "total_complexity": 15, "avg_complexity": 2.5, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "CapabilitiesLoader._load_yaml", "lineno": 37, "complexity": 4, "nested": false}, {"name": "CapabilitiesLoader._resolve_target", "lineno": 51, "complexity": 4, "nested": false}, {"name": "CapabilitiesLoader.load", "lineno": 62, "complexity": 4, "nested": false}, {"name": "CapabilitiesLoader.__init__", "lineno": 34, "complexity": 1, "nested": false}, {"name": "capability_run", "lineno": 83, "complexity": 1, "nested": false}, {"name": "get_registry", "lineno": 92, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/middleware.py", "functions": 5, "total_complexity": 17, "avg_complexity": 3.4, "max_complexity": 10, "p95_complexity": 10.0, "by_function": [{"name": "RetriesMiddleware.__call__", "lineno": 106, "complexity": 10, "nested": false}, {"name": "TimingMiddleware.__call__", "lineno": 66, "complexity": 3, "nested": false}, {"name": "GuardMiddleware.__call__", "lineno": 31, "complexity": 2, "nested": false}, {"name": "TimingMiddleware.__init__", "lineno": 63, "complexity": 1, "nested": false}, {"name": "RetriesMiddleware.__init__", "lineno": 102, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/packager_bundle_inject_prompt.py", "functions": 3, "total_complexity": 24, "avg_complexity": 8.0, "max_complexity": 15, "p95_complexity": 15.0, "by_function": [{"name": "run_v1", "lineno": 48, "complexity": 15, "nested": false}, {"name": "_try_invoke_code_bundles", "lineno": 16, "complexity": 8, "nested": false}, {"name": "_write_json", "lineno": 11, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/packager_bundle_make.py", "functions": 10, "total_complexity": 55, "avg_complexity": 5.5, "max_complexity": 24, "p95_complexity": 24.0, "by_function": [{"name": "run_v1", "lineno": 135, "complexity": 24, "nested": false}, {"name": "_first_artifact", "lineno": 37, "complexity": 7, "nested": false}, {"name": "_write_manifest_chunked", "lineno": 76, "complexity": 6, "nested": false}, {"name": "_as_bool", "lineno": 29, "complexity": 5, "nested": false}, {"name": "_call_provider", "lineno": 49, "complexity": 3, "nested": false}, {"name": "_write_manifest_monolith", "lineno": 60, "complexity": 3, "nested": false}, {"name": "flush_part", "lineno": 96, "complexity": 3, "nested": true}, {"name": "_ng", "lineno": 24, "complexity": 2, "nested": false}, {"name": "_ok", "lineno": 21, "complexity": 1, "nested": false}, {"name": "_Shim.__init__", "lineno": 51, "complexity": 1, "nested": true}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/packager_bundle_unpack.py", "functions": 4, "total_complexity": 35, "avg_complexity": 8.75, "max_complexity": 26, "p95_complexity": 26.0, "by_function": [{"name": "run_v1", "lineno": 88, "complexity": 26, "nested": false}, {"name": "_iter_jsonl", "lineno": 72, "complexity": 5, "nested": false}, {"name": "_safe_join", "lineno": 57, "complexity": 3, "nested": false}, {"name": "_sha256_bytes", "lineno": 53, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/packager_pack_run.py", "functions": 5, "total_complexity": 33, "avg_complexity": 6.6, "max_complexity": 20, "p95_complexity": 20.0, "by_function": [{"name": "run_v1", "lineno": 96, "complexity": 20, "nested": false}, {"name": "_project_root", "lineno": 50, "complexity": 4, "nested": false}, {"name": "_bool", "lineno": 85, "complexity": 4, "nested": false}, {"name": "_find_packager_src", "lineno": 61, "complexity": 3, "nested": false}, {"name": "_ensure_on_syspath", "lineno": 79, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/utils_code_index.py", "functions": 7, "total_complexity": 54, "avg_complexity": 7.714, "max_complexity": 21, "p95_complexity": 21.0, "by_function": [{"name": "run_v1", "lineno": 167, "complexity": 21, "nested": false}, {"name": "_normalize_rows", "lineno": 100, "complexity": 9, "nested": false}, {"name": "_write_rows", "lineno": 130, "complexity": 9, "nested": false}, {"name": "_detect_format", "lineno": 70, "complexity": 6, "nested": false}, {"name": "_as_bool", "lineno": 60, "complexity": 4, "nested": false}, {"name": "_choose_callable", "lineno": 84, "complexity": 3, "nested": false}, {"name": "_filter_kwargs", "lineno": 94, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/utils_db_init_sqlite_dev.py", "functions": 6, "total_complexity": 28, "avg_complexity": 4.667, "max_complexity": 14, "p95_complexity": 14.0, "by_function": [{"name": "run_v1", "lineno": 123, "complexity": 14, "nested": false}, {"name": "_as_bool", "lineno": 56, "complexity": 4, "nested": false}, {"name": "_summarize_sqlite", "lineno": 86, "complexity": 4, "nested": false}, {"name": "_choose_callable", "lineno": 70, "complexity": 3, "nested": false}, {"name": "_filter_kwargs", "lineno": 79, "complexity": 2, "nested": false}, {"name": "_ensure_parent", "lineno": 66, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/utils_db_load_sqlite_vec.py", "functions": 6, "total_complexity": 33, "avg_complexity": 5.5, "max_complexity": 16, "p95_complexity": 16.0, "by_function": [{"name": "run_v1", "lineno": 108, "complexity": 16, "nested": false}, {"name": "_summarize_db", "lineno": 63, "complexity": 6, "nested": false}, {"name": "_as_bool", "lineno": 49, "complexity": 4, "nested": false}, {"name": "_sqlite_version", "lineno": 86, "complexity": 3, "nested": false}, {"name": "_validate_plugin_file", "lineno": 96, "complexity": 3, "nested": false}, {"name": "_ensure_parent", "lineno": 59, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/utils_download_models.py", "functions": 6, "total_complexity": 36, "avg_complexity": 6.0, "max_complexity": 19, "p95_complexity": 19.0, "by_function": [{"name": "run_v1", "lineno": 108, "complexity": 19, "nested": false}, {"name": "_as_bool", "lineno": 48, "complexity": 4, "nested": false}, {"name": "_iter_files", "lineno": 76, "complexity": 4, "nested": false}, {"name": "_summarize_dirs", "lineno": 85, "complexity": 4, "nested": false}, {"name": "_project_root", "lineno": 58, "complexity": 3, "nested": false}, {"name": "_ensure_on_syspath", "lineno": 70, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/providers/utils_io_zip.py", "functions": 5, "total_complexity": 28, "avg_complexity": 5.6, "max_complexity": 14, "p95_complexity": 14.0, "by_function": [{"name": "run_v1", "lineno": 88, "complexity": 14, "nested": false}, {"name": "_summarize_zip", "lineno": 78, "complexity": 5, "nested": false}, {"name": "_as_bool", "lineno": 51, "complexity": 4, "nested": false}, {"name": "_choose_callable", "lineno": 61, "complexity": 3, "nested": false}, {"name": "_filter_kwargs", "lineno": 72, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/registry.py", "functions": 17, "total_complexity": 84, "avg_complexity": 4.941, "max_complexity": 32, "p95_complexity": 32.0, "by_function": [{"name": "CapabilityRegistry.run", "lineno": 222, "complexity": 32, "nested": false}, {"name": "CapabilityRegistry._normalize_to_artifacts", "lineno": 154, "complexity": 20, "nested": false}, {"name": "_make_problem", "lineno": 69, "complexity": 6, "nested": false}, {"name": "CapabilityRegistry._resolve", "lineno": 130, "complexity": 6, "nested": false}, {"name": "CapabilityRegistry.bulk_register", "lineno": 121, "complexity": 4, "nested": false}, {"name": "CapabilityRegistry.register", "lineno": 106, "complexity": 3, "nested": false}, {"name": "_sha256", "lineno": 45, "complexity": 2, "nested": false}, {"name": "_jsonable", "lineno": 47, "complexity": 2, "nested": true}, {"name": "Artifact.to_dict", "lineno": 41, "complexity": 1, "nested": false}, {"name": "_make_result", "lineno": 64, "complexity": 1, "nested": false}, {"name": "CapabilityRegistry.__init__", "lineno": 100, "complexity": 1, "nested": false}, {"name": "CapabilityRegistry.has", "lineno": 146, "complexity": 1, "nested": false}, {"name": "CapabilityRegistry.names", "lineno": 149, "complexity": 1, "nested": false}, {"name": "CapabilityRegistry._TaskLike.__init__", "lineno": 242, "complexity": 1, "nested": true}, {"name": "CapabilityRegistry._call_with", "lineno": 256, "complexity": 1, "nested": true}, {"name": "run", "lineno": 341, "complexity": 1, "nested": false}, {"name": "run_capability", "lineno": 345, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/spine/validation.py", "functions": 17, "total_complexity": 46, "avg_complexity": 2.706, "max_complexity": 12, "p95_complexity": 12.0, "by_function": [{"name": "_validate", "lineno": 104, "complexity": 12, "nested": true}, {"name": "_validate", "lineno": 137, "complexity": 6, "nested": true}, {"name": "ValidatorRegistry._run_all", "lineno": 74, "complexity": 5, "nested": false}, {"name": "ValidatorRegistry._collect", "lineno": 65, "complexity": 3, "nested": false}, {"name": "optional_fields", "lineno": 126, "complexity": 3, "nested": false}, {"name": "ValidatorRegistry.register_input", "lineno": 40, "complexity": 2, "nested": false}, {"name": "ValidatorRegistry.register_output", "lineno": 46, "complexity": 2, "nested": false}, {"name": "_v", "lineno": 151, "complexity": 2, "nested": true}, {"name": "_v", "lineno": 158, "complexity": 2, "nested": true}, {"name": "_v", "lineno": 165, "complexity": 2, "nested": true}, {"name": "ValidatorRegistry.__init__", "lineno": 34, "complexity": 1, "nested": false}, {"name": "ValidatorRegistry.validate_input", "lineno": 54, "complexity": 1, "nested": false}, {"name": "ValidatorRegistry.validate_output", "lineno": 58, "complexity": 1, "nested": false}, {"name": "require_fields", "lineno": 92, "complexity": 1, "nested": false}, {"name": "is_dict", "lineno": 150, "complexity": 1, "nested": false}, {"name": "is_list", "lineno": 157, "complexity": 1, "nested": false}, {"name": "is_instance", "lineno": 164, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/tasks/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/tasks/adapter.py", "functions": 2, "total_complexity": 9, "avg_complexity": 4.5, "max_complexity": 6, "p95_complexity": 6.0, "by_function": [{"name": "_unwrap_meta", "lineno": 17, "complexity": 6, "nested": false}, {"name": "GenericSanitizerAdapter.sanitize", "lineno": 38, "complexity": 3, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/tasks/base.py", "functions": 5, "total_complexity": 5, "avg_complexity": 1.0, "max_complexity": 1, "p95_complexity": 1.0, "by_function": [{"name": "TaskAdapter.sanitize", "lineno": 24, "complexity": 1, "nested": false}, {"name": "TaskAdapter.apply", "lineno": 32, "complexity": 1, "nested": false}, {"name": "TaskAdapter.verify", "lineno": 39, "complexity": 1, "nested": false}, {"name": "TaskAdapter.build_items", "lineno": 47, "complexity": 1, "nested": false}, {"name": "TaskAdapter.parse_response", "lineno": 51, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/tasks/providers.py", "functions": 3, "total_complexity": 15, "avg_complexity": 5.0, "max_complexity": 12, "p95_complexity": 12.0, "by_function": [{"name": "verify_v1", "lineno": 48, "complexity": 12, "nested": false}, {"name": "_err", "lineno": 37, "complexity": 2, "nested": false}, {"name": "_ok", "lineno": 33, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/tasks/registry.py", "functions": 1, "total_complexity": 5, "avg_complexity": 5.0, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "select_task_adapter", "lineno": 8, "complexity": 5, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/types/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/types/types.py", "functions": 3, "total_complexity": 7, "avg_complexity": 2.333, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "AskSpec.validate", "lineno": 77, "complexity": 5, "nested": false}, {"name": "AskSpec.for_docstrings", "lineno": 88, "complexity": 1, "nested": false}, {"name": "AskSpec.for_qa", "lineno": 99, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/bundle_io.py", "functions": 13, "total_complexity": 52, "avg_complexity": 4.0, "max_complexity": 10, "p95_complexity": 10.0, "by_function": [{"name": "rewrite_manifest_paths", "lineno": 146, "complexity": 10, "nested": false}, {"name": "emit_standard_artifacts", "lineno": 86, "complexity": 9, "nested": false}, {"name": "emit_transport_parts", "lineno": 119, "complexity": 7, "nested": false}, {"name": "ManifestAppender.ensure_header", "lineno": 31, "complexity": 5, "nested": false}, {"name": "ManifestAppender._read_lines", "lineno": 19, "complexity": 3, "nested": false}, {"name": "ManifestAppender._is_header", "lineno": 39, "complexity": 3, "nested": true}, {"name": "_artifact_record", "lineno": 74, "complexity": 3, "nested": false}, {"name": "_map", "lineno": 155, "complexity": 3, "nested": true}, {"name": "write_sha256sums_for_file", "lineno": 188, "complexity": 3, "nested": false}, {"name": "ManifestAppender.__init__", "lineno": 13, "complexity": 2, "nested": false}, {"name": "ManifestAppender.append_many", "lineno": 64, "complexity": 2, "nested": false}, {"name": "ManifestAppender._write_lines", "lineno": 27, "complexity": 1, "nested": false}, {"name": "ManifestAppender.append_record", "lineno": 59, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/contracts.py", "functions": 6, "total_complexity": 15, "avg_complexity": 2.5, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "build_manifest_header", "lineno": 9, "complexity": 5, "nested": false}, {"name": "build_bundle_summary", "lineno": 42, "complexity": 3, "nested": false}, {"name": "ast_symbol", "lineno": 56, "complexity": 2, "nested": false}, {"name": "ast_xref", "lineno": 82, "complexity": 2, "nested": false}, {"name": "build_quality_metric", "lineno": 95, "complexity": 2, "nested": false}, {"name": "ast_call", "lineno": 70, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/execute/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/execute/config.py", "functions": 2, "total_complexity": 21, "avg_complexity": 10.5, "max_complexity": 11, "p95_complexity": 11.0, "by_function": [{"name": "build_cfg", "lineno": 45, "complexity": 11, "nested": false}, {"name": "read_code_bundle_params", "lineno": 21, "complexity": 10, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/execute/executor.py", "functions": 3, "total_complexity": 44, "avg_complexity": 14.667, "max_complexity": 38, "p95_complexity": 38.0, "by_function": [{"name": "main", "lineno": 79, "complexity": 38, "nested": false}, {"name": "_load_analysis_emitter", "lineno": 10, "complexity": 5, "nested": false}, {"name": "_rewrite_to_mode", "lineno": 202, "complexity": 1, "nested": true}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/execute/fs.py", "functions": 4, "total_complexity": 27, "avg_complexity": 6.75, "max_complexity": 17, "p95_complexity": 17.0, "by_function": [{"name": "write_sha256sums_for_parts", "lineno": 73, "complexity": 17, "nested": false}, {"name": "write_parts_from_jsonl", "lineno": 8, "complexity": 6, "nested": false}, {"name": "make_name", "lineno": 34, "complexity": 2, "nested": true}, {"name": "flush", "lineno": 42, "complexity": 2, "nested": true}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/execute/funcs.py", "functions": 10, "total_complexity": 60, "avg_complexity": 6.0, "max_complexity": 12, "p95_complexity": 12.0, "by_function": [{"name": "discover_repo_paths", "lineno": 112, "complexity": 12, "nested": false}, {"name": "map_record_paths_inplace", "lineno": 100, "complexity": 8, "nested": false}, {"name": "clear_dir_contents", "lineno": 43, "complexity": 7, "nested": false}, {"name": "match_any", "lineno": 18, "complexity": 6, "nested": false}, {"name": "seg_excluded", "lineno": 30, "complexity": 6, "nested": false}, {"name": "is_managed_path", "lineno": 73, "complexity": 6, "nested": false}, {"name": "tool_versions", "lineno": 92, "complexity": 4, "nested": false}, {"name": "read_root_publish_analysis", "lineno": 152, "complexity": 4, "nested": false}, {"name": "read_root_emit_ast", "lineno": 169, "complexity": 4, "nested": false}, {"name": "copy_snapshot", "lineno": 58, "complexity": 3, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/execute/github.py", "functions": 14, "total_complexity": 101, "avg_complexity": 7.214, "max_complexity": 26, "p95_complexity": 26.0, "by_function": [{"name": "publish_to_github", "lineno": 117, "complexity": 26, "nested": false}, {"name": "prune_remote_code_delta", "lineno": 205, "complexity": 16, "nested": false}, {"name": "publish_github_design_manifest_memory", "lineno": 302, "complexity": 13, "nested": false}, {"name": "prune_remote_artifacts_delta", "lineno": 258, "complexity": 12, "nested": false}, {"name": "gh_walk_files", "lineno": 60, "complexity": 9, "nested": false}, {"name": "github_clean_remote_repo", "lineno": 79, "complexity": 9, "nested": false}, {"name": "gh_list_dir", "lineno": 45, "complexity": 4, "nested": false}, {"name": "print_full_raw_links", "lineno": 104, "complexity": 3, "nested": false}, {"name": "_req", "lineno": 406, "complexity": 3, "nested": true}, {"name": "_flush", "lineno": 353, "complexity": 2, "nested": true}, {"name": "gh_headers", "lineno": 22, "complexity": 1, "nested": false}, {"name": "gh_json", "lineno": 31, "complexity": 1, "nested": false}, {"name": "gh_delete_file", "lineno": 37, "complexity": 1, "nested": false}, {"name": "_api_headers", "lineno": 398, "complexity": 1, "nested": true}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/execute/manifest.py", "functions": 3, "total_complexity": 18, "avg_complexity": 6.0, "max_complexity": 14, "p95_complexity": 14.0, "by_function": [{"name": "maybe_chunk_manifest_and_update", "lineno": 54, "complexity": 14, "nested": false}, {"name": "should_chunk", "lineno": 28, "complexity": 3, "nested": false}, {"name": "append_parts_artifacts_into_manifest", "lineno": 35, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/execute/read_scanners.py", "functions": 13, "total_complexity": 88, "avg_complexity": 6.769, "max_complexity": 32, "p95_complexity": 32.0, "by_function": [{"name": "augment_manifest", "lineno": 77, "complexity": 32, "nested": false}, {"name": "augment_manifest_memory", "lineno": 328, "complexity": 29, "nested": false}, {"name": "append_records", "lineno": 66, "complexity": 4, "nested": false}, {"name": "map_path", "lineno": 103, "complexity": 3, "nested": true}, {"name": "_take_list", "lineno": 189, "complexity": 3, "nested": true}, {"name": "run_scanner", "lineno": 227, "complexity": 3, "nested": true}, {"name": "map_path", "lineno": 360, "complexity": 3, "nested": true}, {"name": "_take_list", "lineno": 439, "complexity": 3, "nested": true}, {"name": "run_scanner", "lineno": 476, "complexity": 3, "nested": true}, {"name": "MemoryAppender.ensure_header", "lineno": 54, "complexity": 2, "nested": false}, {"name": "MemoryAppender.__init__", "lineno": 50, "complexity": 1, "nested": false}, {"name": "MemoryAppender.append_record", "lineno": 59, "complexity": 1, "nested": false}, {"name": "MemoryAppender.to_jsonl_bytes", "lineno": 62, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/graphs.py", "functions": 2, "total_complexity": 11, "avg_complexity": 5.5, "max_complexity": 7, "p95_complexity": 7.0, "by_function": [{"name": "_edge_key", "lineno": 8, "complexity": 7, "nested": false}, {"name": "coalesce_edges", "lineno": 17, "complexity": 4, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/normalize.py", "functions": 6, "total_complexity": 14, "avg_complexity": 2.333, "max_complexity": 7, "p95_complexity": 7.0, "by_function": [{"name": "Normalizer.apply", "lineno": 45, "complexity": 7, "nested": false}, {"name": "Normalizer._from_text", "lineno": 77, "complexity": 3, "nested": false}, {"name": "Normalizer.__init__", "lineno": 40, "complexity": 1, "nested": false}, {"name": "Normalizer._should_skip", "lineno": 70, "complexity": 1, "nested": false}, {"name": "Normalizer._to_text", "lineno": 74, "complexity": 1, "nested": false}, {"name": "apply_normalization", "lineno": 88, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/orchestrate.py", "functions": 17, "total_complexity": 101, "avg_complexity": 5.941, "max_complexity": 18, "p95_complexity": 18.0, "by_function": [{"name": "PromptEmbedder.build", "lineno": 148, "complexity": 18, "nested": false}, {"name": "Packager._publish_code_to_github", "lineno": 401, "complexity": 18, "nested": false}, {"name": "Packager.run", "lineno": 223, "complexity": 17, "nested": false}, {"name": "Packager._roles_map", "lineno": 375, "complexity": 15, "nested": false}, {"name": "SourceIngestor.ingest", "lineno": 68, "complexity": 8, "nested": false}, {"name": "Packager._scan_entrypoints", "lineno": 391, "complexity": 7, "nested": false}, {"name": "Packager.is_binary_path", "lineno": 419, "complexity": 3, "nested": true}, {"name": "Packager._github_get_sha", "lineno": 461, "complexity": 3, "nested": false}, {"name": "Packager._github_put_file", "lineno": 483, "complexity": 3, "nested": false}, {"name": "NormalizerAdapter.normalize", "lineno": 133, "complexity": 2, "nested": false}, {"name": "_log", "lineno": 51, "complexity": 1, "nested": false}, {"name": "SourceIngestor.__init__", "lineno": 65, "complexity": 1, "nested": false}, {"name": "FileDiscovery.__init__", "lineno": 111, "complexity": 1, "nested": false}, {"name": "FileDiscovery.discover", "lineno": 114, "complexity": 1, "nested": false}, {"name": "NormalizerAdapter.__init__", "lineno": 130, "complexity": 1, "nested": false}, {"name": "PromptEmbedder.__init__", "lineno": 145, "complexity": 1, "nested": false}, {"name": "Packager.__init__", "lineno": 214, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/patch_pack.py", "functions": 5, "total_complexity": 12, "avg_complexity": 2.4, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "PatchPack.build_rag_chunks", "lineno": 72, "complexity": 4, "nested": false}, {"name": "PatchPack._hash_to_vec", "lineno": 140, "complexity": 3, "nested": false}, {"name": "PatchPack.empty_patch_pack", "lineno": 52, "complexity": 2, "nested": false}, {"name": "PatchPack.build_embedding_index", "lineno": 120, "complexity": 2, "nested": false}, {"name": "_Chunk.as_dict", "lineno": 23, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/python_api.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/quality.py", "functions": 4, "total_complexity": 26, "avg_complexity": 6.5, "max_complexity": 11, "p95_complexity": 11.0, "by_function": [{"name": "quality_for_python", "lineno": 84, "complexity": 11, "nested": false}, {"name": "_function_spans", "lineno": 70, "complexity": 8, "nested": false}, {"name": "_text_loc_sloc", "lineno": 27, "complexity": 4, "nested": false}, {"name": "_cyclomatic_complexity", "lineno": 59, "complexity": 3, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/run_pack.py", "functions": 37, "total_complexity": 304, "avg_complexity": 8.216, "max_complexity": 46, "p95_complexity": 32.0, "by_function": [{"name": "main", "lineno": 1192, "complexity": 46, "nested": false}, {"name": "augment_manifest", "lineno": 937, "complexity": 32, "nested": false}, {"name": "_publish_to_github", "lineno": 699, "complexity": 26, "nested": false}, {"name": "_write_sha256sums_for_parts", "lineno": 211, "complexity": 17, "nested": false}, {"name": "_prune_remote_code_delta", "lineno": 807, "complexity": 16, "nested": false}, {"name": "_maybe_chunk_manifest_and_update", "lineno": 606, "complexity": 13, "nested": false}, {"name": "discover_repo_paths", "lineno": 143, "complexity": 12, "nested": false}, {"name": "_prune_remote_artifacts_delta", "lineno": 860, "complexity": 12, "nested": false}, {"name": "build_cfg", "lineno": 390, "complexity": 11, "nested": false}, {"name": "_read_code_bundle_params", "lineno": 486, "complexity": 10, "nested": false}, {"name": "_gh_walk_files", "lineno": 299, "complexity": 9, "nested": false}, {"name": "github_clean_remote_repo", "lineno": 318, "complexity": 9, "nested": false}, {"name": "_map_record_paths_inplace", "lineno": 912, "complexity": 8, "nested": false}, {"name": "_clear_dir_contents", "lineno": 183, "complexity": 7, "nested": false}, {"name": "_match_any", "lineno": 120, "complexity": 6, "nested": false}, {"name": "_seg_excluded", "lineno": 132, "complexity": 6, "nested": false}, {"name": "_write_parts_from_jsonl", "lineno": 522, "complexity": 6, "nested": false}, {"name": "_is_managed_path", "lineno": 790, "complexity": 6, "nested": false}, {"name": "_load_analysis_emitter", "lineno": 54, "complexity": 5, "nested": false}, {"name": "_gh_list_dir", "lineno": 284, "complexity": 4, "nested": false}, {"name": "_read_root_publish_analysis", "lineno": 356, "complexity": 4, "nested": false}, {"name": "_read_root_emit_ast", "lineno": 373, "complexity": 4, "nested": false}, {"name": "_tool_versions", "lineno": 904, "complexity": 4, "nested": false}, {"name": "_append_records", "lineno": 925, "complexity": 4, "nested": false}, {"name": "copy_snapshot", "lineno": 198, "complexity": 3, "nested": false}, {"name": "_print_full_raw_links", "lineno": 344, "complexity": 3, "nested": false}, {"name": "_should_chunk", "lineno": 514, "complexity": 3, "nested": false}, {"name": "map_path", "lineno": 963, "complexity": 3, "nested": true}, {"name": "_take_list", "lineno": 1049, "complexity": 3, "nested": true}, {"name": "run_scanner", "lineno": 1087, "complexity": 3, "nested": true}, {"name": "make_name", "lineno": 548, "complexity": 2, "nested": true}, {"name": "flush", "lineno": 556, "complexity": 2, "nested": true}, {"name": "_gh_headers", "lineno": 261, "complexity": 1, "nested": false}, {"name": "_gh_json", "lineno": 270, "complexity": 1, "nested": false}, {"name": "_gh_delete_file", "lineno": 276, "complexity": 1, "nested": false}, {"name": "_append_parts_artifacts_into_manifest", "lineno": 587, "complexity": 1, "nested": false}, {"name": "_rewrite_to_mode", "lineno": 1315, "complexity": 1, "nested": true}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/spine_targets.py", "functions": 3, "total_complexity": 14, "avg_complexity": 4.667, "max_complexity": 11, "p95_complexity": 11.0, "by_function": [{"name": "inject_prompts_v1", "lineno": 63, "complexity": 11, "nested": false}, {"name": "_err", "lineno": 45, "complexity": 2, "nested": false}, {"name": "_ok", "lineno": 34, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/analysis_emitter.py", "functions": 11, "total_complexity": 28, "avg_complexity": 2.545, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "_gate_from_cfg", "lineno": 147, "complexity": 5, "nested": false}, {"name": "emit_analysis", "lineno": 168, "complexity": 5, "nested": false}, {"name": "_resolve_manifest_dir", "lineno": 85, "complexity": 4, "nested": false}, {"name": "_candidate_manifest_dirs", "lineno": 47, "complexity": 3, "nested": false}, {"name": "emit_all", "lineno": 227, "complexity": 3, "nested": false}, {"name": "_has_parts", "lineno": 71, "complexity": 2, "nested": false}, {"name": "_has_bundle_jsonl", "lineno": 78, "complexity": 2, "nested": false}, {"name": "_pfx", "lineno": 43, "complexity": 1, "nested": false}, {"name": "_default_filenames", "lineno": 106, "complexity": 1, "nested": false}, {"name": "_default_modes", "lineno": 134, "complexity": 1, "nested": false}, {"name": "emit_from_config", "lineno": 221, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/core/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/core/config.py", "functions": 5, "total_complexity": 5, "avg_complexity": 1.0, "max_complexity": 1, "p95_complexity": 1.0, "by_function": [{"name": "Limits.__getattr__", "lineno": 91, "complexity": 1, "nested": false}, {"name": "SandboxConstraints.__getattr__", "lineno": 115, "complexity": 1, "nested": false}, {"name": "Policy.sandbox_constraints", "lineno": 134, "complexity": 1, "nested": false}, {"name": "Policy.secrets_policy", "lineno": 138, "complexity": 1, "nested": false}, {"name": "Policy.phases", "lineno": 142, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/core/discovery.py", "functions": 6, "total_complexity": 21, "avg_complexity": 3.5, "max_complexity": 12, "p95_complexity": 12.0, "by_function": [{"name": "DiscoveryEngine.discover", "lineno": 65, "complexity": 12, "nested": false}, {"name": "DiscoveryEngine._seg_excluded", "lineno": 52, "complexity": 3, "nested": false}, {"name": "_cf", "lineno": 14, "complexity": 2, "nested": false}, {"name": "_match_glob", "lineno": 24, "complexity": 2, "nested": false}, {"name": "_norm_glob", "lineno": 19, "complexity": 1, "nested": false}, {"name": "DiscoveryEngine.__init__", "lineno": 49, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/core/errors.py", "functions": 2, "total_complexity": 7, "avg_complexity": 3.5, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "PackagerError.__str__", "lineno": 41, "complexity": 5, "nested": false}, {"name": "PackagerError.__init__", "lineno": 27, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/core/integrity.py", "functions": 2, "total_complexity": 4, "avg_complexity": 2.0, "max_complexity": 3, "p95_complexity": 3.0, "by_function": [{"name": "Integrity.sha256_file", "lineno": 12, "complexity": 3, "nested": false}, {"name": "Integrity.sha256_bytes", "lineno": 8, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/core/loader.py", "functions": 8, "total_complexity": 38, "avg_complexity": 4.75, "max_complexity": 12, "p95_complexity": 12.0, "by_function": [{"name": "load_packager_config", "lineno": 155, "complexity": 12, "nested": false}, {"name": "_resolve_emitter_policy", "lineno": 106, "complexity": 7, "nested": false}, {"name": "as_set", "lineno": 123, "complexity": 7, "nested": true}, {"name": "_load_yaml", "lineno": 42, "complexity": 3, "nested": false}, {"name": "_req_str", "lineno": 49, "complexity": 3, "nested": false}, {"name": "_family_canon_map", "lineno": 61, "complexity": 3, "nested": false}, {"name": "_canon_family", "lineno": 99, "complexity": 2, "nested": false}, {"name": "_get_bool", "lineno": 56, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/core/orchestrator.py", "functions": 3, "total_complexity": 5, "avg_complexity": 1.667, "max_complexity": 3, "p95_complexity": 3.0, "by_function": [{"name": "Packager.run", "lineno": 40, "complexity": 3, "nested": false}, {"name": "_iso_now", "lineno": 14, "complexity": 1, "nested": false}, {"name": "Packager.__init__", "lineno": 35, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/core/paths.py", "functions": 2, "total_complexity": 2, "avg_complexity": 1.0, "max_complexity": 1, "p95_complexity": 1.0, "by_function": [{"name": "ensure_dir", "lineno": 6, "complexity": 1, "nested": false}, {"name": "analysis_out_dir", "lineno": 10, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/core/writer.py", "functions": 3, "total_complexity": 6, "avg_complexity": 2.0, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "write_json_atomic", "lineno": 16, "complexity": 4, "nested": false}, {"name": "ensure_dir", "lineno": 9, "complexity": 1, "nested": false}, {"name": "write_index", "lineno": 51, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/emitters/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/emitters/backfill.py", "functions": 5, "total_complexity": 32, "avg_complexity": 6.4, "max_complexity": 25, "p95_complexity": 25.0, "by_function": [{"name": "emit_analysis_sidecars", "lineno": 85, "complexity": 25, "nested": false}, {"name": "_norm_mode", "lineno": 61, "complexity": 4, "nested": false}, {"name": "_pfx", "lineno": 57, "complexity": 1, "nested": false}, {"name": "_should_write", "lineno": 77, "complexity": 1, "nested": false}, {"name": "_ensure_dir", "lineno": 81, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/emitters/registry.py", "functions": 17, "total_complexity": 115, "avg_complexity": 6.765, "max_complexity": 20, "p95_complexity": 20.0, "by_function": [{"name": "_reduce_quality", "lineno": 182, "complexity": 20, "nested": false}, {"name": "_reduce_deps", "lineno": 361, "complexity": 17, "nested": false}, {"name": "_reduce_ast_imports", "lineno": 427, "complexity": 14, "nested": false}, {"name": "_reduce_git", "lineno": 524, "complexity": 13, "nested": false}, {"name": "_reduce_io_core", "lineno": 483, "complexity": 12, "nested": false}, {"name": "_reduce_entrypoints", "lineno": 268, "complexity": 9, "nested": false}, {"name": "_reduce_env", "lineno": 307, "complexity": 8, "nested": false}, {"name": "_generic_counter", "lineno": 167, "complexity": 5, "nested": false}, {"name": "_norm", "lineno": 41, "complexity": 3, "nested": false}, {"name": "_str", "lineno": 149, "complexity": 3, "nested": false}, {"name": "_round3", "lineno": 138, "complexity": 2, "nested": false}, {"name": "_safe_int", "lineno": 142, "complexity": 2, "nested": false}, {"name": "_stable_top", "lineno": 156, "complexity": 2, "nested": false}, {"name": "get_reducer", "lineno": 617, "complexity": 2, "nested": false}, {"name": "canonicalize_family", "lineno": 128, "complexity": 1, "nested": false}, {"name": "_reduce_static", "lineno": 571, "complexity": 1, "nested": false}, {"name": "zero_summary_for", "lineno": 623, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/io/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/io/guide_writer.py", "functions": 7, "total_complexity": 34, "avg_complexity": 4.857, "max_complexity": 23, "p95_complexity": 23.0, "by_function": [{"name": "GuideWriter.build", "lineno": 56, "complexity": 23, "nested": false}, {"name": "_posix_rel", "lineno": 15, "complexity": 4, "nested": false}, {"name": "_read_json", "lineno": 31, "complexity": 2, "nested": false}, {"name": "GuideWriter._card", "lineno": 151, "complexity": 2, "nested": true}, {"name": "_iso_now", "lineno": 10, "complexity": 1, "nested": false}, {"name": "GuideWriter.__init__", "lineno": 47, "complexity": 1, "nested": false}, {"name": "GuideWriter.write", "lineno": 50, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/io/manifest_writer.py", "functions": 8, "total_complexity": 13, "avg_complexity": 1.625, "max_complexity": 3, "p95_complexity": 3.0, "by_function": [{"name": "write_sha256sums", "lineno": 123, "complexity": 3, "nested": false}, {"name": "BundleWriter.write", "lineno": 63, "complexity": 2, "nested": false}, {"name": "BundleWriter.write_sums", "lineno": 82, "complexity": 2, "nested": false}, {"name": "write_artifacts_bundle", "lineno": 114, "complexity": 2, "nested": false}, {"name": "PathOps.ensure_dir", "lineno": 27, "complexity": 1, "nested": false}, {"name": "Integrity.sha256_bytes", "lineno": 35, "complexity": 1, "nested": false}, {"name": "BundleWriter.__init__", "lineno": 58, "complexity": 1, "nested": false}, {"name": "BundleWriter._ensure_parent", "lineno": 108, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/io/publisher.py", "functions": 9, "total_complexity": 20, "avg_complexity": 2.222, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "_get_sha", "lineno": 35, "complexity": 5, "nested": false}, {"name": "GitHubPublisher.publish_many_files", "lineno": 96, "complexity": 4, "nested": false}, {"name": "_join_paths", "lineno": 61, "complexity": 3, "nested": false}, {"name": "_put_file", "lineno": 51, "complexity": 2, "nested": false}, {"name": "GitHubPublisher.__init__", "lineno": 74, "complexity": 2, "nested": false}, {"name": "_headers", "lineno": 21, "complexity": 1, "nested": false}, {"name": "_api_url", "lineno": 30, "complexity": 1, "nested": false}, {"name": "GitHubPublisher.publish_bytes", "lineno": 80, "complexity": 1, "nested": false}, {"name": "GitHubPublisher.publish_file", "lineno": 89, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/io/runspec_writer.py", "functions": 6, "total_complexity": 34, "avg_complexity": 5.667, "max_complexity": 25, "p95_complexity": 25.0, "by_function": [{"name": "RunSpecWriter.build_snapshot", "lineno": 50, "complexity": 25, "nested": false}, {"name": "_serialize_transport", "lineno": 16, "complexity": 4, "nested": false}, {"name": "_as_path", "lineno": 12, "complexity": 2, "nested": false}, {"name": "_log", "lineno": 8, "complexity": 1, "nested": false}, {"name": "RunSpecWriter.__init__", "lineno": 40, "complexity": 1, "nested": false}, {"name": "RunSpecWriter.write", "lineno": 43, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/base.py", "functions": 6, "total_complexity": 34, "avg_complexity": 5.667, "max_complexity": 9, "p95_complexity": 9.0, "by_function": [{"name": "_module_for_language", "lineno": 50, "complexity": 9, "nested": false}, {"name": "discover_language_plugins", "lineno": 112, "complexity": 8, "nested": false}, {"name": "_find_languages_dir", "lineno": 33, "complexity": 6, "nested": false}, {"name": "_wrap_legacy", "lineno": 81, "complexity": 5, "nested": false}, {"name": "_load_from_module", "lineno": 100, "complexity": 5, "nested": false}, {"name": "analyze", "lineno": 93, "complexity": 1, "nested": true}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/cpp/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/cpp/cpp.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/csharp/plugin.py", "functions": 1, "total_complexity": 5, "avg_complexity": 5.0, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "_CsPlugin.analyze", "lineno": 28, "complexity": 5, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/html/plugin.py", "functions": 3, "total_complexity": 12, "avg_complexity": 4.0, "max_complexity": 7, "p95_complexity": 7.0, "by_function": [{"name": "_Collector.handle_starttag", "lineno": 25, "complexity": 7, "nested": false}, {"name": "_HtmlPlugin.analyze", "lineno": 45, "complexity": 4, "nested": false}, {"name": "_Collector.__init__", "lineno": 19, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/javascript/plugin.py", "functions": 1, "total_complexity": 5, "avg_complexity": 5.0, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "_JsPlugin.analyze", "lineno": 43, "complexity": 5, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/plugin.py", "functions": 1, "total_complexity": 5, "avg_complexity": 5.0, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "_CppPlugin.analyze", "lineno": 34, "complexity": 5, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/python/plugin.py", "functions": 5, "total_complexity": 34, "avg_complexity": 6.8, "max_complexity": 14, "p95_complexity": 14.0, "by_function": [{"name": "_analyze_one", "lineno": 78, "complexity": 14, "nested": false}, {"name": "_coerce_files", "lineno": 36, "complexity": 12, "nested": false}, {"name": "_PythonPlugin.analyze", "lineno": 129, "complexity": 5, "nested": false}, {"name": "_safe_decode", "lineno": 71, "complexity": 2, "nested": false}, {"name": "_is_py", "lineno": 31, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/sql/plugin.py", "functions": 4, "total_complexity": 22, "avg_complexity": 5.5, "max_complexity": 12, "p95_complexity": 12.0, "by_function": [{"name": "_dialect_hint", "lineno": 34, "complexity": 12, "nested": false}, {"name": "_SqlPlugin.analyze", "lineno": 59, "complexity": 5, "nested": false}, {"name": "_extract_refs", "lineno": 48, "complexity": 3, "nested": false}, {"name": "_split_statements", "lineno": 43, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/languages/typescript/plugin.py", "functions": 1, "total_complexity": 5, "avg_complexity": 5.0, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "_TsPlugin.analyze", "lineno": 44, "complexity": 5, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/manifest/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/manifest/reader.py", "functions": 9, "total_complexity": 47, "avg_complexity": 5.222, "max_complexity": 15, "p95_complexity": 15.0, "by_function": [{"name": "ManifestReader._resolve_part_files", "lineno": 194, "complexity": 15, "nested": false}, {"name": "ManifestReader._iter_part_file", "lineno": 230, "complexity": 14, "nested": false}, {"name": "ManifestReader._extract_family", "lineno": 283, "complexity": 5, "nested": false}, {"name": "_normalize_family_key", "lineno": 115, "complexity": 3, "nested": false}, {"name": "ManifestReader.__init__", "lineno": 151, "complexity": 3, "nested": false}, {"name": "ManifestReader.iter_manifest", "lineno": 175, "complexity": 2, "nested": false}, {"name": "ManifestReader._normalize_record", "lineno": 274, "complexity": 2, "nested": false}, {"name": "ManifestReader._canon", "lineno": 299, "complexity": 2, "nested": false}, {"name": "ManifestReader.iter_items", "lineno": 187, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/manifest/registry.py", "functions": 12, "total_complexity": 19, "avg_complexity": 1.583, "max_complexity": 3, "p95_complexity": 3.0, "by_function": [{"name": "canonicalize_family", "lineno": 66, "complexity": 3, "nested": false}, {"name": "_docs_reducer", "lineno": 108, "complexity": 3, "nested": false}, {"name": "_quality_reducer", "lineno": 118, "complexity": 3, "nested": false}, {"name": "get_reducer", "lineno": 158, "complexity": 2, "nested": false}, {"name": "_generic_counter", "lineno": 75, "complexity": 1, "nested": false}, {"name": "_ast_symbols_reducer", "lineno": 83, "complexity": 1, "nested": false}, {"name": "_ast_imports_reducer", "lineno": 88, "complexity": 1, "nested": false}, {"name": "_ast_calls_reducer", "lineno": 93, "complexity": 1, "nested": false}, {"name": "_deps_reducer", "lineno": 98, "complexity": 1, "nested": false}, {"name": "_entrypoints_reducer", "lineno": 103, "complexity": 1, "nested": false}, {"name": "_sql_reducer", "lineno": 128, "complexity": 1, "nested": false}, {"name": "zero_summary_for", "lineno": 162, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/assets_index.py", "functions": 16, "total_complexity": 100, "avg_complexity": 6.25, "max_complexity": 22, "p95_complexity": 22.0, "by_function": [{"name": "scan", "lineno": 286, "complexity": 22, "nested": false}, {"name": "categorize", "lineno": 252, "complexity": 14, "nested": false}, {"name": "_jpeg_size", "lineno": 158, "complexity": 13, "nested": false}, {"name": "_svg_size", "lineno": 212, "complexity": 9, "nested": false}, {"name": "_webp_size", "lineno": 196, "complexity": 7, "nested": false}, {"name": "sniff_image_info", "lineno": 235, "complexity": 6, "nested": false}, {"name": "_sha256_file", "lineno": 87, "complexity": 5, "nested": false}, {"name": "_count_lines", "lineno": 116, "complexity": 4, "nested": false}, {"name": "_png_size", "lineno": 139, "complexity": 4, "nested": false}, {"name": "_safe_read_text", "lineno": 107, "complexity": 3, "nested": false}, {"name": "_gif_size", "lineno": 145, "complexity": 3, "nested": false}, {"name": "_bmp_size", "lineno": 151, "complexity": 3, "nested": false}, {"name": "_num", "lineno": 217, "complexity": 3, "nested": true}, {"name": "_read_head", "lineno": 132, "complexity": 2, "nested": false}, {"name": "_guess_mime", "lineno": 100, "complexity": 1, "nested": false}, {"name": "_is_text_ext", "lineno": 104, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/complexity.py", "functions": 27, "total_complexity": 63, "avg_complexity": 2.333, "max_complexity": 8, "p95_complexity": 7.0, "by_function": [{"name": "scan", "lineno": 306, "complexity": 8, "nested": false}, {"name": "analyze_file", "lineno": 256, "complexity": 7, "nested": false}, {"name": "_FuncComplexityVisitor.visit_ListComp", "lineno": 116, "complexity": 3, "nested": false}, {"name": "_FuncComplexityVisitor.visit_SetComp", "lineno": 121, "complexity": 3, "nested": false}, {"name": "_FuncComplexityVisitor.visit_DictComp", "lineno": 126, "complexity": 3, "nested": false}, {"name": "_FuncComplexityVisitor.visit_GeneratorExp", "lineno": 131, "complexity": 3, "nested": false}, {"name": "_FuncComplexityVisitor.generic_visit_no_defs", "lineno": 148, "complexity": 3, "nested": false}, {"name": "_FunctionCollector.visit_FunctionDef", "lineno": 195, "complexity": 3, "nested": false}, {"name": "_FunctionCollector.visit_AsyncFunctionDef", "lineno": 208, "complexity": 3, "nested": false}, {"name": "_safe_parse", "lineno": 226, "complexity": 3, "nested": false}, {"name": "_percentile", "lineno": 236, "complexity": 3, "nested": false}, {"name": "_FuncComplexityVisitor.visit_Try", "lineno": 111, "complexity": 2, "nested": false}, {"name": "_FuncComplexityVisitor.visit_Match", "lineno": 137, "complexity": 2, "nested": false}, {"name": "_FunctionCollector._qualname", "lineno": 173, "complexity": 2, "nested": false}, {"name": "_FunctionCollector.visit_ClassDef", "lineno": 186, "complexity": 2, "nested": false}, {"name": "_round3", "lineno": 248, "complexity": 2, "nested": false}, {"name": "_FuncComplexityVisitor.__init__", "lineno": 75, "complexity": 1, "nested": false}, {"name": "_FuncComplexityVisitor.visit_If", "lineno": 79, "complexity": 1, "nested": false}, {"name": "_FuncComplexityVisitor.visit_For", "lineno": 83, "complexity": 1, "nested": false}, {"name": "_FuncComplexityVisitor.visit_AsyncFor", "lineno": 87, "complexity": 1, "nested": false}, {"name": "_FuncComplexityVisitor.visit_While", "lineno": 91, "complexity": 1, "nested": false}, {"name": "_FuncComplexityVisitor.visit_IfExp", "lineno": 95, "complexity": 1, "nested": false}, {"name": "_FuncComplexityVisitor.visit_Assert", "lineno": 99, "complexity": 1, "nested": false}, {"name": "_FuncComplexityVisitor.visit_BoolOp", "lineno": 104, "complexity": 1, "nested": false}, {"name": "_FuncComplexityVisitor.visit_Lambda", "lineno": 143, "complexity": 1, "nested": false}, {"name": "_FunctionCollector.__init__", "lineno": 168, "complexity": 1, "nested": false}, {"name": "_FunctionCollector._compute_complexity", "lineno": 180, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/deps_scan.py", "functions": 16, "total_complexity": 149, "avg_complexity": 9.312, "max_complexity": 33, "p95_complexity": 33.0, "by_function": [{"name": "scan_dependencies", "lineno": 78, "complexity": 33, "nested": false}, {"name": "_parse_pyproject", "lineno": 372, "complexity": 29, "nested": false}, {"name": "_parse_poetry_lock", "lineno": 287, "complexity": 14, "nested": false}, {"name": "_DepMerger.add", "lineno": 457, "complexity": 13, "nested": false}, {"name": "_find_python_dep_files", "lineno": 246, "complexity": 12, "nested": false}, {"name": "_parse_requirements", "lineno": 347, "complexity": 10, "nested": false}, {"name": "_parse_setup_cfg", "lineno": 417, "complexity": 9, "nested": false}, {"name": "_extract_name_version_from_poetry_entry", "lineno": 564, "complexity": 6, "nested": false}, {"name": "_dig", "lineno": 524, "complexity": 4, "nested": false}, {"name": "_split_cfg_list", "lineno": 537, "complexity": 4, "nested": false}, {"name": "_extract_name_version_from_spec", "lineno": 548, "complexity": 4, "nested": false}, {"name": "_is_requirements_file", "lineno": 276, "complexity": 3, "nested": false}, {"name": "_DepMerger.iter_sorted", "lineno": 505, "complexity": 3, "nested": false}, {"name": "_relposix", "lineno": 514, "complexity": 3, "nested": false}, {"name": "_DepMerger.__init__", "lineno": 452, "complexity": 1, "nested": false}, {"name": "_DepMerger._rank", "lineno": 502, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/doc_coverage.py", "functions": 6, "total_complexity": 27, "avg_complexity": 4.5, "max_complexity": 13, "p95_complexity": 13.0, "by_function": [{"name": "analyze_file", "lineno": 87, "complexity": 13, "nested": false}, {"name": "scan", "lineno": 156, "complexity": 5, "nested": false}, {"name": "_safe_parse", "lineno": 72, "complexity": 3, "nested": false}, {"name": "Counts.coverage", "lineno": 60, "complexity": 2, "nested": false}, {"name": "_has_doc", "lineno": 65, "complexity": 2, "nested": false}, {"name": "cov", "lineno": 208, "complexity": 2, "nested": true}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/entrypoints.py", "functions": 9, "total_complexity": 67, "avg_complexity": 7.444, "max_complexity": 16, "p95_complexity": 16.0, "by_function": [{"name": "_parse_pyproject", "lineno": 85, "complexity": 16, "nested": false}, {"name": "scan", "lineno": 238, "complexity": 15, "nested": false}, {"name": "_parse_setup_cfg", "lineno": 129, "complexity": 12, "nested": false}, {"name": "_parse_package_json", "lineno": 168, "complexity": 7, "nested": false}, {"name": "_is_shell_script", "lineno": 201, "complexity": 4, "nested": false}, {"name": "_python_entrypoint_record", "lineno": 207, "complexity": 4, "nested": false}, {"name": "_shell_entrypoint_record", "lineno": 221, "complexity": 4, "nested": false}, {"name": "_dotted_module", "lineno": 68, "complexity": 3, "nested": false}, {"name": "_read_text_head", "lineno": 61, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/env_index.py", "functions": 22, "total_complexity": 108, "avg_complexity": 4.909, "max_complexity": 14, "p95_complexity": 11.0, "by_function": [{"name": "_PyEnvVisitor.visit_Call", "lineno": 308, "complexity": 14, "nested": false}, {"name": "scan", "lineno": 376, "complexity": 11, "nested": false}, {"name": "_scan_python_env_usage", "lineno": 337, "complexity": 7, "nested": false}, {"name": "_strip_inline_comment", "lineno": 112, "complexity": 6, "nested": false}, {"name": "walk", "lineno": 201, "complexity": 6, "nested": true}, {"name": "walk", "lineno": 222, "complexity": 6, "nested": true}, {"name": "_PyEnvVisitor.visit_ImportFrom", "lineno": 259, "complexity": 6, "nested": false}, {"name": "_parse_env_vars", "lineno": 160, "complexity": 5, "nested": false}, {"name": "_PyEnvVisitor._is_os_environ_attr", "lineno": 275, "complexity": 5, "nested": false}, {"name": "_PyEnvVisitor._is_os_getenv_attr", "lineno": 286, "complexity": 5, "nested": false}, {"name": "_PyEnvVisitor.visit_Subscript", "lineno": 294, "complexity": 5, "nested": false}, {"name": "_is_env_like", "lineno": 143, "complexity": 4, "nested": false}, {"name": "_is_template_env", "lineno": 152, "complexity": 4, "nested": false}, {"name": "_PyEnvVisitor.visit_Import", "lineno": 254, "complexity": 4, "nested": false}, {"name": "_read_text_limited", "lineno": 102, "complexity": 3, "nested": false}, {"name": "_extract_placeholders_from_text", "lineno": 186, "complexity": 3, "nested": false}, {"name": "_extract_placeholders_from_toml", "lineno": 213, "complexity": 3, "nested": false}, {"name": "_PyEnvVisitor._const_str", "lineno": 270, "complexity": 3, "nested": false}, {"name": "_scan_js_env_usage_text", "lineno": 364, "complexity": 3, "nested": false}, {"name": "_extract_placeholders_from_json", "lineno": 194, "complexity": 2, "nested": false}, {"name": "_PyEnvVisitor._is_environ_name", "lineno": 282, "complexity": 2, "nested": false}, {"name": "_PyEnvVisitor.__init__", "lineno": 247, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/git_info.py", "functions": 7, "total_complexity": 50, "avg_complexity": 7.143, "max_complexity": 25, "p95_complexity": 25.0, "by_function": [{"name": "_collect_repo_info", "lineno": 84, "complexity": 25, "nested": false}, {"name": "_collect_gitignores", "lineno": 186, "complexity": 7, "nested": false}, {"name": "_collect_submodules", "lineno": 213, "complexity": 6, "nested": false}, {"name": "scan", "lineno": 251, "complexity": 5, "nested": false}, {"name": "_run_git", "lineno": 49, "complexity": 3, "nested": false}, {"name": "_has_git", "lineno": 70, "complexity": 2, "nested": false}, {"name": "_is_repo", "lineno": 75, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/html_index.py", "functions": 12, "total_complexity": 71, "avg_complexity": 5.917, "max_complexity": 36, "p95_complexity": 36.0, "by_function": [{"name": "_HTMLScanner.handle_starttag", "lineno": 105, "complexity": 36, "nested": false}, {"name": "scan", "lineno": 208, "complexity": 7, "nested": false}, {"name": "_sha256_file", "lineno": 54, "complexity": 5, "nested": false}, {"name": "_HTMLScanner.handle_data", "lineno": 177, "complexity": 5, "nested": false}, {"name": "_analyze_html_text", "lineno": 193, "complexity": 5, "nested": false}, {"name": "_read_text_limited", "lineno": 45, "complexity": 3, "nested": false}, {"name": "_HTMLScanner.handle_decl", "lineno": 101, "complexity": 2, "nested": false}, {"name": "_HTMLScanner.handle_endtag", "lineno": 173, "complexity": 2, "nested": false}, {"name": "_HTMLScanner._add_hint", "lineno": 185, "complexity": 2, "nested": false}, {"name": "_top", "lineno": 259, "complexity": 2, "nested": true}, {"name": "_is_html_path", "lineno": 42, "complexity": 1, "nested": false}, {"name": "_HTMLScanner.__init__", "lineno": 94, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/js_ts_index.py", "functions": 9, "total_complexity": 82, "avg_complexity": 9.111, "max_complexity": 29, "p95_complexity": 29.0, "by_function": [{"name": "_strip_js_comments", "lineno": 82, "complexity": 29, "nested": false}, {"name": "scan", "lineno": 371, "complexity": 15, "nested": false}, {"name": "_framework_hints", "lineno": 269, "complexity": 12, "nested": false}, {"name": "_collect_named_from_list", "lineno": 244, "complexity": 7, "nested": false}, {"name": "analyze_file", "lineno": 294, "complexity": 7, "nested": false}, {"name": "_is_package", "lineno": 240, "complexity": 4, "nested": false}, {"name": "_read_text_limited", "lineno": 67, "complexity": 3, "nested": false}, {"name": "_line_stats", "lineno": 191, "complexity": 3, "nested": false}, {"name": "_avg", "lineno": 419, "complexity": 2, "nested": true}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/license_scan.py", "functions": 7, "total_complexity": 37, "avg_complexity": 5.286, "max_complexity": 10, "p95_complexity": 10.0, "by_function": [{"name": "scan", "lineno": 181, "complexity": 10, "nested": false}, {"name": "_scan_license_files", "lineno": 144, "complexity": 8, "nested": false}, {"name": "_scan_spdx_headers", "lineno": 105, "complexity": 5, "nested": false}, {"name": "_guess_id_from_text", "lineno": 133, "complexity": 5, "nested": false}, {"name": "_sha256_file", "lineno": 77, "complexity": 4, "nested": false}, {"name": "_read_text_limited", "lineno": 87, "complexity": 3, "nested": false}, {"name": "_is_text_like", "lineno": 96, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/owners_index.py", "functions": 7, "total_complexity": 54, "avg_complexity": 7.714, "max_complexity": 14, "p95_complexity": 14.0, "by_function": [{"name": "_find_codeowners_files", "lineno": 139, "complexity": 14, "nested": false}, {"name": "scan", "lineno": 246, "complexity": 11, "nested": false}, {"name": "_matches", "lineno": 190, "complexity": 10, "nested": false}, {"name": "_parse_codeowners_file", "lineno": 103, "complexity": 8, "nested": false}, {"name": "_strip_inline_comment", "lineno": 80, "complexity": 5, "nested": false}, {"name": "_summarize_unassigned", "lineno": 227, "complexity": 5, "nested": false}, {"name": "_norm_pattern", "lineno": 181, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/python_index.py", "functions": 15, "total_complexity": 58, "avg_complexity": 3.867, "max_complexity": 9, "p95_complexity": 9.0, "by_function": [{"name": "_expr_to_name", "lineno": 50, "complexity": 9, "nested": false}, {"name": "Visitor._visit_funclike", "lineno": 239, "complexity": 9, "nested": true}, {"name": "Visitor.visit_ImportFrom", "lineno": 163, "complexity": 8, "nested": true}, {"name": "index_python_file", "lineno": 80, "complexity": 5, "nested": false}, {"name": "_mod_name_from_rel", "lineno": 24, "complexity": 4, "nested": false}, {"name": "_qualify", "lineno": 43, "complexity": 4, "nested": false}, {"name": "Visitor.visit_ClassDef", "lineno": 196, "complexity": 4, "nested": true}, {"name": "_decorator_names", "lineno": 66, "complexity": 3, "nested": false}, {"name": "Visitor.visit_Import", "lineno": 135, "complexity": 3, "nested": true}, {"name": "Visitor.visit_Call", "lineno": 296, "complexity": 3, "nested": true}, {"name": "_read_text", "lineno": 16, "complexity": 2, "nested": false}, {"name": "_end_lineno", "lineno": 73, "complexity": 1, "nested": false}, {"name": "Visitor.generic_visit", "lineno": 131, "complexity": 1, "nested": true}, {"name": "Visitor.visit_FunctionDef", "lineno": 233, "complexity": 1, "nested": true}, {"name": "Visitor.visit_AsyncFunctionDef", "lineno": 236, "complexity": 1, "nested": true}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/secrets_scan.py", "functions": 10, "total_complexity": 46, "avg_complexity": 4.6, "max_complexity": 17, "p95_complexity": 17.0, "by_function": [{"name": "_gather_findings", "lineno": 198, "complexity": 17, "nested": false}, {"name": "scan", "lineno": 267, "complexity": 7, "nested": false}, {"name": "_scan_file", "lineno": 249, "complexity": 5, "nested": false}, {"name": "_is_probably_binary_bytes", "lineno": 80, "complexity": 4, "nested": false}, {"name": "_should_skip_file", "lineno": 91, "complexity": 3, "nested": false}, {"name": "_read_text_limited", "lineno": 103, "complexity": 3, "nested": false}, {"name": "_redact", "lineno": 119, "complexity": 3, "nested": false}, {"name": "_entropy_shannon", "lineno": 112, "complexity": 2, "nested": false}, {"name": "_line_col_from_offset", "lineno": 126, "complexity": 1, "nested": false}, {"name": "_line_has_ignore_marker", "lineno": 133, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/sql_index.py", "functions": 13, "total_complexity": 129, "avg_complexity": 9.923, "max_complexity": 37, "p95_complexity": 37.0, "by_function": [{"name": "_strip_sql_comments", "lineno": 88, "complexity": 37, "nested": false}, {"name": "_classify_stmt", "lineno": 345, "complexity": 22, "nested": false}, {"name": "_split_sql_statements", "lineno": 195, "complexity": 20, "nested": false}, {"name": "scan", "lineno": 564, "complexity": 11, "nested": false}, {"name": "_clean_ident", "lineno": 299, "complexity": 8, "nested": false}, {"name": "_collect_tables_from_stmt", "lineno": 312, "complexity": 8, "nested": false}, {"name": "_danger_flags", "lineno": 437, "complexity": 6, "nested": false}, {"name": "_dialect_hints", "lineno": 382, "complexity": 4, "nested": false}, {"name": "_functions_in_stmt", "lineno": 412, "complexity": 4, "nested": false}, {"name": "analyze_file", "lineno": 451, "complexity": 4, "nested": false}, {"name": "_read_text_limited", "lineno": 73, "complexity": 3, "nested": false}, {"name": "_params_in_stmt", "lineno": 392, "complexity": 1, "nested": false}, {"name": "_constraints_in_stmt", "lineno": 403, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/static_check.py", "functions": 13, "total_complexity": 37, "avg_complexity": 2.846, "max_complexity": 8, "p95_complexity": 8.0, "by_function": [{"name": "_scan_lines", "lineno": 77, "complexity": 8, "nested": false}, {"name": "_ASTVisitor.visit_Call", "lineno": 142, "complexity": 6, "nested": false}, {"name": "Issue.to_record", "lineno": 32, "complexity": 4, "nested": false}, {"name": "static_check_scan", "lineno": 206, "complexity": 4, "nested": false}, {"name": "_ASTVisitor.visit_FunctionDef", "lineno": 176, "complexity": 3, "nested": false}, {"name": "_rel_posix", "lineno": 60, "complexity": 2, "nested": false}, {"name": "_ASTVisitor.visit_ExceptHandler", "lineno": 122, "complexity": 2, "nested": false}, {"name": "_ASTVisitor.visit_ImportFrom", "lineno": 132, "complexity": 2, "nested": false}, {"name": "_scan_ast", "lineno": 192, "complexity": 2, "nested": false}, {"name": "_read_text", "lineno": 66, "complexity": 1, "nested": false}, {"name": "_ASTVisitor.__init__", "lineno": 118, "complexity": 1, "nested": false}, {"name": "_ASTVisitor.visit_Global", "lineno": 168, "complexity": 1, "nested": false}, {"name": "_ASTVisitor.visit_AsyncFunctionDef", "lineno": 188, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/superbundle_pack.py", "functions": 3, "total_complexity": 8, "avg_complexity": 2.667, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "SuperbundlePack.write_sha256sums", "lineno": 59, "complexity": 4, "nested": false}, {"name": "SuperbundlePack.write_artifacts_bundle", "lineno": 28, "complexity": 3, "nested": false}, {"name": "SuperbundlePack._ensure_parent", "lineno": 24, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/telemetry/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/code_bundles/telemetry/runtime_flow.py", "functions": 27, "total_complexity": 51, "avg_complexity": 1.889, "max_complexity": 5, "p95_complexity": 4.0, "by_function": [{"name": "_PhaseCtx.__exit__", "lineno": 210, "complexity": 5, "nested": false}, {"name": "sha256_file", "lineno": 42, "complexity": 4, "nested": false}, {"name": "canonical", "lineno": 58, "complexity": 4, "nested": true}, {"name": "detect_git", "lineno": 70, "complexity": 4, "nested": false}, {"name": "_PhaseCtx.outputs", "lineno": 190, "complexity": 4, "nested": false}, {"name": "FlowLogger.__init__", "lineno": 107, "complexity": 3, "nested": false}, {"name": "_to_jsonable", "lineno": 24, "complexity": 2, "nested": false}, {"name": "FlowLogger._write", "lineno": 121, "complexity": 2, "nested": false}, {"name": "FlowLogger.begin_run", "lineno": 133, "complexity": 2, "nested": false}, {"name": "FlowLogger.end_run", "lineno": 136, "complexity": 2, "nested": false}, {"name": "_PhaseCtx.__init__", "lineno": 176, "complexity": 2, "nested": false}, {"name": "_PhaseCtx.artifacts", "lineno": 200, "complexity": 2, "nested": false}, {"name": "_utc_iso", "lineno": 20, "complexity": 1, "nested": false}, {"name": "_json_dumps", "lineno": 30, "complexity": 1, "nested": false}, {"name": "_ensure_parent", "lineno": 34, "complexity": 1, "nested": false}, {"name": "_sha256_bytes", "lineno": 38, "complexity": 1, "nested": false}, {"name": "sha256_config_dict", "lineno": 53, "complexity": 1, "nested": false}, {"name": "run", "lineno": 76, "complexity": 1, "nested": true}, {"name": "FlowLogger._emit", "lineno": 129, "complexity": 1, "nested": false}, {"name": "FlowLogger.note", "lineno": 139, "complexity": 1, "nested": false}, {"name": "FlowLogger.artifact", "lineno": 142, "complexity": 1, "nested": false}, {"name": "FlowLogger.phase", "lineno": 146, "complexity": 1, "nested": false}, {"name": "FlowLogger.phase_decorator", "lineno": 158, "complexity": 1, "nested": false}, {"name": "FlowLogger.deco", "lineno": 159, "complexity": 1, "nested": true}, {"name": "FlowLogger.wrapper", "lineno": 160, "complexity": 1, "nested": true}, {"name": "FlowLogger.default", "lineno": 169, "complexity": 1, "nested": false}, {"name": "_PhaseCtx.__enter__", "lineno": 185, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/packers/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/packers/make_code_bundle.py", "functions": 2, "total_complexity": 9, "avg_complexity": 4.5, "max_complexity": 8, "p95_complexity": 8.0, "by_function": [{"name": "main", "lineno": 19, "complexity": 8, "nested": false}, {"name": "sha256_bytes", "lineno": 16, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/packers/unpack_code_bundle.py", "functions": 6, "total_complexity": 46, "avg_complexity": 7.667, "max_complexity": 21, "p95_complexity": 21.0, "by_function": [{"name": "unpack", "lineno": 63, "complexity": 21, "nested": false}, {"name": "iter_json_objects", "lineno": 32, "complexity": 13, "nested": false}, {"name": "ensure_relative_safe", "lineno": 15, "complexity": 5, "nested": false}, {"name": "detect_bundle_type", "lineno": 22, "complexity": 4, "nested": false}, {"name": "main", "lineno": 144, "complexity": 2, "nested": false}, {"name": "sha256_bytes", "lineno": 12, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_bundles/run_pack2.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_fixers/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/code_fixers/change_imports.py", "functions": 16, "total_complexity": 66, "avg_complexity": 4.125, "max_complexity": 17, "p95_complexity": 17.0, "by_function": [{"name": "ImportRefactor._refactor_file", "lineno": 136, "complexity": 17, "nested": false}, {"name": "ImportRefactor._rewrite_importfrom", "lineno": 212, "complexity": 15, "nested": false}, {"name": "ImportRefactor._rewrite_import", "lineno": 184, "complexity": 7, "nested": false}, {"name": "ImportRefactor._iter_files", "lineno": 123, "complexity": 5, "nested": false}, {"name": "ImportRefactor._map_qualname", "lineno": 269, "complexity": 5, "nested": false}, {"name": "ImportRefactor.run", "lineno": 110, "complexity": 4, "nested": false}, {"name": "ImportRefactor.__init__", "lineno": 75, "complexity": 3, "nested": false}, {"name": "ImportRefactor._line_offsets", "lineno": 284, "complexity": 2, "nested": false}, {"name": "Change.__str__", "lineno": 48, "complexity": 1, "nested": false}, {"name": "Report.add_change", "lineno": 58, "complexity": 1, "nested": false}, {"name": "Report.add_error", "lineno": 61, "complexity": 1, "nested": false}, {"name": "Report.add_skipped", "lineno": 64, "complexity": 1, "nested": false}, {"name": "Report.summary", "lineno": 67, "complexity": 1, "nested": false}, {"name": "ImportRefactor.is_excluded", "lineno": 128, "complexity": 1, "nested": true}, {"name": "ImportRefactor._abs_span", "lineno": 293, "complexity": 1, "nested": false}, {"name": "ImportRefactor._slice", "lineno": 299, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/db/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/db/init_sqlite_dev.py", "functions": 10, "total_complexity": 23, "avg_complexity": 2.3, "max_complexity": 11, "p95_complexity": 11.0, "by_function": [{"name": "init_database", "lineno": 88, "complexity": 11, "nested": false}, {"name": "_is_sqlite_url", "lineno": 27, "complexity": 2, "nested": false}, {"name": "_list_sql_files", "lineno": 41, "complexity": 2, "nested": false}, {"name": "_parse_primary_table_name", "lineno": 46, "complexity": 2, "nested": false}, {"name": "_sqlite_path_from_url", "lineno": 31, "complexity": 1, "nested": false}, {"name": "_ensure_parent", "lineno": 37, "complexity": 1, "nested": false}, {"name": "_strip_manual_tx", "lineno": 64, "complexity": 1, "nested": false}, {"name": "_db_exists", "lineno": 71, "complexity": 1, "nested": false}, {"name": "_table_exists", "lineno": 75, "complexity": 1, "nested": false}, {"name": "_apply_sql_file", "lineno": 82, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/db/load_sqlite_vector_plugin.py", "functions": 17, "total_complexity": 99, "avg_complexity": 5.824, "max_complexity": 19, "p95_complexity": 19.0, "by_function": [{"name": "install", "lineno": 229, "complexity": 19, "nested": false}, {"name": "_score_win_asset", "lineno": 70, "complexity": 17, "nested": false}, {"name": "_extract_dll_from_archive", "lineno": 89, "complexity": 14, "nested": false}, {"name": "_abs_repo", "lineno": 17, "complexity": 7, "nested": false}, {"name": "_download_extension", "lineno": 113, "complexity": 7, "nested": false}, {"name": "_connect_sqlite", "lineno": 173, "complexity": 5, "nested": false}, {"name": "_pick_win_asset", "lineno": 83, "complexity": 4, "nested": false}, {"name": "_get_sqlite3", "lineno": 146, "complexity": 4, "nested": false}, {"name": "_check_vec", "lineno": 190, "complexity": 4, "nested": false}, {"name": "_check_vss", "lineno": 202, "complexity": 4, "nested": false}, {"name": "_apply_migrations", "lineno": 215, "complexity": 4, "nested": false}, {"name": "_latest_assets", "lineno": 63, "complexity": 3, "nested": false}, {"name": "_pip_install", "lineno": 140, "complexity": 2, "nested": false}, {"name": "_pragma_modules", "lineno": 183, "complexity": 2, "nested": false}, {"name": "_ensure_dir", "lineno": 50, "complexity": 1, "nested": false}, {"name": "_http_json", "lineno": 53, "complexity": 1, "nested": false}, {"name": "_http_bytes", "lineno": 58, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/db/sqlite_viewer.py", "functions": 6, "total_complexity": 13, "avg_complexity": 2.167, "max_complexity": 3, "p95_complexity": 3.0, "by_function": [{"name": "SQLiteWebWrapperGUI.launch_sqlite_web", "lineno": 61, "complexity": 3, "nested": false}, {"name": "SQLiteWebWrapperGUI.__init__", "lineno": 10, "complexity": 2, "nested": false}, {"name": "SQLiteWebWrapperGUI.list_tables", "lineno": 20, "complexity": 2, "nested": false}, {"name": "SQLiteWebWrapperGUI.prompt_table_selection", "lineno": 33, "complexity": 2, "nested": false}, {"name": "SQLiteWebWrapperGUI.on_submit", "lineno": 37, "complexity": 2, "nested": true}, {"name": "SQLiteWebWrapperGUI.run", "lineno": 73, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/downloaders/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/downloaders/download_ai_models.py", "functions": 3, "total_complexity": 10, "avg_complexity": 3.333, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "main", "lineno": 183, "complexity": 4, "nested": false}, {"name": "ensure_dir_with_gitignore", "lineno": 150, "complexity": 3, "nested": false}, {"name": "download_file", "lineno": 162, "complexity": 3, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/io/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/io/file_ops.py", "functions": 4, "total_complexity": 9, "avg_complexity": 2.25, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "FileOps.write_text", "lineno": 18, "complexity": 4, "nested": false}, {"name": "FileOps.__init__", "lineno": 11, "complexity": 2, "nested": false}, {"name": "FileOps._norm", "lineno": 33, "complexity": 2, "nested": false}, {"name": "FileOps.read_text", "lineno": 14, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/io/output_writer.py", "functions": 4, "total_complexity": 7, "avg_complexity": 1.75, "max_complexity": 2, "p95_complexity": 2.0, "by_function": [{"name": "OutputWriter.__post_init__", "lineno": 11, "complexity": 2, "nested": false}, {"name": "OutputWriter.append_batch", "lineno": 24, "complexity": 2, "nested": false}, {"name": "OutputWriter.append_summary", "lineno": 30, "complexity": 2, "nested": false}, {"name": "OutputWriter.write_item", "lineno": 20, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/io/recursively_zip_directory.py", "functions": 1, "total_complexity": 3, "avg_complexity": 3.0, "max_complexity": 3, "p95_complexity": 3.0, "by_function": [{"name": "zip_directory", "lineno": 10, "complexity": 3, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/io/run_dir.py", "functions": 2, "total_complexity": 4, "avg_complexity": 2.0, "max_complexity": 2, "p95_complexity": 2.0, "by_function": [{"name": "RunDirs.make_run_id", "lineno": 14, "complexity": 2, "nested": false}, {"name": "RunDirs.ensure", "lineno": 18, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/logging/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/logging/logging.py", "functions": 6, "total_complexity": 8, "avg_complexity": 1.333, "max_complexity": 3, "p95_complexity": 3.0, "by_function": [{"name": "_one_line", "lineno": 3, "complexity": 3, "nested": false}, {"name": "ConsoleLog.__init__", "lineno": 8, "complexity": 1, "nested": false}, {"name": "ConsoleLog.info", "lineno": 11, "complexity": 1, "nested": false}, {"name": "ConsoleLog.warn", "lineno": 14, "complexity": 1, "nested": false}, {"name": "ConsoleLog.error", "lineno": 17, "complexity": 1, "nested": false}, {"name": "ConsoleLog.stage", "lineno": 20, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/scanners/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/scanners/code_indexer.py", "functions": 28, "total_complexity": 129, "avg_complexity": 4.607, "max_complexity": 25, "p95_complexity": 12.0, "by_function": [{"name": "index_sh_file", "lineno": 436, "complexity": 25, "nested": false}, {"name": "PyModuleVisitor._resolve_call_target", "lineno": 262, "complexity": 12, "nested": false}, {"name": "build_index", "lineno": 535, "complexity": 12, "nested": false}, {"name": "_canon_sql_name", "lineno": 307, "complexity": 8, "nested": false}, {"name": "index_sql_file", "lineno": 347, "complexity": 8, "nested": false}, {"name": "fmt_signature", "lineno": 73, "complexity": 7, "nested": false}, {"name": "scan_files", "lineno": 99, "complexity": 7, "nested": false}, {"name": "_tokenize_sh_commands", "lineno": 419, "complexity": 6, "nested": false}, {"name": "get_attr_name", "lineno": 60, "complexity": 5, "nested": false}, {"name": "PyModuleVisitor.visit_ImportFrom", "lineno": 182, "complexity": 4, "nested": false}, {"name": "write_chunks_single_file", "lineno": 614, "complexity": 4, "nested": false}, {"name": "sha256_file", "lineno": 43, "complexity": 3, "nested": false}, {"name": "PyModuleVisitor.visit_Import", "lineno": 176, "complexity": 3, "nested": false}, {"name": "PyModuleVisitor.visit_ClassDef", "lineno": 189, "complexity": 3, "nested": false}, {"name": "PyModuleVisitor._make_func", "lineno": 211, "complexity": 3, "nested": false}, {"name": "first_line", "lineno": 55, "complexity": 2, "nested": false}, {"name": "count_loc", "lineno": 92, "complexity": 2, "nested": false}, {"name": "PyModuleVisitor._handle_function_like", "lineno": 233, "complexity": 2, "nested": false}, {"name": "PyModuleVisitor.visit_Call", "lineno": 251, "complexity": 2, "nested": false}, {"name": "index_python_file", "lineno": 514, "complexity": 2, "nested": false}, {"name": "run", "lineno": 645, "complexity": 2, "nested": false}, {"name": "sha256_bytes", "lineno": 40, "complexity": 1, "nested": false}, {"name": "rel_module_name", "lineno": 50, "complexity": 1, "nested": false}, {"name": "PyModuleVisitor.__init__", "lineno": 164, "complexity": 1, "nested": false}, {"name": "PyModuleVisitor.visit_FunctionDef", "lineno": 227, "complexity": 1, "nested": false}, {"name": "PyModuleVisitor.visit_AsyncFunctionDef", "lineno": 230, "complexity": 1, "nested": false}, {"name": "PyModuleVisitor.Resolved.__init__", "lineno": 264, "complexity": 1, "nested": true}, {"name": "_strip_sql_comments", "lineno": 302, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/scanners/code_length.py", "functions": 1, "total_complexity": 1, "avg_complexity": 1.0, "max_complexity": 1, "p95_complexity": 1.0, "by_function": [{"name": "is_script_file", "lineno": 15, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/backend/core/utils/scanners/dir_crawler.py", "functions": 2, "total_complexity": 9, "avg_complexity": 4.5, "max_complexity": 5, "p95_complexity": 5.0, "by_function": [{"name": "crawl_directory", "lineno": 7, "complexity": 5, "nested": false}, {"name": "print_yaml_like", "lineno": 21, "complexity": 4, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/cli/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/cli/docstring.py", "functions": 7, "total_complexity": 25, "avg_complexity": 3.571, "max_complexity": 12, "p95_complexity": 12.0, "by_function": [{"name": "main", "lineno": 78, "complexity": 12, "nested": false}, {"name": "_artifact_problem_summary", "lineno": 59, "complexity": 5, "nested": false}, {"name": "_extract_result", "lineno": 68, "complexity": 4, "nested": false}, {"name": "_init_db_at_writer_path", "lineno": 22, "complexity": 1, "nested": false}, {"name": "_ensure_env_for_scanner", "lineno": 41, "complexity": 1, "nested": false}, {"name": "_sqlite_url_from_dbpath", "lineno": 45, "complexity": 1, "nested": false}, {"name": "_default_caps_path", "lineno": 54, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/models/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/models/agent_insights.py", "functions": 3, "total_complexity": 9, "avg_complexity": 3.0, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "AgentInsightIn._coerce_mdata", "lineno": 141, "complexity": 4, "nested": false}, {"name": "AgentInsight.mdata_obj", "lineno": 98, "complexity": 3, "nested": false}, {"name": "AgentInsight.mdata_obj", "lineno": 105, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/models/introspection_embeddings.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/models/introspection_index.py", "functions": 3, "total_complexity": 9, "avg_complexity": 3.0, "max_complexity": 4, "p95_complexity": 4.0, "by_function": [{"name": "IntrospectionIndexIn._coerce_mdata", "lineno": 140, "complexity": 4, "nested": false}, {"name": "IntrospectionIndex.mdata_obj", "lineno": 95, "complexity": 3, "nested": false}, {"name": "IntrospectionIndex.mdata_obj", "lineno": 102, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/models/introspection_index_OLD.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/patches/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/patches/core/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/patches/core/patch_ops.py", "functions": 4, "total_complexity": 8, "avg_complexity": 2.0, "max_complexity": 3, "p95_complexity": 3.0, "by_function": [{"name": "PatchOps.write_patch", "lineno": 57, "complexity": 3, "nested": false}, {"name": "PatchOps._patch_path", "lineno": 17, "complexity": 2, "nested": false}, {"name": "PatchOps._unified_diff", "lineno": 27, "complexity": 2, "nested": false}, {"name": "PatchOps.apply_to_sandbox", "lineno": 88, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/patches/core/rewrite.py", "functions": 10, "total_complexity": 53, "avg_complexity": 5.3, "max_complexity": 17, "p95_complexity": 17.0, "by_function": [{"name": "_find_orphan_module_string_span", "lineno": 117, "complexity": 17, "nested": false}, {"name": "apply_docstring_update", "lineno": 154, "complexity": 10, "nested": false}, {"name": "_find_existing_docstring_span", "lineno": 74, "complexity": 7, "nested": false}, {"name": "_insert_module_docstring", "lineno": 94, "complexity": 6, "nested": false}, {"name": "_render_docstring_block", "lineno": 38, "complexity": 5, "nested": false}, {"name": "_guess_body_indent", "lineno": 24, "complexity": 4, "nested": false}, {"name": "_split_lines", "lineno": 12, "complexity": 1, "nested": false}, {"name": "_indent_of", "lineno": 20, "complexity": 1, "nested": false}, {"name": "_replace_span", "lineno": 107, "complexity": 1, "nested": false}, {"name": "_insert_after_line", "lineno": 111, "complexity": 1, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/patches/executor/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity", "path": "v2/patches/executor/run_patch_loop.py", "functions": 8, "total_complexity": 85, "avg_complexity": 10.625, "max_complexity": 19, "p95_complexity": 19.0, "by_function": [{"name": "main", "lineno": 232, "complexity": 19, "nested": false}, {"name": "_extract_openai_key", "lineno": 60, "complexity": 14, "nested": false}, {"name": "_load_openai_api_key_from_loader", "lineno": 92, "complexity": 14, "nested": false}, {"name": "_load_openai_api_key_from_yaml", "lineno": 133, "complexity": 14, "nested": false}, {"name": "_build_ask_spec", "lineno": 199, "complexity": 9, "nested": false}, {"name": "_resolve_openai_api_key", "lineno": 177, "complexity": 7, "nested": false}, {"name": "_default_project_root", "lineno": 46, "complexity": 5, "nested": false}, {"name": "_find_repo_root", "lineno": 37, "complexity": 3, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/patches/executor/run_patch_loop_local.py", "functions": 15, "total_complexity": 103, "avg_complexity": 6.867, "max_complexity": 14, "p95_complexity": 14.0, "by_function": [{"name": "_extract_openai_key", "lineno": 59, "complexity": 14, "nested": false}, {"name": "_load_openai_api_key_from_loader", "lineno": 84, "complexity": 14, "nested": false}, {"name": "_load_openai_api_key_from_yaml", "lineno": 124, "complexity": 14, "nested": false}, {"name": "_build_ask_spec", "lineno": 184, "complexity": 9, "nested": false}, {"name": "PatchLoopLocalController.apply_patches", "lineno": 312, "complexity": 9, "nested": false}, {"name": "_resolve_openai_api_key", "lineno": 168, "complexity": 7, "nested": false}, {"name": "_detect_seed_dir", "lineno": 213, "complexity": 6, "nested": false}, {"name": "PatchLoopLocalController.run_engine", "lineno": 287, "complexity": 6, "nested": false}, {"name": "_default_project_root", "lineno": 46, "complexity": 5, "nested": false}, {"name": "PatchLoopLocalController.build_engine_payload", "lineno": 244, "complexity": 5, "nested": false}, {"name": "main", "lineno": 376, "complexity": 4, "nested": false}, {"name": "_find_repo_root", "lineno": 36, "complexity": 3, "nested": false}, {"name": "PatchLoopLocalController.gather_patches", "lineno": 306, "complexity": 3, "nested": false}, {"name": "PatchLoopLocalController.__init__", "lineno": 232, "complexity": 2, "nested": false}, {"name": "PatchLoopLocalController.run", "lineno": 359, "complexity": 2, "nested": false}]}
{"kind": "quality.complexity", "path": "v2/routes/__init__.py", "functions": 0, "total_complexity": 0, "avg_complexity": null, "max_complexity": null, "p95_complexity": null, "by_function": []}
{"kind": "quality.complexity.summary", "files": 203, "functions": 1089, "total_complexity": 5619, "avg_complexity": 5.16, "p95_function_complexity": 17.0, "max_function_complexity": 76, "heavy_files_top": [{"path": "v2/backend/core/utils/code_bundles/code_bundles/run_pack.py", "total_complexity": 304, "functions": 37}, {"path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/deps_scan.py", "total_complexity": 149, "functions": 16}, {"path": "v2/backend/core/prompt_pipeline/executor/engine.py", "total_complexity": 140, "functions": 9}, {"path": "v2/backend/core/introspect/read_docstrings.py", "total_complexity": 138, "functions": 25}, {"path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/sql_index.py", "total_complexity": 129, "functions": 13}, {"path": "v2/backend/core/utils/scanners/code_indexer.py", "total_complexity": 129, "functions": 28}, {"path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/emitters/registry.py", "total_complexity": 115, "functions": 17}, {"path": "v2/backend/core/patch_engine/providers.py", "total_complexity": 110, "functions": 9}, {"path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/env_index.py", "total_complexity": 108, "functions": 22}, {"path": "v2/backend/core/docstrings/providers.py", "total_complexity": 106, "functions": 14}, {"path": "v2/patches/executor/run_patch_loop_local.py", "total_complexity": 103, "functions": 15}, {"path": "v2/backend/core/utils/code_bundles/code_bundles/execute/github.py", "total_complexity": 101, "functions": 14}, {"path": "v2/backend/core/utils/code_bundles/code_bundles/orchestrate.py", "total_complexity": 101, "functions": 17}, {"path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/scanners/assets_index.py", "total_complexity": 100, "functions": 16}, {"path": "v2/backend/core/utils/db/load_sqlite_vector_plugin.py", "total_complexity": 99, "functions": 17}, {"path": "v2/backend/core/spine/bootstrap.py", "total_complexity": 88, "functions": 20}, {"path": "v2/backend/core/utils/code_bundles/code_bundles/execute/read_scanners.py", "total_complexity": 88, "functions": 13}, {"path": "v2/backend/core/run/docstrings.py", "total_complexity": 85, "functions": 19}, {"path": "v2/patches/executor/run_patch_loop.py", "total_complexity": 85, "functions": 8}, {"path": "v2/backend/core/spine/registry.py", "total_complexity": 84, "functions": 17}]}
{"kind": "codeowners.summary", "sources": [], "files": 310, "assigned": 0, "unassigned": 310, "owners": {}, "top_unassigned_dirs": [{"dir": "v2/backend", "count": 186}, {"dir": "scripts/sqlite_sql_schemas", "count": 45}, {"dir": "scripts/postgres_sql_schemas", "count": 43}, {"dir": "v2/patches", "count": 7}, {"dir": "v2/models", "count": 5}, {"dir": "config/spine", "count": 4}, {"dir": "v2/cli", "count": 2}, {"dir": "cold_start/__init__.py", "count": 1}, {"dir": "cold_start/bootstrap.sh", "count": 1}, {"dir": "cold_start/bootstrap_check.py", "count": 1}]}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/docstrings/sanitize.py", "vars": ["DOCSTRING_WIDTH"], "count": 1, "calls": {"getenv": 0, "environ_index": 0, "environ_get": 1}}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/docstrings/verify.py", "vars": ["DOCSTRING_VERIFY_POLICY", "DOCSTRING_WIDTH"], "count": 2, "calls": {"getenv": 0, "environ_index": 0, "environ_get": 2}}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/introspect/read_docstrings.py", "vars": ["LLAMA_LOG_LEVEL"], "count": 1, "calls": {"getenv": 0, "environ_index": 1, "environ_get": 0}}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/patch_engine/config.py", "vars": ["PE_DENYLIST_GLOBS", "PE_FORBID_REPO_RECURSION", "PE_SAFE_GUARD_SYMLINKS"], "count": 3, "calls": {"getenv": 0, "environ_index": 0, "environ_get": 3}}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/spine/providers/packager_pack_run.py", "vars": ["GITHUB_TOKEN"], "count": 1, "calls": {"getenv": 1, "environ_index": 0, "environ_get": 0}}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/utils/code_bundles/code_bundles/bundle_io.py", "vars": ["PACKAGER_DISABLE_LEGACY_SUMS"], "count": 1, "calls": {"getenv": 1, "environ_index": 0, "environ_get": 0}}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/io/manifest_writer.py", "vars": ["PACKAGER_DISABLE_LEGACY_SUMS"], "count": 1, "calls": {"getenv": 2, "environ_index": 0, "environ_get": 0}}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/utils/code_bundles/code_bundles/superbundle_pack.py", "vars": ["PACKAGER_DISABLE_LEGACY_SUMS"], "count": 1, "calls": {"getenv": 1, "environ_index": 0, "environ_get": 0}}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/utils/code_bundles/code_bundles/telemetry/runtime_flow.py", "vars": ["FLOW_ENABLED", "FLOW_LOG_PATH"], "count": 2, "calls": {"getenv": 2, "environ_index": 0, "environ_get": 0}}
{"kind": "env.usage", "language": "python", "path": "v2/backend/core/utils/db/load_sqlite_vector_plugin.py", "vars": ["REPO_ROOT", "SQLITE_DB_URL", "SQLITE_PLUGINS_DIR", "SQLITE_SCHEMAS_DIR"], "count": 4, "calls": {"getenv": 4, "environ_index": 0, "environ_get": 0}}
{"kind": "env.usage", "language": "python", "path": "v2/cli/docstring.py", "vars": ["DOCSTRING_ROOT", "LLM_MODEL", "LLM_PROVIDER", "OPENAI_API_KEY"], "count": 4, "calls": {"getenv": 3, "environ_index": 1, "environ_get": 0}}
{"kind": "env.usage", "language": "python", "path": "v2/patches/executor/run_patch_loop.py", "vars": ["INTROSPECTION_DB_URL", "INTROSPECTION_TABLE", "LLM_MODEL", "LLM_PROVIDER", "LLM_RESPONSE_FORMAT_NAME", "OPENAI_API_KEY", "SCAN_ROOT"], "count": 7, "calls": {"getenv": 8, "environ_index": 0, "environ_get": 0}}
{"kind": "env.usage", "language": "python", "path": "v2/patches/executor/run_patch_loop_local.py", "vars": ["INTROSPECTION_DB_URL", "INTROSPECTION_TABLE", "LLM_MODEL", "LLM_PROVIDER", "LLM_RESPONSE_FORMAT_NAME", "OPENAI_API_KEY", "SCAN_ROOT"], "count": 7, "calls": {"getenv": 8, "environ_index": 0, "environ_get": 0}}
{"kind": "env.summary", "files_scanned": 310, "sources": {"env_files": 0, "configs": 0, "python": 13, "javascript": 0}, "unique_vars": {"env_files": [], "configs": [], "python": ["DOCSTRING_ROOT", "DOCSTRING_VERIFY_POLICY", "DOCSTRING_WIDTH", "FLOW_ENABLED", "FLOW_LOG_PATH", "GITHUB_TOKEN", "INTROSPECTION_DB_URL", "INTROSPECTION_TABLE", "LLAMA_LOG_LEVEL", "LLM_MODEL", "LLM_PROVIDER", "LLM_RESPONSE_FORMAT_NAME", "OPENAI_API_KEY", "PACKAGER_DISABLE_LEGACY_SUMS", "PE_DENYLIST_GLOBS", "PE_FORBID_REPO_RECURSION", "PE_SAFE_GUARD_SYMLINKS", "REPO_ROOT", "SCAN_ROOT", "SQLITE_DB_URL", "SQLITE_PLUGINS_DIR", "SQLITE_SCHEMAS_DIR"], "javascript": [], "all": ["DOCSTRING_ROOT", "DOCSTRING_VERIFY_POLICY", "DOCSTRING_WIDTH", "FLOW_ENABLED", "FLOW_LOG_PATH", "GITHUB_TOKEN", "INTROSPECTION_DB_URL", "INTROSPECTION_TABLE", "LLAMA_LOG_LEVEL", "LLM_MODEL", "LLM_PROVIDER", "LLM_RESPONSE_FORMAT_NAME", "OPENAI_API_KEY", "PACKAGER_DISABLE_LEGACY_SUMS", "PE_DENYLIST_GLOBS", "PE_FORBID_REPO_RECURSION", "PE_SAFE_GUARD_SYMLINKS", "REPO_ROOT", "SCAN_ROOT", "SQLITE_DB_URL", "SQLITE_PLUGINS_DIR", "SQLITE_SCHEMAS_DIR"]}, "counts": {"env_files": 0, "configs": 0, "python": 22, "javascript": 0, "all": 22}}
{"kind": "entrypoint.shell", "path": "cold_start/bootstrap.sh", "interpreter": "/bin/bash"}
{"kind": "entrypoint.python", "path": "cold_start/bootstrap_check.py", "module": "cold_start.bootstrap_check", "has_main_fn": true}
{"kind": "entrypoint.python", "path": "cold_start/cleanup_locks.py", "module": "cold_start.cleanup_locks", "has_main_fn": false}
{"kind": "entrypoint.shell", "path": "cold_start/verify_services.sh", "interpreter": "/bin/bash"}
{"kind": "entrypoint.shell", "path": "scripts/sandbox_validate.sh", "interpreter": "/bin/bash"}
{"kind": "entrypoint.python", "path": "v2/backend/core/configuration/spine_paths.py", "module": "v2.backend.core.configuration.spine_paths", "has_main_fn": false}
{"kind": "entrypoint.python", "path": "v2/backend/core/patch_engine/interactive_run.py", "module": "v2.backend.core.patch_engine.interactive_run", "has_main_fn": false}
{"kind": "entrypoint.python", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "has_main_fn": true}
{"kind": "entrypoint.python", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "has_main_fn": false}
{"kind": "entrypoint.python", "path": "v2/backend/core/spine/validation.py", "module": "v2.backend.core.spine.validation", "has_main_fn": false}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/code_bundles/code_bundles/execute/executor.py", "module": "v2.backend.core.utils.code_bundles.code_bundles.execute.executor", "has_main_fn": true}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/code_bundles/code_bundles/run_pack.py", "module": "v2.backend.core.utils.code_bundles.code_bundles.run_pack", "has_main_fn": true}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/code_bundles/code_bundles/src/packager/analysis_emitter.py", "module": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.analysis_emitter", "has_main_fn": false}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/code_bundles/packers/make_code_bundle.py", "module": "v2.backend.core.utils.code_bundles.packers.make_code_bundle", "has_main_fn": true}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/code_bundles/packers/unpack_code_bundle.py", "module": "v2.backend.core.utils.code_bundles.packers.unpack_code_bundle", "has_main_fn": true}
{"kind": "entrypoint.shell", "path": "v2/backend/core/utils/code_bundles/packers/unpack_code_bundle.py", "interpreter": "/usr/bin/env"}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/code_fixers/change_imports.py", "module": "v2.backend.core.utils.code_fixers.change_imports", "has_main_fn": false}
{"kind": "entrypoint.shell", "path": "v2/backend/core/utils/code_fixers/change_imports.py", "interpreter": "/usr/bin/env"}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/db/init_sqlite_dev.py", "module": "v2.backend.core.utils.db.init_sqlite_dev", "has_main_fn": false}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/db/load_sqlite_vector_plugin.py", "module": "v2.backend.core.utils.db.load_sqlite_vector_plugin", "has_main_fn": false}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/db/sqlite_viewer.py", "module": "v2.backend.core.utils.db.sqlite_viewer", "has_main_fn": false}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/downloaders/download_ai_models.py", "module": "v2.backend.core.utils.downloaders.download_ai_models", "has_main_fn": true}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/io/recursively_zip_directory.py", "module": "v2.backend.core.utils.io.recursively_zip_directory", "has_main_fn": false}
{"kind": "entrypoint.shell", "path": "v2/backend/core/utils/io/recursively_zip_directory.py", "interpreter": "/usr/bin/env"}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/scanners/code_indexer.py", "module": "v2.backend.core.utils.scanners.code_indexer", "has_main_fn": false}
{"kind": "entrypoint.shell", "path": "v2/backend/core/utils/scanners/code_indexer.py", "interpreter": "/usr/bin/env"}
{"kind": "entrypoint.python", "path": "v2/backend/core/utils/scanners/dir_crawler.py", "module": "v2.backend.core.utils.scanners.dir_crawler", "has_main_fn": false}
{"kind": "entrypoint.python", "path": "v2/cli/docstring.py", "module": "v2.cli.docstring", "has_main_fn": true}
{"kind": "entrypoint.python", "path": "v2/patches/executor/run_patch_loop.py", "module": "v2.patches.executor.run_patch_loop", "has_main_fn": true}
{"kind": "entrypoint.python", "path": "v2/patches/executor/run_patch_loop_local.py", "module": "v2.patches.executor.run_patch_loop_local", "has_main_fn": true}
{"kind": "entrypoints.summary", "counts": {"entrypoint.shell": 7, "entrypoint.python": 23}, "examples": {"config": [], "python": ["cold_start/bootstrap_check.py", "cold_start/cleanup_locks.py", "v2/backend/core/configuration/spine_paths.py", "v2/backend/core/patch_engine/interactive_run.py", "v2/backend/core/run/docstrings.py", "v2/backend/core/spine/bootstrap.py", "v2/backend/core/spine/validation.py", "v2/backend/core/utils/code_bundles/code_bundles/execute/executor.py", "v2/backend/core/utils/code_bundles/code_bundles/run_pack.py", "v2/backend/core/utils/code_bundles/code_bundles/src/packager/analysis_emitter.py"], "shell": ["cold_start/bootstrap.sh", "cold_start/verify_services.sh", "scripts/sandbox_validate.sh", "v2/backend/core/utils/code_bundles/packers/unpack_code_bundle.py", "v2/backend/core/utils/code_fixers/change_imports.py", "v2/backend/core/utils/io/recursively_zip_directory.py", "v2/backend/core/utils/scanners/code_indexer.py"]}}
{"kind": "html.summary", "files": 0, "totals": {"h1": 0, "h2": 0, "h3": 0, "links": 0, "links_external": 0, "links_internal": 0, "scripts": 0, "scripts_inline": 0, "scripts_external": 0, "stylesheets": 0, "images": 0, "forms": 0}, "top": {"by_links": [], "by_scripts": [], "by_images": []}}
{"kind": "sql.index", "path": "scripts/postgres_sql_schemas/001_create_agent_self_review.sql", "size": 4151, "statements": 19, "kinds": {"other": 15, "create_table": 1, "create_index": 2, "insert": 1}, "tables": {"referenced": ["public.agent_self_review"], "created": ["public.agent_self_review"], "altered": [], "dropped": [], "views": [], "indexes_on": ["public.agent_self_review"]}, "constraints": {"foreign_keys": 0, "primary_keys": 2, "unique": 1, "checks": 1}, "functions": {"created": [], "procedures": [], "triggers": []}, "params": {"named": [], "positional": [], "qmark": 0}, "danger": {"drop_database": 0, "drop_table": 0, "truncate": 0, "delete_no_where": 0, "update_no_where": 0}, "dialect_hints": ["postgresql"]}
