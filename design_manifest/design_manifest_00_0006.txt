{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/scope.py", "module": "v2.backend.core.patch_engine.scope", "name": "v2.backend.core.patch_engine.scope.v2.backend.core.patch_engine.scope.Scope.is_within_scope", "loc": 13, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/scope.py", "module": "v2.backend.core.patch_engine.scope", "name": "v2.backend.core.patch_engine.scope.v2.backend.core.patch_engine.scope.Scope.validate_touched_files", "loc": 10, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/scope.py", "module": "v2.backend.core.patch_engine.scope", "name": "v2.backend.core.patch_engine.scope.v2.backend.core.patch_engine.scope.Scope.parse_patch_paths", "loc": 23, "arg_count": 1, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "classes": [], "functions": ["v2.backend.core.patch_engine.test_engine_smoke._write", "v2.backend.core.patch_engine.test_engine_smoke._make_repo", "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote"], "imports": ["difflib", "pathlib", "tempfile", "textwrap", "v2.backend.core.patch_engine.applier", "v2.backend.core.patch_engine.config", "v2.backend.core.patch_engine.run_manifest", "v2.backend.core.patch_engine.scope", "v2.backend.core.patch_engine.workspace"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "v2.backend.core.patch_engine.test_engine_smoke._write", "decorators": [], "lineno": 22, "end_lineno": 24}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "v2.backend.core.patch_engine.test_engine_smoke._make_repo", "decorators": [], "lineno": 27, "end_lineno": 37}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "decorators": [], "lineno": 40, "end_lineno": 61}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "decorators": [], "lineno": 64, "end_lineno": 136}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "from_module": "pathlib", "name": "Path", "asname": null, "level": 0, "lineno": 11, "end_lineno": 11}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "tempfile", "asname": null, "lineno": 12, "end_lineno": 12}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "textwrap", "asname": null, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "from_module": "v2.backend.core.patch_engine.config", "name": "PatchEngineConfig", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "from_module": "v2.backend.core.patch_engine.scope", "name": "Scope", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "from_module": "v2.backend.core.patch_engine.workspace", "name": "WorkspaceManager", "asname": null, "level": 0, "lineno": 17, "end_lineno": 17}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "from_module": "v2.backend.core.patch_engine.workspace", "name": "sha256_dir", "asname": null, "level": 0, "lineno": 17, "end_lineno": 17}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "from_module": "v2.backend.core.patch_engine.applier", "name": "PatchApplier", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "from_module": "v2.backend.core.patch_engine.run_manifest", "name": "RunManifest", "asname": null, "level": 0, "lineno": 19, "end_lineno": 19}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "from_module": "v2.backend.core.patch_engine.run_manifest", "name": "new_run_id", "asname": null, "level": 0, "lineno": 19, "end_lineno": 19}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "difflib", "asname": null, "lineno": 45, "end_lineno": 45}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._write", "callee": "p.parent.mkdir", "lineno": 23, "end_lineno": 23}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._write", "callee": "p.write_text", "lineno": 24, "end_lineno": 24}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_repo", "callee": "_write", "lineno": 28, "end_lineno": 28}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_repo", "callee": "_write", "lineno": 29, "end_lineno": 37}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_repo", "callee": "textwrap.dedent.lstrip", "lineno": 31, "end_lineno": 36}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_repo", "callee": "textwrap.dedent", "lineno": 31, "end_lineno": 36}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "callee": "BinOp.read_text.splitlines", "lineno": 47, "end_lineno": 47}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "callee": "BinOp.read_text", "lineno": 47, "end_lineno": 47}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "callee": "BinOp.read_text.splitlines", "lineno": 48, "end_lineno": 48}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "callee": "BinOp.read_text", "lineno": 48, "end_lineno": 48}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "callee": "difflib.unified_diff", "lineno": 50, "end_lineno": 57}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "callee": "Constant.join", "lineno": 58, "end_lineno": 58}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "callee": "patch_file.write_text", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "_make_repo", "lineno": 67, "end_lineno": 67}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "_make_repo", "lineno": 71, "end_lineno": 71}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "_write", "lineno": 72, "end_lineno": 80}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "textwrap.dedent.lstrip", "lineno": 74, "end_lineno": 79}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "textwrap.dedent", "lineno": 74, "end_lineno": 79}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "_make_patch", "lineno": 83, "end_lineno": 83}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "PatchEngineConfig", "lineno": 86, "end_lineno": 93}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "cfg.ensure_dirs", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "WorkspaceManager", "lineno": 97, "end_lineno": 97}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "ws.ensure_mirror_seeded", "lineno": 98, "end_lineno": 98}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "Scope", "lineno": 101, "end_lineno": 101}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "Scope.parse_patch_paths", "lineno": 102, "end_lineno": 102}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "patch_file.read_text", "lineno": 102, "end_lineno": 102}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "scope.validate_touched_files", "lineno": 103, "end_lineno": 103}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "new_run_id", "lineno": 107, "end_lineno": 107}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "patch_file.read_bytes", "lineno": 107, "end_lineno": 107}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "ws.make_run_dirs", "lineno": 108, "end_lineno": 108}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "ws.clone_to_workspace", "lineno": 109, "end_lineno": 109}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "ws.snapshot_mirror", "lineno": 112, "end_lineno": 112}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "snap_dir.exists", "lineno": 113, "end_lineno": 113}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "PatchApplier", "lineno": 116, "end_lineno": 116}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "ap.apply_unified_diff", "lineno": 117, "end_lineno": 117}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "sha256_dir", "lineno": 123, "end_lineno": 123}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "ws.promote", "lineno": 124, "end_lineno": 124}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "sha256_dir", "lineno": 125, "end_lineno": 125}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "BinOp.read_text", "lineno": 129, "end_lineno": 129}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "RunManifest", "lineno": 133, "end_lineno": 133}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "manifest.update", "lineno": 134, "end_lineno": 134}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "caller_name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "callee": "RunManifest.read", "lineno": 135, "end_lineno": 135}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "owner": "v2.backend.core.patch_engine.test_engine_smoke", "owner_kind": "module", "doc": "\nStatic tests for the patch engine (no Git required).\nThese tests simulate a tiny codebase, generate a unified diff, and\nexercise scope, apply, and promotion.\n\nRun:\n    pytest -q tests/patch_engine/test_engine_smoke.py\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "owner": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "owner_kind": "function", "doc": "\n    Create a unified diff patch for 'pkg/mathx.py' changing add() to add with docstring.\n    Uses difflib (pure Python).\n    ", "lineno": 40, "end_lineno": 61}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "v2.backend.core.patch_engine.test_engine_smoke._write", "loc": 3, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "v2.backend.core.patch_engine.test_engine_smoke._make_repo", "loc": 11, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "v2.backend.core.patch_engine.test_engine_smoke._make_patch", "loc": 22, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/test_engine_smoke.py", "module": "v2.backend.core.patch_engine.test_engine_smoke", "name": "v2.backend.core.patch_engine.test_engine_smoke.test_end_to_end_apply_and_promote", "loc": 73, "arg_count": 1, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "classes": [], "functions": ["v2.backend.core.patch_engine.textops.read_text_preserve", "v2.backend.core.patch_engine.textops.write_text_preserve", "v2.backend.core.patch_engine.textops.split_lines_keepends", "v2.backend.core.patch_engine.textops.join_lines", "v2.backend.core.patch_engine.textops.indent_of", "v2.backend.core.patch_engine.textops.detect_eol", "v2.backend.core.patch_engine.textops.coerce_eol", "v2.backend.core.patch_engine.textops.replace_span", "v2.backend.core.patch_engine.textops.insert_after_line", "v2.backend.core.patch_engine.textops.after_shebang_and_encoding", "v2.backend.core.patch_engine.textops.after_import_block"], "imports": ["__future__", "pathlib", "re", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.read_text_preserve", "decorators": [], "lineno": 12, "end_lineno": 17}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.write_text_preserve", "decorators": [], "lineno": 20, "end_lineno": 26}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.split_lines_keepends", "decorators": [], "lineno": 29, "end_lineno": 30}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.join_lines", "decorators": [], "lineno": 33, "end_lineno": 34}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.indent_of", "decorators": [], "lineno": 37, "end_lineno": 38}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.detect_eol", "decorators": [], "lineno": 41, "end_lineno": 49}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.coerce_eol", "decorators": [], "lineno": 52, "end_lineno": 53}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.replace_span", "decorators": [], "lineno": 56, "end_lineno": 60}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.insert_after_line", "decorators": [], "lineno": 63, "end_lineno": 68}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.after_shebang_and_encoding", "decorators": [], "lineno": 71, "end_lineno": 83}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.after_import_block", "decorators": [], "lineno": 86, "end_lineno": 110}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 1, "end_lineno": 1}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "from_module": "pathlib", "name": "Path", "asname": null, "level": 0, "lineno": 3, "end_lineno": 3}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 4, "end_lineno": 4}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "from_module": "typing", "name": "Tuple", "asname": null, "level": 0, "lineno": 4, "end_lineno": 4}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "re", "asname": null, "lineno": 5, "end_lineno": 5}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops", "callee": "re.compile", "lineno": 8, "end_lineno": 8}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops", "callee": "re.compile", "lineno": 9, "end_lineno": 9}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.read_text_preserve", "callee": "path.open", "lineno": 16, "end_lineno": 16}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.read_text_preserve", "callee": "f.read", "lineno": 17, "end_lineno": 17}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.write_text_preserve", "callee": "path.parent.mkdir", "lineno": 24, "end_lineno": 24}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.write_text_preserve", "callee": "path.open", "lineno": 25, "end_lineno": 25}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.write_text_preserve", "callee": "f.write", "lineno": 26, "end_lineno": 26}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.split_lines_keepends", "callee": "text.splitlines", "lineno": 30, "end_lineno": 30}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.join_lines", "callee": "Constant.join", "lineno": 34, "end_lineno": 34}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.indent_of", "callee": "len", "lineno": 38, "end_lineno": 38}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.indent_of", "callee": "len", "lineno": 38, "end_lineno": 38}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.indent_of", "callee": "line.lstrip", "lineno": 38, "end_lineno": 38}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.detect_eol", "callee": "ln.endswith", "lineno": 43, "end_lineno": 43}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.detect_eol", "callee": "ln.endswith", "lineno": 45, "end_lineno": 45}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.detect_eol", "callee": "ln.endswith", "lineno": 47, "end_lineno": 47}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.coerce_eol", "callee": "ln.replace.replace.replace", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.coerce_eol", "callee": "ln.replace.replace", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.coerce_eol", "callee": "ln.replace", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.insert_after_line", "callee": "min", "lineno": 67, "end_lineno": 67}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.insert_after_line", "callee": "max", "lineno": 67, "end_lineno": 67}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.insert_after_line", "callee": "len", "lineno": 67, "end_lineno": 67}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_shebang_and_encoding", "callee": "len", "lineno": 79, "end_lineno": 79}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_shebang_and_encoding", "callee": "lines.startswith", "lineno": 79, "end_lineno": 79}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_shebang_and_encoding", "callee": "len", "lineno": 81, "end_lineno": 81}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_shebang_and_encoding", "callee": "_ENCODING_RX.match", "lineno": 81, "end_lineno": 81}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "after_shebang_and_encoding", "lineno": 91, "end_lineno": 91}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "len", "lineno": 94, "end_lineno": 94}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "s.strip", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "s.lstrip.startswith", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "s.lstrip", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "_IMPORT_RX.match", "lineno": 99, "end_lineno": 99}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "len", "lineno": 102, "end_lineno": 102}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "t.strip", "lineno": 104, "end_lineno": 104}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "t.lstrip.startswith", "lineno": 104, "end_lineno": 104}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "t.lstrip", "lineno": 104, "end_lineno": 104}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "caller_name": "v2.backend.core.patch_engine.textops.after_import_block", "callee": "_IMPORT_RX.match", "lineno": 104, "end_lineno": 104}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "owner": "v2.backend.core.patch_engine.textops.read_text_preserve", "owner_kind": "function", "doc": "\n    Read text preserving original newlines (no implicit translation).\n    ", "lineno": 12, "end_lineno": 17}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "owner": "v2.backend.core.patch_engine.textops.write_text_preserve", "owner_kind": "function", "doc": "\n    Write text avoiding platform newline translation.\n    ", "lineno": 20, "end_lineno": 26}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "owner": "v2.backend.core.patch_engine.textops.replace_span", "owner_kind": "function", "doc": "\n    Replace an inclusive [start_idx, end_idx] with new_block.\n    ", "lineno": 56, "end_lineno": 60}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "owner": "v2.backend.core.patch_engine.textops.insert_after_line", "owner_kind": "function", "doc": "\n    Insert new_block after the 0-based line index.\n    ", "lineno": 63, "end_lineno": 68}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "owner": "v2.backend.core.patch_engine.textops.after_shebang_and_encoding", "owner_kind": "function", "doc": "\n    Return a 0-based index where it's safe to insert a top-of-file block,\n    after shebang and encoding comment (if present). This index represents\n    the position *before* which lines are left intact. Use insert_after_line(idx-1)\n    or splice at idx directly.\n    ", "lineno": 71, "end_lineno": 83}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "owner": "v2.backend.core.patch_engine.textops.after_import_block", "owner_kind": "function", "doc": "\n    Return the index *after* the initial import block (skipping blank/comment lines).\n    If no import block is found near the top, fall back to after shebang+encoding.\n    ", "lineno": 86, "end_lineno": 110}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.read_text_preserve", "loc": 6, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.write_text_preserve", "loc": 7, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.split_lines_keepends", "loc": 2, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.join_lines", "loc": 2, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.indent_of", "loc": 2, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.detect_eol", "loc": 9, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.coerce_eol", "loc": 2, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.replace_span", "loc": 5, "arg_count": 4, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.insert_after_line", "loc": 6, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.after_shebang_and_encoding", "loc": 13, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/textops.py", "module": "v2.backend.core.patch_engine.textops", "name": "v2.backend.core.patch_engine.textops.after_import_block", "loc": 25, "arg_count": 1, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "classes": ["v2.backend.core.patch_engine.workspace.WorkspaceManager"], "functions": ["v2.backend.core.patch_engine.workspace.now_ts", "v2.backend.core.patch_engine.workspace.sha256_dir", "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.make_run_dirs", "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.clone_to_workspace", "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.snapshot_mirror", "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.mirror_digest", "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager._gc_old_snapshots"], "imports": ["__future__", "dataclasses", "hashlib", "os", "pathlib", "shutil", "time"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.now_ts", "decorators": [], "lineno": 11, "end_lineno": 12}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.sha256_dir", "decorators": [], "lineno": 15, "end_lineno": 30}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.WorkspaceManager", "bases": [], "decorators": ["dataclass"], "lineno": 34, "end_lineno": 124}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "decorators": [], "lineno": 40, "end_lineno": 51}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.make_run_dirs", "decorators": [], "lineno": 53, "end_lineno": 67}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.clone_to_workspace", "decorators": [], "lineno": 69, "end_lineno": 72}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.snapshot_mirror", "decorators": [], "lineno": 74, "end_lineno": 82}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "decorators": [], "lineno": 84, "end_lineno": 101}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "decorators": [], "lineno": 103, "end_lineno": 114}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.mirror_digest", "decorators": [], "lineno": 116, "end_lineno": 117}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager._gc_old_snapshots", "decorators": [], "lineno": 119, "end_lineno": 124}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 2, "end_lineno": 2}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "from_module": "dataclasses", "name": "dataclass", "asname": null, "level": 0, "lineno": 3, "end_lineno": 3}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "from_module": "pathlib", "name": "Path", "asname": null, "level": 0, "lineno": 4, "end_lineno": 4}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "os", "asname": null, "lineno": 5, "end_lineno": 5}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "shutil", "asname": null, "lineno": 6, "end_lineno": 6}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "hashlib", "asname": null, "lineno": 7, "end_lineno": 7}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "time", "asname": null, "lineno": 8, "end_lineno": 8}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.now_ts", "callee": "time.strftime", "lineno": 12, "end_lineno": 12}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.now_ts", "callee": "time.gmtime", "lineno": 12, "end_lineno": 12}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "hashlib.sha256", "lineno": 16, "end_lineno": 16}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "root.resolve", "lineno": 17, "end_lineno": 17}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "os.walk", "lineno": 18, "end_lineno": 18}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "sorted", "lineno": 19, "end_lineno": 19}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "Path", "lineno": 20, "end_lineno": 20}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "fp.relative_to.as_posix", "lineno": 21, "end_lineno": 21}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "fp.relative_to", "lineno": 21, "end_lineno": 21}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "sha.update", "lineno": 22, "end_lineno": 22}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "rel.encode", "lineno": 22, "end_lineno": 22}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "open", "lineno": 24, "end_lineno": 24}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "iter", "lineno": 25, "end_lineno": 25}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "f.read", "lineno": 25, "end_lineno": 25}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "sha.update", "lineno": 26, "end_lineno": 26}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.sha256_dir", "callee": "sha.hexdigest", "lineno": 30, "end_lineno": 30}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "callee": "self.mirror_current.parent.mkdir", "lineno": 44, "end_lineno": 44}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "callee": "self.mirror_current.exists", "lineno": 45, "end_lineno": 45}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "callee": "any", "lineno": 45, "end_lineno": 45}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "callee": "self.mirror_current.rglob", "lineno": 45, "end_lineno": 45}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "callee": "RuntimeError", "lineno": 48, "end_lineno": 50}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "callee": "shutil.copytree", "lineno": 51, "end_lineno": 51}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.make_run_dirs", "callee": "dirs.values", "lineno": 65, "end_lineno": 65}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.make_run_dirs", "callee": "p.mkdir", "lineno": 66, "end_lineno": 66}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.clone_to_workspace", "callee": "workspace_dir.exists", "lineno": 70, "end_lineno": 70}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.clone_to_workspace", "callee": "shutil.rmtree", "lineno": 71, "end_lineno": 71}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.clone_to_workspace", "callee": "shutil.copytree", "lineno": 72, "end_lineno": 72}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.snapshot_mirror", "callee": "now_ts", "lineno": 75, "end_lineno": 75}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.snapshot_mirror", "callee": "dest.parent.mkdir", "lineno": 77, "end_lineno": 77}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.snapshot_mirror", "callee": "dest.exists", "lineno": 78, "end_lineno": 78}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.snapshot_mirror", "callee": "shutil.rmtree", "lineno": 79, "end_lineno": 79}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.snapshot_mirror", "callee": "shutil.copytree", "lineno": 80, "end_lineno": 80}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.snapshot_mirror", "callee": "self._gc_old_snapshots", "lineno": 81, "end_lineno": 81}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "staging.exists", "lineno": 90, "end_lineno": 90}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "shutil.rmtree", "lineno": 91, "end_lineno": 91}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "shutil.copytree", "lineno": 92, "end_lineno": 92}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "tmp_old.exists", "lineno": 95, "end_lineno": 95}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "shutil.rmtree", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "self.mirror_current.exists", "lineno": 97, "end_lineno": 97}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "self.mirror_current.rename", "lineno": 98, "end_lineno": 98}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "staging.rename", "lineno": 99, "end_lineno": 99}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "tmp_old.exists", "lineno": 100, "end_lineno": 100}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "callee": "shutil.rmtree", "lineno": 101, "end_lineno": 101}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "callee": "self.archives_root.mkdir", "lineno": 107, "end_lineno": 107}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "callee": "archive_path.with_suffix", "lineno": 110, "end_lineno": 110}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "callee": "base_no_ext.exists", "lineno": 111, "end_lineno": 111}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "callee": "base_no_ext.unlink", "lineno": 112, "end_lineno": 112}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "callee": "shutil.make_archive", "lineno": 113, "end_lineno": 113}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "callee": "str", "lineno": 113, "end_lineno": 113}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.mirror_digest", "callee": "sha256_dir", "lineno": 117, "end_lineno": 117}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager._gc_old_snapshots", "callee": "sorted", "lineno": 120, "end_lineno": 120}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager._gc_old_snapshots", "callee": "self.snapshots_root.iterdir", "lineno": 120, "end_lineno": 120}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager._gc_old_snapshots", "callee": "p.is_dir", "lineno": 120, "end_lineno": 120}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager._gc_old_snapshots", "callee": "len", "lineno": 121, "end_lineno": 121}
{"record_type": "ast.call", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "caller_name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager._gc_old_snapshots", "callee": "shutil.rmtree", "lineno": 124, "end_lineno": 124}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "owner": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "owner_kind": "function", "doc": "\n        If mirror is empty and a seed_dir is provided, copy seed_dir  mirror.\n        ", "lineno": 40, "end_lineno": 51}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "owner": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "owner_kind": "function", "doc": "\n        Replace mirror_current with the content of 'from_workspace' atomically.\n        ", "lineno": 84, "end_lineno": 101}
{"record_type": "ast.docstring", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "owner": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "owner_kind": "function", "doc": "\n        Create a zip archive of snapshot_dir in archives_root with base name 'name'.\n        ", "lineno": 103, "end_lineno": 114}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.now_ts", "loc": 2, "arg_count": 0, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.sha256_dir", "loc": 16, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.ensure_mirror_seeded", "loc": 12, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.make_run_dirs", "loc": 15, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.clone_to_workspace", "loc": 4, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.snapshot_mirror", "loc": 9, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.promote", "loc": 18, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.archive_snapshot", "loc": 12, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager.mirror_digest", "loc": 2, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/patch_engine/workspace.py", "module": "v2.backend.core.patch_engine.workspace", "name": "v2.backend.core.patch_engine.workspace.v2.backend.core.patch_engine.workspace.WorkspaceManager._gc_old_snapshots", "loc": 6, "arg_count": 1, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/__init__.py", "module": "v2.backend.core.prompt_pipeline", "classes": [], "functions": [], "imports": []}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/__init__.py", "module": "v2.backend.core.prompt_pipeline", "owner": "v2.backend.core.prompt_pipeline", "owner_kind": "module", "doc": "Core primitives: errors, types, budget, logs.", "lineno": 1, "end_lineno": 1}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/__init__.py", "module": "v2.backend.core.prompt_pipeline.executor", "classes": [], "functions": [], "imports": ["__future__", "orchestrator", "providers"]}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/__init__.py", "module": "v2.backend.core.prompt_pipeline.executor", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/__init__.py", "module": "v2.backend.core.prompt_pipeline.executor", "from_module": "orchestrator", "name": "capability_run", "asname": null, "level": 1, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/__init__.py", "module": "v2.backend.core.prompt_pipeline.executor", "from_module": "providers", "name": "enrich_v1", "asname": null, "level": 1, "lineno": 21, "end_lineno": 21}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/__init__.py", "module": "v2.backend.core.prompt_pipeline.executor", "from_module": "providers", "name": "unpack_results_v1", "asname": null, "level": 1, "lineno": 21, "end_lineno": 21}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/__init__.py", "module": "v2.backend.core.prompt_pipeline.executor", "owner": "v2.backend.core.prompt_pipeline.executor", "owner_kind": "module", "doc": "\nExecutor package exports.\n\nWe re-export the orchestrator entry point and selected provider helpers so\ncallers can do:\n\n    from v2.backend.core.prompt_pipeline.executor import capability_run, enrich_v1, unpack_results_v1\n\nwithout coupling to submodules.\n\nNote:\n- Do NOT import any legacy get_capability_map here; Spine owns capability resolution.\n", "lineno": 1, "end_lineno": 1}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "classes": ["v2.backend.core.prompt_pipeline.executor.engine.Norm"], "functions": ["v2.backend.core.prompt_pipeline.executor.engine._ensure_dir", "v2.backend.core.prompt_pipeline.executor.engine._write_json", "v2.backend.core.prompt_pipeline.executor.engine._now_token", "v2.backend.core.prompt_pipeline.executor.engine._normalize", "v2.backend.core.prompt_pipeline.executor.engine._get_records", "v2.backend.core.prompt_pipeline.executor.engine._messages_from_build", "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "v2.backend.core.prompt_pipeline.executor.engine.run_v1"], "imports": ["__future__", "dataclasses", "datetime", "json", "orchestrator", "pathlib", "typing", "v2.backend.core.prompt_pipeline.llm.response_parser"]}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine.Norm", "bases": [], "decorators": ["dataclass"], "lineno": 35, "end_lineno": 39}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._ensure_dir", "decorators": [], "lineno": 42, "end_lineno": 43}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._write_json", "decorators": [], "lineno": 46, "end_lineno": 52}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._now_token", "decorators": [], "lineno": 55, "end_lineno": 56}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "decorators": [], "lineno": 59, "end_lineno": 64}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "decorators": [], "lineno": 67, "end_lineno": 118}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._messages_from_build", "decorators": [], "lineno": 121, "end_lineno": 137}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "decorators": [], "lineno": 140, "end_lineno": 165}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "decorators": [], "lineno": 168, "end_lineno": 199}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "decorators": [], "lineno": 204, "end_lineno": 442}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 17, "end_lineno": 17}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "json", "asname": null, "lineno": 19, "end_lineno": 19}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "dataclasses", "name": "dataclass", "asname": null, "level": 0, "lineno": 20, "end_lineno": 20}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "datetime", "name": "datetime", "asname": null, "level": 0, "lineno": 21, "end_lineno": 21}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "pathlib", "name": "Path", "asname": null, "level": 0, "lineno": 22, "end_lineno": 22}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 23, "end_lineno": 23}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 23, "end_lineno": 23}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 23, "end_lineno": 23}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 23, "end_lineno": 23}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "typing", "name": "Tuple", "asname": null, "level": 0, "lineno": 23, "end_lineno": 23}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "orchestrator", "name": "capability_run", "asname": null, "level": 1, "lineno": 27, "end_lineno": 27}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "from_module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "parse_json_response", "asname": null, "level": 0, "lineno": 145, "end_lineno": 145}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "json", "asname": "_json", "lineno": 158, "end_lineno": 158}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine", "callee": "RuntimeError", "lineno": 29, "end_lineno": 29}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._ensure_dir", "callee": "p.mkdir", "lineno": 43, "end_lineno": 43}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._write_json", "callee": "_ensure_dir", "lineno": 48, "end_lineno": 48}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._write_json", "callee": "p.write_text", "lineno": 49, "end_lineno": 49}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._write_json", "callee": "json.dumps", "lineno": 49, "end_lineno": 49}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._now_token", "callee": "datetime.now.strftime", "lineno": 56, "end_lineno": 56}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._now_token", "callee": "datetime.now", "lineno": 56, "end_lineno": 56}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "str", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "Path.resolve", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "Path", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "payload.get", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "payload.get", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "str", "lineno": 61, "end_lineno": 61}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "Path.resolve", "lineno": 61, "end_lineno": 61}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "Path", "lineno": 61, "end_lineno": 61}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "payload.get", "lineno": 61, "end_lineno": 61}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "payload.get", "lineno": 62, "end_lineno": 62}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "payload.get", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "str", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "Path", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "callee": "Norm", "lineno": 64, "end_lineno": 64}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 79, "end_lineno": 79}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "meta.get", "lineno": 83, "end_lineno": 83}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 84, "end_lineno": 84}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 85, "end_lineno": 85}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "meta.get", "lineno": 87, "end_lineno": 87}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 88, "end_lineno": 88}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 89, "end_lineno": 89}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "meta.get", "lineno": 92, "end_lineno": 92}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 95, "end_lineno": 95}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "res.get", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 97, "end_lineno": 97}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 98, "end_lineno": 98}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "res.get", "lineno": 99, "end_lineno": 99}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 100, "end_lineno": 100}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 101, "end_lineno": 101}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "getattr", "lineno": 105, "end_lineno": 105}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 106, "end_lineno": 106}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "res_meta.get", "lineno": 107, "end_lineno": 107}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 108, "end_lineno": 108}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 109, "end_lineno": 109}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "res_meta.get", "lineno": 110, "end_lineno": 110}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 111, "end_lineno": 111}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "callee": "isinstance", "lineno": 112, "end_lineno": 112}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._messages_from_build", "callee": "res.get", "lineno": 128, "end_lineno": 128}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._messages_from_build", "callee": "isinstance", "lineno": 129, "end_lineno": 129}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._messages_from_build", "callee": "isinstance", "lineno": 132, "end_lineno": 132}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._messages_from_build", "callee": "msgs.get", "lineno": 133, "end_lineno": 133}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._messages_from_build", "callee": "msgs.get", "lineno": 134, "end_lineno": 134}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "parse_json_response", "lineno": 151, "end_lineno": 151}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "obj.get", "lineno": 152, "end_lineno": 152}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "obj.get", "lineno": 152, "end_lineno": 152}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "isinstance", "lineno": 153, "end_lineno": 153}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "_json.loads", "lineno": 159, "end_lineno": 159}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "obj.get", "lineno": 160, "end_lineno": 160}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "obj.get", "lineno": 160, "end_lineno": 160}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "isinstance", "lineno": 161, "end_lineno": 161}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "rows.get", "lineno": 162, "end_lineno": 162}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "rows.get", "lineno": 162, "end_lineno": 162}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "callee": "isinstance", "lineno": 163, "end_lineno": 163}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "capability_run", "lineno": 186, "end_lineno": 186}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "getattr", "lineno": 187, "end_lineno": 187}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "meta.get", "lineno": 188, "end_lineno": 188}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "res.get", "lineno": 189, "end_lineno": 189}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "isinstance", "lineno": 190, "end_lineno": 190}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "batches.append", "lineno": 191, "end_lineno": 191}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "str", "lineno": 191, "end_lineno": 191}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "it.get", "lineno": 191, "end_lineno": 191}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "it.get", "lineno": 191, "end_lineno": 191}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "isinstance", "lineno": 192, "end_lineno": 192}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "msgs.get", "lineno": 193, "end_lineno": 193}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "msgs.get", "lineno": 194, "end_lineno": 194}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "batches.append", "lineno": 196, "end_lineno": 196}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "str", "lineno": 196, "end_lineno": 196}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "it.get", "lineno": 196, "end_lineno": 196}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "callee": "it.get", "lineno": 196, "end_lineno": 196}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 210, "end_lineno": 210}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.update", "lineno": 211, "end_lineno": 211}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 213, "end_lineno": 213}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_normalize", "lineno": 214, "end_lineno": 214}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "Path", "lineno": 215, "end_lineno": 215}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_now_token", "lineno": 215, "end_lineno": 215}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_ensure_dir", "lineno": 216, "end_lineno": 216}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 219, "end_lineno": 219}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 222, "end_lineno": 222}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 222, "end_lineno": 222}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 223, "end_lineno": 235}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 228, "end_lineno": 228}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 229, "end_lineno": 229}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 230, "end_lineno": 230}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 231, "end_lineno": 231}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 232, "end_lineno": 232}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 236, "end_lineno": 236}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 237, "end_lineno": 237}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_get_records", "lineno": 238, "end_lineno": 238}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 239, "end_lineno": 239}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "len", "lineno": 239, "end_lineno": 239}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 242, "end_lineno": 242}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "isinstance", "lineno": 244, "end_lineno": 244}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 244, "end_lineno": 244}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "list", "lineno": 245, "end_lineno": 245}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 247, "end_lineno": 257}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 253, "end_lineno": 253}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 254, "end_lineno": 254}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 258, "end_lineno": 258}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 259, "end_lineno": 259}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "enr_meta.get", "lineno": 260, "end_lineno": 260}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "BoolOp.get", "lineno": 260, "end_lineno": 260}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "enr_meta.get", "lineno": 260, "end_lineno": 260}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 261, "end_lineno": 261}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "len", "lineno": 261, "end_lineno": 261}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 264, "end_lineno": 264}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "list", "lineno": 265, "end_lineno": 265}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 267, "end_lineno": 271}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 269, "end_lineno": 269}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 272, "end_lineno": 272}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 273, "end_lineno": 273}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "ctx_meta.get", "lineno": 274, "end_lineno": 274}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "BoolOp.get", "lineno": 274, "end_lineno": 274}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "ctx_meta.get", "lineno": 274, "end_lineno": 274}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 276, "end_lineno": 276}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "i.get", "lineno": 276, "end_lineno": 276}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "i.get", "lineno": 276, "end_lineno": 276}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "isinstance", "lineno": 276, "end_lineno": 276}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 279, "end_lineno": 279}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "it.get", "lineno": 279, "end_lineno": 279}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "merged.append", "lineno": 280, "end_lineno": 280}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "it.get", "lineno": 280, "end_lineno": 280}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "ctx_by_id.get", "lineno": 280, "end_lineno": 280}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 284, "end_lineno": 284}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 289, "end_lineno": 289}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 290, "end_lineno": 290}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 291, "end_lineno": 291}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 293, "end_lineno": 293}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 294, "end_lineno": 294}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "build_meta.get", "lineno": 295, "end_lineno": 295}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 296, "end_lineno": 296}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_messages_from_build", "lineno": 297, "end_lineno": 297}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 300, "end_lineno": 300}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 302, "end_lineno": 315}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 307, "end_lineno": 307}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 310, "end_lineno": 310}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 311, "end_lineno": 311}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 312, "end_lineno": 312}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 318, "end_lineno": 318}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 318, "end_lineno": 318}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 321, "end_lineno": 321}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 322, "end_lineno": 328}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "bool", "lineno": 325, "end_lineno": 325}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "isinstance", "lineno": 326, "end_lineno": 326}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "res.get", "lineno": 326, "end_lineno": 326}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "len", "lineno": 326, "end_lineno": 326}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "res.get", "lineno": 326, "end_lineno": 326}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 332, "end_lineno": 346}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 335, "end_lineno": 335}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 337, "end_lineno": 337}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 338, "end_lineno": 338}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 340, "end_lineno": 340}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "b.get", "lineno": 340, "end_lineno": 340}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 343, "end_lineno": 343}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 347, "end_lineno": 347}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "list", "lineno": 348, "end_lineno": 348}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "llm_meta.get", "lineno": 348, "end_lineno": 348}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 349, "end_lineno": 349}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 352, "end_lineno": 352}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "BoolOp.get", "lineno": 355, "end_lineno": 355}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "BoolOp.get", "lineno": 355, "end_lineno": 355}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "parsed_items.extend", "lineno": 358, "end_lineno": 358}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_parse_llm_items", "lineno": 358, "end_lineno": 358}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 361, "end_lineno": 361}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_make_per_item_batches", "lineno": 362, "end_lineno": 362}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 362, "end_lineno": 362}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 363, "end_lineno": 363}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 364, "end_lineno": 375}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 367, "end_lineno": 367}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 369, "end_lineno": 369}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 370, "end_lineno": 370}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 372, "end_lineno": 372}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 376, "end_lineno": 376}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "list", "lineno": 377, "end_lineno": 377}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "fb_meta.get", "lineno": 377, "end_lineno": 377}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 378, "end_lineno": 378}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "BoolOp.get", "lineno": 380, "end_lineno": 380}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "BoolOp.get", "lineno": 380, "end_lineno": 380}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "parsed_items.extend", "lineno": 383, "end_lineno": 383}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_parse_llm_items", "lineno": 383, "end_lineno": 383}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 385, "end_lineno": 389}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 387, "end_lineno": 387}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "res.get", "lineno": 387, "end_lineno": 387}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 390, "end_lineno": 390}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 391, "end_lineno": 391}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "sanitize_meta.get", "lineno": 392, "end_lineno": 392}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "isinstance", "lineno": 393, "end_lineno": 393}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "items_after_sanitize.get", "lineno": 394, "end_lineno": 394}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "items_after_sanitize.get", "lineno": 394, "end_lineno": 394}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 395, "end_lineno": 395}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "len", "lineno": 395, "end_lineno": 395}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 398, "end_lineno": 398}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 399, "end_lineno": 403}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 401, "end_lineno": 401}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 404, "end_lineno": 404}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 405, "end_lineno": 405}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "verify_meta.get", "lineno": 406, "end_lineno": 406}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "BoolOp.get", "lineno": 406, "end_lineno": 406}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "verify_meta.get", "lineno": 406, "end_lineno": 406}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "isinstance", "lineno": 407, "end_lineno": 407}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 409, "end_lineno": 409}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "len", "lineno": 409, "end_lineno": 409}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "print", "lineno": 412, "end_lineno": 412}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 414, "end_lineno": 414}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "res.get", "lineno": 417, "end_lineno": 417}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "res.get", "lineno": 418, "end_lineno": 418}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 420, "end_lineno": 420}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 421, "end_lineno": 421}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 422, "end_lineno": 422}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 423, "end_lineno": 423}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "payload.get", "lineno": 424, "end_lineno": 424}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "capability_run", "lineno": 426, "end_lineno": 426}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "getattr", "lineno": 427, "end_lineno": 427}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 428, "end_lineno": 428}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "str", "lineno": 432, "end_lineno": 432}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "run_dir.resolve", "lineno": 432, "end_lineno": 432}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "len", "lineno": 435, "end_lineno": 435}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "res.get", "lineno": 435, "end_lineno": 435}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "len", "lineno": 436, "end_lineno": 436}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "res.get", "lineno": 436, "end_lineno": 436}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "len", "lineno": 437, "end_lineno": 437}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "len", "lineno": 438, "end_lineno": 438}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "_write_json", "lineno": 441, "end_lineno": 441}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "caller_name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "callee": "Path", "lineno": 441, "end_lineno": 441}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "owner": "v2.backend.core.prompt_pipeline.executor.engine", "owner_kind": "module", "doc": "\nGeneral-purpose, capability-routed pipeline engine.\n\nPhases:\n  FETCH -> ENRICH -> CONTEXT.BUILD -> BUILD -> BUNDLE.INJECT -> LLM -> SANITIZE -> VERIFY -> PATCH.APPLY_FILES\n\nAll cross-module work is performed via Spine capabilities. This file wires phases\ntogether and persists run artifacts/output.\n\nThis build ONLY changes the way we extract records from the FETCH provider, so that\nwe can handle nested Artifact-in-`result` shapes (your current case) in addition to\nthe older plain-dict shapes.\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "owner": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "owner_kind": "function", "doc": "\n    Robustly extract records/items from provider meta.\n\n    Supports all of:\n      - meta[\"records\"]\n      - meta[\"items\"]\n      - (meta[\"result\"] as dict).records / .items\n      - (meta[\"result\"] as Artifact-object).meta.records / .items\n      - list already (return as-is)\n    ", "lineno": 67, "end_lineno": 118}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "owner": "v2.backend.core.prompt_pipeline.executor.engine._messages_from_build", "owner_kind": "function", "doc": "\n    Returns: (batches, messages_flattened_for_logging)\n    Builder may return:\n      - {\"messages\": [{\"role\":...,\"content\":...}, ...], \"ids\":[...], \"batch\":[...]}\n      - or {\"messages\": {\"system\":\"...\",\"user\":\"...\"}}\n    ", "lineno": 121, "end_lineno": 137}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "owner": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "owner_kind": "function", "doc": "\n    Parse a single LLM raw text into a list of item dicts. Intentionally domain-neutral.\n    ", "lineno": 140, "end_lineno": 165}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "owner": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "owner_kind": "function", "doc": "\n    Domain-neutral per-item fallback:\n      - For each item, delegate to `prompts.build.v1` for that single item.\n    ", "lineno": 168, "end_lineno": 199}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "owner": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "owner_kind": "function", "doc": "\n    Engine entry point.\n    Accepts a 'task' or raw dict payload. Returns summary dict with run_dir and counts.\n    ", "lineno": 204, "end_lineno": 442}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._ensure_dir", "loc": 2, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._write_json", "loc": 7, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._now_token", "loc": 2, "arg_count": 0, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._normalize", "loc": 6, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._get_records", "loc": 52, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._messages_from_build", "loc": 17, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items", "loc": 26, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches", "loc": 32, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/engine.py", "module": "v2.backend.core.prompt_pipeline.executor.engine", "name": "v2.backend.core.prompt_pipeline.executor.engine.run_v1", "loc": 239, "arg_count": 3, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "classes": ["v2.backend.core.prompt_pipeline.executor.errors.PipelineError", "v2.backend.core.prompt_pipeline.executor.errors.CapabilityError", "v2.backend.core.prompt_pipeline.executor.errors.ProviderError", "v2.backend.core.prompt_pipeline.executor.errors.ValidationError", "v2.backend.core.prompt_pipeline.executor.errors.ProblemSpec"], "functions": ["v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta"], "imports": ["__future__", "dataclasses", "typing"]}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "name": "v2.backend.core.prompt_pipeline.executor.errors.PipelineError", "bases": ["RuntimeError"], "decorators": [], "lineno": 17, "end_lineno": 18}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "name": "v2.backend.core.prompt_pipeline.executor.errors.CapabilityError", "bases": ["PipelineError"], "decorators": [], "lineno": 21, "end_lineno": 22}
