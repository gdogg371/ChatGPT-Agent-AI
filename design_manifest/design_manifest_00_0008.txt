{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "obj.get", "lineno": 103, "end_lineno": 103}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "isinstance", "lineno": 104, "end_lineno": 104}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "isinstance", "lineno": 105, "end_lineno": 105}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "choices.get", "lineno": 105, "end_lineno": 105}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "isinstance", "lineno": 106, "end_lineno": 106}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "isinstance", "lineno": 106, "end_lineno": 106}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "msg.get", "lineno": 106, "end_lineno": 106}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "str", "lineno": 107, "end_lineno": 107}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "BoolOp.lower.strip", "lineno": 120, "end_lineno": 120}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "BoolOp.lower", "lineno": 120, "end_lineno": 120}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "RuntimeError", "lineno": 124, "end_lineno": 124}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "_openai_complete", "lineno": 125, "end_lineno": 125}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "BoolOp.get", "lineno": 127, "end_lineno": 127}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "_mock_items_json", "lineno": 128, "end_lineno": 128}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "isinstance", "lineno": 128, "end_lineno": 128}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "int", "lineno": 128, "end_lineno": 128}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "BoolOp.get", "lineno": 131, "end_lineno": 131}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "_mock_items_json", "lineno": 132, "end_lineno": 132}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "isinstance", "lineno": 132, "end_lineno": 132}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "int", "lineno": 132, "end_lineno": 132}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "str", "lineno": 138, "end_lineno": 138}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "json.dumps", "lineno": 140, "end_lineno": 140}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete", "callee": "complete_v1", "lineno": 144, "end_lineno": 144}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.run", "callee": "complete_v1", "lineno": 148, "end_lineno": 148}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "owner": "v2.backend.core.prompt_pipeline.llm.client", "owner_kind": "module", "doc": "\nDomain-agnostic LLM client.\n\nPublic entry points:\n  - complete_v1(provider, model, messages, ask_spec, api_key=None) -> str\n  - complete(provider, model, messages, ask_spec, api_key=None) -> str  (compat)\n  - run(provider, model, messages, ask_spec, api_key=None) -> str       (compat)\n\nNotes:\n- For provider=\"openai\", this uses the Chat Completions API.\n- The caller is responsible for supplying `api_key` (we do not read env here).\n- If the HTTP call fails, we return a deterministic JSON diagnostic so the\n  pipeline can continue.\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "owner": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "owner_kind": "function", "doc": "\n    Convert legacy ask_spec.response_format into OpenAI's expected shape when possible.\n    - If ask_spec[\"response_format\"] == \"json\", map to {\"type\": \"json_object\"}.\n    - Otherwise, pass through unchanged.\n    ", "lineno": 27, "end_lineno": 37}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "owner": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "owner_kind": "function", "doc": "\n    Ensure each message is {role, content} string as the OpenAI API expects.\n    ", "lineno": 40, "end_lineno": 55}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "owner": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "owner_kind": "function", "doc": "\n    Call OpenAI Chat Completions and return the top message content (string).\n    ", "lineno": 76, "end_lineno": 110}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "owner": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "owner_kind": "function", "doc": "\n    Preferred entry point used by llm.providers.\n    Returns a *string* (raw model text). On failure, returns a deterministic mock JSON.\n    ", "lineno": 115, "end_lineno": 140}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "loc": 11, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "loc": 16, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._mock_items_json", "loc": 7, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json", "loc": 5, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "loc": 35, "arg_count": 5, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "loc": 26, "arg_count": 5, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client.complete", "loc": 2, "arg_count": 5, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client.run", "loc": 2, "arg_count": 5, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.providers._ensure_dir", "v2.backend.core.prompt_pipeline.llm.providers._save_json", "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"], "imports": ["__future__", "json", "openai", "pathlib", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers._ensure_dir", "decorators": [], "lineno": 8, "end_lineno": 9}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers._save_json", "decorators": [], "lineno": 11, "end_lineno": 17}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "decorators": [], "lineno": 19, "end_lineno": 42}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "decorators": [], "lineno": 44, "end_lineno": 72}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "decorators": [], "lineno": 74, "end_lineno": 107}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "decorators": [], "lineno": 109, "end_lineno": 140}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 2, "end_lineno": 2}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "json", "asname": null, "lineno": 4, "end_lineno": 4}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "from_module": "pathlib", "name": "Path", "asname": null, "level": 0, "lineno": 5, "end_lineno": 5}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 6, "end_lineno": 6}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 6, "end_lineno": 6}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 6, "end_lineno": 6}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 6, "end_lineno": 6}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "from_module": "openai", "name": "OpenAI", "asname": null, "level": 0, "lineno": 47, "end_lineno": 47}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._ensure_dir", "callee": "p.mkdir", "lineno": 9, "end_lineno": 9}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._save_json", "callee": "_ensure_dir", "lineno": 13, "end_lineno": 13}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._save_json", "callee": "path.write_text", "lineno": 14, "end_lineno": 14}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._save_json", "callee": "json.dumps", "lineno": 14, "end_lineno": 14}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "getattr", "lineno": 22, "end_lineno": 22}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "callable", "lineno": 23, "end_lineno": 23}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "fn", "lineno": 25, "end_lineno": 25}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "isinstance", "lineno": 26, "end_lineno": 26}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "getattr", "lineno": 32, "end_lineno": 32}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "callable", "lineno": 33, "end_lineno": 33}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "json.loads", "lineno": 35, "end_lineno": 35}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "fn", "lineno": 35, "end_lineno": 35}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "isinstance", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "str", "lineno": 42, "end_lineno": 42}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "callee": "OpenAI", "lineno": 51, "end_lineno": 51}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "callee": "client.chat.completions.create", "lineno": 69, "end_lineno": 69}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "callee": "_to_dict", "lineno": 70, "end_lineno": 70}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get", "lineno": 87, "end_lineno": 87}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get", "lineno": 88, "end_lineno": 88}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get", "lineno": 89, "end_lineno": 89}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get", "lineno": 90, "end_lineno": 90}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get", "lineno": 91, "end_lineno": 91}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "_openai_chat_complete", "lineno": 100, "end_lineno": 100}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "_save_json", "lineno": 104, "end_lineno": 105}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "Path", "lineno": 105, "end_lineno": 105}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get", "lineno": 119, "end_lineno": 119}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get", "lineno": 120, "end_lineno": 120}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get", "lineno": 121, "end_lineno": 121}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get", "lineno": 122, "end_lineno": 122}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get", "lineno": 123, "end_lineno": 123}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "enumerate", "lineno": 133, "end_lineno": 133}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "_openai_chat_complete", "lineno": 134, "end_lineno": 134}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "results.append", "lineno": 135, "end_lineno": 135}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "_save_json", "lineno": 137, "end_lineno": 138}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "Path", "lineno": 138, "end_lineno": 138}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "owner": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "owner_kind": "function", "doc": "\n    Capability: llm.complete.v1\n    Inputs:\n      - provider: \"openai\" (supported) | others (raise Problem)\n      - model: model id\n      - messages: OpenAI-style messages\n      - ask_spec: {temperature, top_p, max_tokens, response_format, ...}\n      - run_dir: optional path to persist raw results\n    Returns:\n      - raw provider response (dict) wrapped in a list (for consistency with batches)\n        OR a Problem artifact on failure.\n    ", "lineno": 74, "end_lineno": 107}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "owner": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "owner_kind": "function", "doc": "\n    Capability: llm.complete_batches.v1\n    Inputs:\n      - provider, model, ask_spec\n      - batches: List[List[message]]  (each is a chat message sequence)\n      - run_dir: optional path to persist raw results\n    Returns:\n      - List[raw provider response dicts] (one per batch)\n    ", "lineno": 109, "end_lineno": 140}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers._ensure_dir", "loc": 2, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers._save_json", "loc": 7, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "loc": 24, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "loc": 29, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "loc": 34, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "module": "v2.backend.core.prompt_pipeline.llm.providers", "name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "loc": 32, "arg_count": 2, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe", "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"], "imports": ["__future__", "json", "re", "schema", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "decorators": [], "lineno": 21, "end_lineno": 24}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe", "decorators": [], "lineno": 27, "end_lineno": 31}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "decorators": [], "lineno": 34, "end_lineno": 67}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "decorators": [], "lineno": 70, "end_lineno": 101}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 9, "end_lineno": 9}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "json", "asname": null, "lineno": 11, "end_lineno": 11}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "re", "asname": null, "lineno": 12, "end_lineno": 12}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "from_module": "typing", "name": "Tuple", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "from_module": "typing", "name": "Union", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "from_module": "schema", "name": "known_schema_keys", "asname": null, "level": 1, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser", "callee": "re.compile", "lineno": 18, "end_lineno": 18}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "callee": "_FENCE_RE.sub.strip", "lineno": 24, "end_lineno": 24}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "callee": "_FENCE_RE.sub", "lineno": 24, "end_lineno": 24}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe", "callee": "json.loads", "lineno": 29, "end_lineno": 29}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 47, "end_lineno": 47}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 49, "end_lineno": 49}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 50, "end_lineno": 50}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get", "lineno": 50, "end_lineno": 50}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get", "lineno": 51, "end_lineno": 51}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 51, "end_lineno": 51}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 52, "end_lineno": 52}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get", "lineno": 52, "end_lineno": 52}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get", "lineno": 55, "end_lineno": 55}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 56, "end_lineno": 56}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 59, "end_lineno": 59}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "ch.get", "lineno": 59, "end_lineno": 59}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "msg.get", "lineno": 61, "end_lineno": 61}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 62, "end_lineno": 62}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "_loads_maybe", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "_strip_fences", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance", "lineno": 64, "end_lineno": 64}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "_coerce_items", "lineno": 65, "end_lineno": 65}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_strip_fences", "lineno": 78, "end_lineno": 78}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_loads_maybe", "lineno": 83, "end_lineno": 83}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_coerce_items", "lineno": 85, "end_lineno": 85}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "text.find", "lineno": 88, "end_lineno": 88}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "text.find", "lineno": 89, "end_lineno": 89}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "min", "lineno": 93, "end_lineno": 93}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "range", "lineno": 95, "end_lineno": 95}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "len", "lineno": 95, "end_lineno": 95}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "text.strip", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_loads_maybe", "lineno": 97, "end_lineno": 97}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_coerce_items", "lineno": 99, "end_lineno": 99}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "owner": "v2.backend.core.prompt_pipeline.llm.response_parser", "owner_kind": "module", "doc": "\nLenient LLM response parsing.\n\n- Accepts raw model text and tries hard to extract a JSON object with an 'items' list.\n- Does NOT assume domain fields (e.g., 'docstring'). The engine/adapters handle that.\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "owner": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "owner_kind": "function", "doc": "\n    Normalize various shapes into {\"items\": [ ... ]}.\n    Accepted inputs:\n      - {\"items\":[...]}\n      - {\"results\":[...]}\n      - [ ... ]  -> becomes {\"items\":[...]}\n      - {\"choices\":[{\"message\":{\"content\":\"{...json...}\"}}], ...} (OpenAI-style) -> best-effort\n    ", "lineno": 34, "end_lineno": 67}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "owner": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "owner_kind": "function", "doc": "\n    Parse raw model output into {\"items\":[ ...dict... ]}.\n\n    - If schema_key is provided and recognized, we still only *normalize* to 'items'\n      and leave field interpretation to adapters.\n    - If no valid JSON is found, returns {\"items\": []}.\n    ", "lineno": 70, "end_lineno": 101}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "loc": 4, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe", "loc": 5, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "loc": 34, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "loc": 32, "arg_count": 2, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema"], "imports": ["__future__", "response_parser", "schema", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "decorators": [], "lineno": 17, "end_lineno": 41}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "name": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema", "decorators": [], "lineno": 44, "end_lineno": 51}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 2, "end_lineno": 2}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 11, "end_lineno": 11}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 11, "end_lineno": 11}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 11, "end_lineno": 11}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "from_module": "schema", "name": "known_schema_keys", "asname": null, "level": 1, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "from_module": "response_parser", "name": "parse_json_response", "asname": null, "level": 1, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "set", "lineno": 31, "end_lineno": 31}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "known_schema_keys", "lineno": 31, "end_lineno": 31}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "isinstance", "lineno": 33, "end_lineno": 33}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "ask_spec.get", "lineno": 34, "end_lineno": 34}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "isinstance", "lineno": 35, "end_lineno": 35}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "isinstance", "lineno": 38, "end_lineno": 38}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema", "callee": "parse_json_response", "lineno": 51, "end_lineno": 51}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "owner": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "owner_kind": "function", "doc": "\n    Decide which schema to use.\n\n    Heuristics (non-binding; adapters can override upstream):\n      1) If ask_spec[\"schema_key\"] is a known key, use it.\n      2) If adapter_hint suggests a known key (e.g., \"docstrings.v1\"), use it.\n      3) Fallback to `default` (generic.v1).\n    ", "lineno": 17, "end_lineno": 41}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "owner": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema", "owner_kind": "function", "doc": "\n    Parse raw model text into {\"items\":[...]} with a selected schema key.\n\n    NOTE: The current parser is schema-tolerant; the schema key is accepted for\n    future extensibility and tooling but does not change parsing behavior today.\n    ", "lineno": 44, "end_lineno": 51}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "loc": 25, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "module": "v2.backend.core.prompt_pipeline.llm.router", "name": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema", "loc": 8, "arg_count": 2, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "v2.backend.core.prompt_pipeline.llm.schema.get_schema"], "imports": ["__future__", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "decorators": [], "lineno": 61, "end_lineno": 63}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "decorators": [], "lineno": 66, "end_lineno": 68}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "caller_name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "callee": "list", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "caller_name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "callee": "_SCHEMAS.keys", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "caller_name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "callee": "dict", "lineno": 68, "end_lineno": 68}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "caller_name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "callee": "_SCHEMAS.get", "lineno": 68, "end_lineno": 68}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "owner": "v2.backend.core.prompt_pipeline.llm.schema", "owner_kind": "module", "doc": "\nSchema registry for LLM result shapes.\n\nThe engine is domain-agnostic; adapters select a schema key (e.g., via Spine\ncapability `schema.select`). Parsers/providers should avoid hard-coding any\ndomain fields and instead accept whichever schema the adapter chooses.\n\nProvided:\n- known_schema_keys() -> List[str]\n- get_schema(key: str) -> Dict[str, Any]\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "owner": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "owner_kind": "function", "doc": "Return all known schema keys.", "lineno": 61, "end_lineno": 63}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "owner": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "owner_kind": "function", "doc": "Return a schema descriptor for a given key, or an empty dict if unknown.", "lineno": 66, "end_lineno": 68}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "loc": 3, "arg_count": 0, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "module": "v2.backend.core.prompt_pipeline.llm.schema", "name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "loc": 3, "arg_count": 1, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/preflight/__init__.py", "module": "v2.backend.core.prompt_pipeline.preflight", "classes": [], "functions": [], "imports": []}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/preflight/__init__.py", "module": "v2.backend.core.prompt_pipeline.preflight", "owner": "v2.backend.core.prompt_pipeline.preflight", "owner_kind": "module", "doc": "Core primitives: errors, types, budget, logs.", "lineno": 1, "end_lineno": 1}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"], "imports": ["__future__", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "decorators": [], "lineno": 19, "end_lineno": 29}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "decorators": [], "lineno": 32, "end_lineno": 42}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "name": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "decorators": [], "lineno": 47, "end_lineno": 53}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "decorators": [], "lineno": 56, "end_lineno": 99}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 2, "end_lineno": 2}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "from_module": "typing", "name": "Tuple", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "callee": "max", "lineno": 28, "end_lineno": 28}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "callee": "len", "lineno": 28, "end_lineno": 28}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "callee": "m.get", "lineno": 38, "end_lineno": 38}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "callee": "_approx_tokens_for_text", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "callee": "str", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "callee": "_approx_tokens_for_messages", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "estimate_tokens", "lineno": 69, "end_lineno": 69}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "estimate_tokens", "lineno": 71, "end_lineno": 71}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "reversed", "lineno": 81, "end_lineno": 81}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "str", "lineno": 82, "end_lineno": 82}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "m.get", "lineno": 82, "end_lineno": 82}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "_approx_tokens_for_text", "lineno": 83, "end_lineno": 83}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "remaining.append", "lineno": 85, "end_lineno": 85}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "remaining.append", "lineno": 93, "end_lineno": 93}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "m.get", "lineno": 93, "end_lineno": 93}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "remaining.reverse", "lineno": 98, "end_lineno": 98}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "owner": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "owner_kind": "function", "doc": "\n    Very rough token estimator:\n      - ~4 chars per token for English code/text blend (common rule of thumb)\n    We round up to err on the safe side.\n    ", "lineno": 19, "end_lineno": 29}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "owner": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "owner_kind": "function", "doc": "\n    Sum content token estimates across chat messages.\n    ", "lineno": 32, "end_lineno": 42}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "owner": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "owner_kind": "function", "doc": "\n    Estimate tokens for a chat message list.\n    The `model` parameter is currently unused, but kept for compatibility\n    with more precise future model-specific tokenizers.\n    ", "lineno": 47, "end_lineno": 53}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "owner": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "owner_kind": "function", "doc": "\n    Clamp the messages to a rough token budget.\n\n    Returns:\n        (clamped_messages, estimated_tokens_after_clamp)\n    ", "lineno": 56, "end_lineno": 99}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "loc": 11, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "loc": 11, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "name": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "loc": 7, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "module": "v2.backend.core.prompt_pipeline.preflight.budget", "name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "loc": 44, "arg_count": 3, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/run/__init__.py", "module": "v2.backend.core.run", "classes": [], "functions": [], "imports": []}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "classes": [], "functions": ["v2.backend.core.run.docstrings._ensure_dir", "v2.backend.core.run.docstrings._write_json", "v2.backend.core.run.docstrings._project_root", "v2.backend.core.run.docstrings._load_vars", "v2.backend.core.run.docstrings._now_token", "v2.backend.core.run.docstrings._import_callable", "v2.backend.core.run.docstrings._bootstrap_spine", "v2.backend.core.run.docstrings._arts_list", "v2.backend.core.run.docstrings._unwrap_meta", "v2.backend.core.run.docstrings._ensure_list_of_dicts", "v2.backend.core.run.docstrings._get", "v2.backend.core.run.docstrings._get_items", "v2.backend.core.run.docstrings._get_messages_and_batch", "v2.backend.core.run.docstrings._spine_run", "v2.backend.core.run.docstrings._normalize_record", "v2.backend.core.run.docstrings._normalize_records", "v2.backend.core.run.docstrings._normalize_enriched_item", "v2.backend.core.run.docstrings._normalize_enriched", "v2.backend.core.run.docstrings.main"], "imports": ["__future__", "datetime", "importlib", "json", "pathlib", "sys", "typing", "v2.backend.core.spine.registry", "yaml"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._ensure_dir", "decorators": [], "lineno": 10, "end_lineno": 10}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._write_json", "decorators": [], "lineno": 11, "end_lineno": 16}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._project_root", "decorators": [], "lineno": 18, "end_lineno": 23}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._load_vars", "decorators": [], "lineno": 25, "end_lineno": 28}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._now_token", "decorators": [], "lineno": 30, "end_lineno": 32}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._import_callable", "decorators": [], "lineno": 34, "end_lineno": 39}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._bootstrap_spine", "decorators": [], "lineno": 41, "end_lineno": 69}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._arts_list", "decorators": [], "lineno": 71, "end_lineno": 83}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._unwrap_meta", "decorators": [], "lineno": 85, "end_lineno": 90}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._ensure_list_of_dicts", "decorators": [], "lineno": 92, "end_lineno": 94}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._get", "decorators": [], "lineno": 96, "end_lineno": 101}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._get_items", "decorators": [], "lineno": 103, "end_lineno": 106}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._get_messages_and_batch", "decorators": [], "lineno": 108, "end_lineno": 113}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._spine_run", "decorators": [], "lineno": 115, "end_lineno": 123}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._normalize_record", "decorators": [], "lineno": 125, "end_lineno": 130}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._normalize_records", "decorators": [], "lineno": 132, "end_lineno": 133}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._normalize_enriched_item", "decorators": [], "lineno": 135, "end_lineno": 139}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._normalize_enriched", "decorators": [], "lineno": 141, "end_lineno": 142}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings.main", "decorators": [], "lineno": 144, "end_lineno": 273}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 2, "end_lineno": 2}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "json", "asname": null, "lineno": 3, "end_lineno": 3}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "sys", "asname": null, "lineno": 3, "end_lineno": 3}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "from_module": "importlib", "name": "import_module", "asname": null, "level": 0, "lineno": 4, "end_lineno": 4}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "from_module": "pathlib", "name": "Path", "asname": null, "level": 0, "lineno": 5, "end_lineno": 5}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 6, "end_lineno": 6}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 6, "end_lineno": 6}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 6, "end_lineno": 6}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 6, "end_lineno": 6}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "yaml", "asname": null, "lineno": 7, "end_lineno": 7}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "from_module": "v2.backend.core.spine.registry", "name": "REGISTRY", "asname": "SPINE_REGISTRY", "level": 0, "lineno": 8, "end_lineno": 8}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "from_module": "datetime", "name": "datetime", "asname": null, "level": 0, "lineno": 31, "end_lineno": 31}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._ensure_dir", "callee": "p.mkdir", "lineno": 10, "end_lineno": 10}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._write_json", "callee": "_ensure_dir", "lineno": 13, "end_lineno": 13}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._write_json", "callee": "p.write_text", "lineno": 14, "end_lineno": 14}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._write_json", "callee": "json.dumps", "lineno": 14, "end_lineno": 14}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._project_root", "callee": "Path.resolve", "lineno": 19, "end_lineno": 19}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._project_root", "callee": "Path", "lineno": 19, "end_lineno": 19}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._project_root", "callee": "BinOp.exists", "lineno": 21, "end_lineno": 21}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._load_vars", "callee": "vars_path.open", "lineno": 27, "end_lineno": 27}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._load_vars", "callee": "yaml.safe_load", "lineno": 28, "end_lineno": 28}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._now_token", "callee": "datetime.now.strftime", "lineno": 32, "end_lineno": 32}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._now_token", "callee": "datetime.now", "lineno": 32, "end_lineno": 32}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._import_callable", "callee": "ValueError", "lineno": 36, "end_lineno": 36}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._import_callable", "callee": "target.split", "lineno": 37, "end_lineno": 37}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._import_callable", "callee": "import_module", "lineno": 38, "end_lineno": 38}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._import_callable", "callee": "getattr", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "str", "lineno": 43, "end_lineno": 43}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "str", "lineno": 43, "end_lineno": 43}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "cap_path.exists", "lineno": 44, "end_lineno": 44}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "info.append", "lineno": 45, "end_lineno": 45}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "yaml.safe_load", "lineno": 48, "end_lineno": 48}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "cap_path.read_text", "lineno": 48, "end_lineno": 48}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "info.append", "lineno": 50, "end_lineno": 50}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "getattr", "lineno": 52, "end_lineno": 52}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "getattr", "lineno": 52, "end_lineno": 52}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "callable", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "info.append", "lineno": 54, "end_lineno": 54}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "data.items", "lineno": 56, "end_lineno": 56}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "BoolOp.get", "lineno": 58, "end_lineno": 58}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "_import_callable", "lineno": 61, "end_lineno": 61}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "register_fn", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "register_fn", "lineno": 65, "end_lineno": 65}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "cfg.get", "lineno": 65, "end_lineno": 65}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "cfg.get", "lineno": 65, "end_lineno": 65}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "info.append", "lineno": 66, "end_lineno": 66}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._bootstrap_spine", "callee": "info.append", "lineno": 68, "end_lineno": 68}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "isinstance", "lineno": 73, "end_lineno": 73}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "isinstance", "lineno": 76, "end_lineno": 76}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "out.append", "lineno": 77, "end_lineno": 77}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "a.get", "lineno": 77, "end_lineno": 77}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "a.get", "lineno": 77, "end_lineno": 77}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "a.get", "lineno": 77, "end_lineno": 77}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "a.get", "lineno": 77, "end_lineno": 77}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "out.append", "lineno": 79, "end_lineno": 80}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "getattr", "lineno": 79, "end_lineno": 79}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "getattr", "lineno": 79, "end_lineno": 79}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "getattr", "lineno": 80, "end_lineno": 80}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "getattr", "lineno": 80, "end_lineno": 80}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._arts_list", "callee": "isinstance", "lineno": 82, "end_lineno": 82}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._unwrap_meta", "callee": "_arts_list", "lineno": 86, "end_lineno": 86}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._unwrap_meta", "callee": "arts.get", "lineno": 88, "end_lineno": 88}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._unwrap_meta", "callee": "isinstance", "lineno": 89, "end_lineno": 89}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._unwrap_meta", "callee": "isinstance", "lineno": 90, "end_lineno": 90}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._unwrap_meta", "callee": "dict", "lineno": 90, "end_lineno": 90}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._ensure_list_of_dicts", "callee": "isinstance", "lineno": 93, "end_lineno": 93}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._ensure_list_of_dicts", "callee": "isinstance", "lineno": 93, "end_lineno": 93}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get", "callee": "isinstance", "lineno": 99, "end_lineno": 99}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get", "callee": "cur.get", "lineno": 100, "end_lineno": 100}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_items", "callee": "meta.get", "lineno": 104, "end_lineno": 104}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_items", "callee": "isinstance", "lineno": 105, "end_lineno": 105}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_items", "callee": "_get", "lineno": 105, "end_lineno": 105}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_items", "callee": "_ensure_list_of_dicts", "lineno": 106, "end_lineno": 106}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_messages_and_batch", "callee": "meta.get", "lineno": 109, "end_lineno": 109}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_messages_and_batch", "callee": "isinstance", "lineno": 110, "end_lineno": 110}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_messages_and_batch", "callee": "_get", "lineno": 110, "end_lineno": 110}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_messages_and_batch", "callee": "meta.get", "lineno": 111, "end_lineno": 111}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_messages_and_batch", "callee": "isinstance", "lineno": 112, "end_lineno": 112}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_messages_and_batch", "callee": "_get", "lineno": 112, "end_lineno": 112}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_messages_and_batch", "callee": "_ensure_list_of_dicts", "lineno": 113, "end_lineno": 113}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._get_messages_and_batch", "callee": "_ensure_list_of_dicts", "lineno": 113, "end_lineno": 113}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._spine_run", "callee": "SPINE_REGISTRY.run", "lineno": 117, "end_lineno": 117}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._spine_run", "callee": "str", "lineno": 120, "end_lineno": 120}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._spine_run", "callee": "str", "lineno": 123, "end_lineno": 123}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._normalize_record", "callee": "dict", "lineno": 126, "end_lineno": 126}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._normalize_record", "callee": "out.get", "lineno": 127, "end_lineno": 127}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._normalize_record", "callee": "out.get", "lineno": 128, "end_lineno": 128}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._normalize_record", "callee": "out.get", "lineno": 129, "end_lineno": 129}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._normalize_records", "callee": "_normalize_record", "lineno": 133, "end_lineno": 133}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._normalize_enriched_item", "callee": "dict", "lineno": 136, "end_lineno": 136}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings._normalize_enriched", "callee": "_normalize_enriched_item", "lineno": 142, "end_lineno": 142}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_project_root", "lineno": 145, "end_lineno": 145}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_load_vars", "lineno": 146, "end_lineno": 146}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "Path", "lineno": 147, "end_lineno": 147}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 147, "end_lineno": 147}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_now_token", "lineno": 148, "end_lineno": 148}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_ensure_dir", "lineno": 149, "end_lineno": 149}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 151, "end_lineno": 151}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_bootstrap_spine", "lineno": 152, "end_lineno": 152}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_write_json", "lineno": 153, "end_lineno": 153}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "boot.get", "lineno": 153, "end_lineno": 153}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 155, "end_lineno": 155}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 157, "end_lineno": 157}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 158, "end_lineno": 158}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 159, "end_lineno": 159}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 160, "end_lineno": 160}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "int", "lineno": 161, "end_lineno": 161}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 161, "end_lineno": 161}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 162, "end_lineno": 162}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 163, "end_lineno": 163}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_spine_run", "lineno": 165, "end_lineno": 165}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_unwrap_meta", "lineno": 166, "end_lineno": 166}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_ensure_list_of_dicts", "lineno": 167, "end_lineno": 167}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "fetch_meta.get", "lineno": 167, "end_lineno": 167}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "fetch_meta.get", "lineno": 167, "end_lineno": 167}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_get", "lineno": 167, "end_lineno": 167}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_write_json", "lineno": 168, "end_lineno": 168}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_normalize_records", "lineno": 169, "end_lineno": 169}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 170, "end_lineno": 170}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 170, "end_lineno": 170}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_write_json", "lineno": 171, "end_lineno": 171}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "str", "lineno": 175, "end_lineno": 175}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "fetch_payload.get", "lineno": 180, "end_lineno": 180}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 184, "end_lineno": 184}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "json.dumps", "lineno": 184, "end_lineno": 184}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 186, "end_lineno": 186}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_spine_run", "lineno": 187, "end_lineno": 189}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "str", "lineno": 188, "end_lineno": 188}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 188, "end_lineno": 188}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_unwrap_meta", "lineno": 190, "end_lineno": 190}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_get_items", "lineno": 191, "end_lineno": 191}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_normalize_enriched", "lineno": 192, "end_lineno": 192}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_write_json", "lineno": 193, "end_lineno": 193}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 193, "end_lineno": 193}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 194, "end_lineno": 194}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 194, "end_lineno": 194}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 195, "end_lineno": 195}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "str", "lineno": 197, "end_lineno": 197}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "sorted", "lineno": 202, "end_lineno": 202}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "r.keys", "lineno": 202, "end_lineno": 202}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 203, "end_lineno": 203}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 204, "end_lineno": 204}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 208, "end_lineno": 208}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "json.dumps", "lineno": 208, "end_lineno": 208}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 210, "end_lineno": 210}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 213, "end_lineno": 213}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_spine_run", "lineno": 214, "end_lineno": 218}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 215, "end_lineno": 215}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 216, "end_lineno": 216}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 217, "end_lineno": 217}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_unwrap_meta", "lineno": 219, "end_lineno": 219}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_get_messages_and_batch", "lineno": 220, "end_lineno": 220}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_write_json", "lineno": 221, "end_lineno": 221}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 221, "end_lineno": 221}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 221, "end_lineno": 221}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 223, "end_lineno": 223}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 225, "end_lineno": 225}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_spine_run", "lineno": 226, "end_lineno": 226}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_write_json", "lineno": 227, "end_lineno": 227}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_unwrap_meta", "lineno": 227, "end_lineno": 227}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 229, "end_lineno": 229}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 230, "end_lineno": 230}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 230, "end_lineno": 230}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "vars.get", "lineno": 231, "end_lineno": 231}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_spine_run", "lineno": 233, "end_lineno": 236}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "str", "lineno": 235, "end_lineno": 235}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_spine_run", "lineno": 238, "end_lineno": 241}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "str", "lineno": 240, "end_lineno": 240}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 243, "end_lineno": 243}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "isinstance", "lineno": 245, "end_lineno": 245}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_spine_run", "lineno": 246, "end_lineno": 246}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_unwrap_meta", "lineno": 247, "end_lineno": 247}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_get_items", "lineno": 248, "end_lineno": 248}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_write_json", "lineno": 249, "end_lineno": 249}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 249, "end_lineno": 249}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 251, "end_lineno": 251}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_spine_run", "lineno": 252, "end_lineno": 252}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_unwrap_meta", "lineno": 253, "end_lineno": 253}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_get_items", "lineno": 254, "end_lineno": 254}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_write_json", "lineno": 255, "end_lineno": 255}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 255, "end_lineno": 255}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 256, "end_lineno": 256}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 256, "end_lineno": 256}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 258, "end_lineno": 258}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_spine_run", "lineno": 259, "end_lineno": 259}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_unwrap_meta", "lineno": 260, "end_lineno": 260}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_get_items", "lineno": 261, "end_lineno": 261}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "_write_json", "lineno": 262, "end_lineno": 262}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 262, "end_lineno": 262}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 263, "end_lineno": 263}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 263, "end_lineno": 263}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 265, "end_lineno": 265}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "str", "lineno": 267, "end_lineno": 267}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "int", "lineno": 268, "end_lineno": 268}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "int", "lineno": 268, "end_lineno": 268}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "int", "lineno": 269, "end_lineno": 269}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 269, "end_lineno": 269}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "int", "lineno": 269, "end_lineno": 269}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "len", "lineno": 269, "end_lineno": 269}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "print", "lineno": 272, "end_lineno": 272}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings.main", "callee": "json.dumps", "lineno": 272, "end_lineno": 272}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings", "callee": "SystemExit", "lineno": 276, "end_lineno": 276}
{"record_type": "ast.call", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "caller_name": "v2.backend.core.run.docstrings", "callee": "main", "lineno": 276, "end_lineno": 276}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._ensure_dir", "loc": 1, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._write_json", "loc": 6, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._project_root", "loc": 6, "arg_count": 0, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._load_vars", "loc": 4, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._now_token", "loc": 3, "arg_count": 0, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._import_callable", "loc": 6, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._bootstrap_spine", "loc": 29, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._arts_list", "loc": 13, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._unwrap_meta", "loc": 6, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._ensure_list_of_dicts", "loc": 3, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._get", "loc": 6, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._get_items", "loc": 4, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._get_messages_and_batch", "loc": 6, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._spine_run", "loc": 9, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._normalize_record", "loc": 6, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._normalize_records", "loc": 2, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._normalize_enriched_item", "loc": 5, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings._normalize_enriched", "loc": 2, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/run/docstrings.py", "module": "v2.backend.core.run.docstrings", "name": "v2.backend.core.run.docstrings.main", "loc": 130, "arg_count": 1, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/spine/__init__.py", "module": "v2.backend.core.spine", "classes": [], "functions": [], "imports": ["__future__", "loader", "registry"]}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/__init__.py", "module": "v2.backend.core.spine", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/__init__.py", "module": "v2.backend.core.spine", "from_module": "registry", "name": "REGISTRY", "asname": "registry", "level": 1, "lineno": 19, "end_lineno": 19}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/__init__.py", "module": "v2.backend.core.spine", "from_module": "registry", "name": "run", "asname": "run", "level": 1, "lineno": 20, "end_lineno": 20}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/__init__.py", "module": "v2.backend.core.spine", "from_module": "registry", "name": "run_capability", "asname": "run_capability", "level": 1, "lineno": 21, "end_lineno": 21}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/__init__.py", "module": "v2.backend.core.spine", "from_module": "loader", "name": "capability_run", "asname": "capability_run", "level": 1, "lineno": 24, "end_lineno": 24}
{"record_type": "ast.docstring", "path": "v2/backend/core/spine/__init__.py", "module": "v2.backend.core.spine", "owner": "v2.backend.core.spine", "owner_kind": "module", "doc": "\nSpine package facade.\n\nRe-exports:\n- registry singleton and runners\n- loader facade shim\n\nThis ensures both import styles work:\n  from v2.backend.core.spine import registry      # singleton object\n  from v2.backend.core.spine import run           # module-level runner\n  from v2.backend.core.spine import run_capability\n  from v2.backend.core.spine import capability_run\n", "lineno": 1, "end_lineno": 1}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/spine/adapters/__init__.py", "module": "v2.backend.core.spine.adapters", "classes": [], "functions": [], "imports": ["base"]}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/adapters/__init__.py", "module": "v2.backend.core.spine.adapters", "from_module": "base", "name": "Adapter", "asname": null, "level": 1, "lineno": 3, "end_lineno": 3}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "classes": ["v2.backend.core.spine.adapters.base.Adapter"], "functions": ["v2.backend.core.spine.adapters.base.v2.backend.core.spine.adapters.base.Adapter.to_native", "v2.backend.core.spine.adapters.base.v2.backend.core.spine.adapters.base.Adapter.from_native"], "imports": ["__future__", "contracts", "typing"]}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "name": "v2.backend.core.spine.adapters.base.Adapter", "bases": ["Protocol"], "decorators": ["runtime_checkable"], "lineno": 11, "end_lineno": 34}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "name": "v2.backend.core.spine.adapters.base.v2.backend.core.spine.adapters.base.Adapter.to_native", "decorators": [], "lineno": 30, "end_lineno": 31}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "name": "v2.backend.core.spine.adapters.base.v2.backend.core.spine.adapters.base.Adapter.from_native", "decorators": [], "lineno": 33, "end_lineno": 34}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 3, "end_lineno": 3}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 5, "end_lineno": 5}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "from_module": "typing", "name": "Mapping", "asname": null, "level": 0, "lineno": 5, "end_lineno": 5}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "from_module": "typing", "name": "Protocol", "asname": null, "level": 0, "lineno": 5, "end_lineno": 5}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "from_module": "typing", "name": "runtime_checkable", "asname": null, "level": 0, "lineno": 5, "end_lineno": 5}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "from_module": "contracts", "name": "Task", "asname": null, "level": 2, "lineno": 7, "end_lineno": 7}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "from_module": "contracts", "name": "Artifact", "asname": null, "level": 2, "lineno": 7, "end_lineno": 7}
{"record_type": "ast.docstring", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "owner": "v2.backend.core.spine.adapters.base.Adapter", "owner_kind": "class", "doc": "\n    Spine adapter Protocol — a thin edge shim around an existing module.\n    Implementations may also implement the existing TaskAdapter interface;\n    this Protocol is intentionally compatible with that shape.\n\n    Required:\n      - capability: str\n      - to_native(Task)   -> Any   (validate + translate Task to module-specific call)\n      - from_native(Any)  -> Artifact | list[Artifact]\n    Optional (kept for compatibility with existing pipeline):\n      - sanitize(payload, item) -> str\n      - apply(original_src, item, payload) -> str\n      - verify(payload, item) -> (ok: bool, issues: list[str])\n      - build_items(suspects) -> list[dict]\n      - parse_response(raw, expected_ids) -> list[dict]\n    ", "lineno": 11, "end_lineno": 34}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "name": "v2.backend.core.spine.adapters.base.v2.backend.core.spine.adapters.base.Adapter.to_native", "loc": 2, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/spine/adapters/base.py", "module": "v2.backend.core.spine.adapters.base", "name": "v2.backend.core.spine.adapters.base.v2.backend.core.spine.adapters.base.Adapter.from_native", "loc": 2, "arg_count": 2, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "classes": ["v2.backend.core.spine.bootstrap.Spine"], "functions": ["v2.backend.core.spine.bootstrap._split_target", "v2.backend.core.spine.bootstrap._import_callable", "v2.backend.core.spine.bootstrap.load_middlewares_from_config", "v2.backend.core.spine.bootstrap.setup_registry", "v2.backend.core.spine.bootstrap.build_spine", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.__post_init__", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.from_registry", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.from_capabilities", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.run", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.dispatch_capability", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.load_pipeline_and_run", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._resolve", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._eval_expr", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._parse_literal", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._stringify", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._truthy", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._coerce_bool", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._top_level_char", "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._resolve_path_or_var", "v2.backend.core.spine.bootstrap._echo_provider"], "imports": ["__future__", "contracts", "dataclasses", "importlib", "loader", "pathlib", "re", "registry", "tempfile", "typing", "yaml"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap._split_target", "decorators": [], "lineno": 49, "end_lineno": 53}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap._import_callable", "decorators": [], "lineno": 56, "end_lineno": 62}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.load_middlewares_from_config", "decorators": [], "lineno": 69, "end_lineno": 87}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.setup_registry", "decorators": [], "lineno": 94, "end_lineno": 103}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.build_spine", "decorators": [], "lineno": 106, "end_lineno": 111}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.Spine", "bases": [], "decorators": ["dataclass"], "lineno": 122, "end_lineno": 396}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.__post_init__", "decorators": [], "lineno": 136, "end_lineno": 140}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.from_registry", "decorators": ["classmethod"], "lineno": 143, "end_lineno": 144}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.from_capabilities", "decorators": ["classmethod"], "lineno": 147, "end_lineno": 150}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.run", "decorators": [], "lineno": 154, "end_lineno": 163}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.dispatch_capability", "decorators": [], "lineno": 166, "end_lineno": 187}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine.load_pipeline_and_run", "decorators": [], "lineno": 193, "end_lineno": 246}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._resolve", "decorators": [], "lineno": 250, "end_lineno": 280}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._eval_expr", "decorators": [], "lineno": 282, "end_lineno": 322}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._parse_literal", "decorators": ["staticmethod"], "lineno": 325, "end_lineno": 333}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._stringify", "decorators": ["staticmethod"], "lineno": 336, "end_lineno": 339}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._truthy", "decorators": ["staticmethod"], "lineno": 342, "end_lineno": 345}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._coerce_bool", "decorators": ["staticmethod"], "lineno": 348, "end_lineno": 349}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._top_level_char", "decorators": ["staticmethod"], "lineno": 352, "end_lineno": 368}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap.v2.backend.core.spine.bootstrap.Spine._resolve_path_or_var", "decorators": [], "lineno": 370, "end_lineno": 396}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "v2.backend.core.spine.bootstrap._echo_provider", "decorators": [], "lineno": 415, "end_lineno": 416}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 22, "end_lineno": 22}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "dataclasses", "name": "dataclass", "asname": null, "level": 0, "lineno": 24, "end_lineno": 24}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "importlib", "name": "import_module", "asname": null, "level": 0, "lineno": 25, "end_lineno": 25}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "pathlib", "name": "Path", "asname": null, "level": 0, "lineno": 26, "end_lineno": 26}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 27, "end_lineno": 27}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "typing", "name": "Callable", "asname": null, "level": 0, "lineno": 27, "end_lineno": 27}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 27, "end_lineno": 27}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 27, "end_lineno": 27}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 27, "end_lineno": 27}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "typing", "name": "Tuple", "asname": null, "level": 0, "lineno": 27, "end_lineno": 27}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "typing", "name": "TYPE_CHECKING", "asname": null, "level": 0, "lineno": 27, "end_lineno": 27}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "re", "asname": null, "lineno": 28, "end_lineno": 28}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "yaml", "asname": null, "lineno": 29, "end_lineno": 29}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "loader", "name": "CapabilitiesLoader", "asname": null, "level": 1, "lineno": 31, "end_lineno": 31}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "registry", "name": "Registry", "asname": null, "level": 1, "lineno": 32, "end_lineno": 32}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "contracts", "name": "Artifact", "asname": null, "level": 1, "lineno": 33, "end_lineno": 33}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "contracts", "name": "Envelope", "asname": null, "level": 1, "lineno": 33, "end_lineno": 33}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "contracts", "name": "Task", "asname": null, "level": 1, "lineno": 33, "end_lineno": 33}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "contracts", "name": "new_envelope", "asname": null, "level": 1, "lineno": 33, "end_lineno": 33}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "contracts", "name": "to_dict", "asname": null, "level": 1, "lineno": 33, "end_lineno": 33}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "from_module": "contracts", "name": "Problem", "asname": null, "level": 1, "lineno": 42, "end_lineno": 42}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "name": "tempfile", "asname": null, "lineno": 410, "end_lineno": 410}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap._split_target", "callee": "ValueError", "lineno": 51, "end_lineno": 51}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap._split_target", "callee": "target.split", "lineno": 52, "end_lineno": 52}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap._split_target", "callee": "mod.strip", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap._split_target", "callee": "fn.strip", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap._import_callable", "callee": "_split_target", "lineno": 57, "end_lineno": 57}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap._import_callable", "callee": "import_module", "lineno": 58, "end_lineno": 58}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap._import_callable", "callee": "getattr", "lineno": 59, "end_lineno": 59}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap._import_callable", "callee": "callable", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap._import_callable", "callee": "ValueError", "lineno": 61, "end_lineno": 61}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap.load_middlewares_from_config", "callee": "BoolOp.strip", "lineno": 82, "end_lineno": 82}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap.load_middlewares_from_config", "callee": "_import_callable", "lineno": 85, "end_lineno": 85}
{"record_type": "ast.call", "path": "v2/backend/core/spine/bootstrap.py", "module": "v2.backend.core.spine.bootstrap", "caller_name": "v2.backend.core.spine.bootstrap.load_middlewares_from_config", "callee": "out.append", "lineno": 86, "end_lineno": 86}
