{"data": {"callee": "str", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:61481f3ed3f17f1bcc0f5e6c96411d3fde89d89272e0cd2dcaa76a91124ac2c4", "kind": "ast.call", "loc": {"end_line": 107, "line": 107}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "BoolOp.lower.strip", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:389551c856904911671c792efab5cd2497fd51bf7b6b9e8381c0d7b6e7850c26", "kind": "ast.call", "loc": {"end_line": 120, "line": 120}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "BoolOp.lower", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:389551c856904911671c792efab5cd2497fd51bf7b6b9e8381c0d7b6e7850c26", "kind": "ast.call", "loc": {"end_line": 120, "line": 120}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "RuntimeError", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:fe22b15958a4ae6efb98115a3f86e62be07ae3e5c169299de58e17289ea99c3c", "kind": "ast.call", "loc": {"end_line": 124, "line": 124}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_openai_complete", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:984b37c937911f61a250566ec7a70ac6e07bedac9493b0b248ac31513d541859", "kind": "ast.call", "loc": {"end_line": 125, "line": 125}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "BoolOp.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:43b79a3fe6275c6beca189e15414a78aa4676432913499a4f62c4d1c5247abb6", "kind": "ast.call", "loc": {"end_line": 127, "line": 127}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_mock_items_json", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:cedf7f3f0ed03b1f95cd243fdb053a5badf6b1271853cccdd0c417532dbed428", "kind": "ast.call", "loc": {"end_line": 128, "line": 128}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:cedf7f3f0ed03b1f95cd243fdb053a5badf6b1271853cccdd0c417532dbed428", "kind": "ast.call", "loc": {"end_line": 128, "line": 128}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "int", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:cedf7f3f0ed03b1f95cd243fdb053a5badf6b1271853cccdd0c417532dbed428", "kind": "ast.call", "loc": {"end_line": 128, "line": 128}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "BoolOp.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:5aa659d0e086dca3587f92625f6a76c29a54609f244d6bf477ef328f10b1f645", "kind": "ast.call", "loc": {"end_line": 131, "line": 131}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_mock_items_json", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:119dccd3351b8e6b4bb40f5713633006fcd4d5a40d5b011ee45915ff5c39816d", "kind": "ast.call", "loc": {"end_line": 132, "line": 132}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:119dccd3351b8e6b4bb40f5713633006fcd4d5a40d5b011ee45915ff5c39816d", "kind": "ast.call", "loc": {"end_line": 132, "line": 132}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "int", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:119dccd3351b8e6b4bb40f5713633006fcd4d5a40d5b011ee45915ff5c39816d", "kind": "ast.call", "loc": {"end_line": 132, "line": 132}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "str", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:50e43beee44d5c93bfe6791a603a03ef6f229629c13059016e7ec4a74d078cef", "kind": "ast.call", "loc": {"end_line": 138, "line": 138}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "json.dumps", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:8f31a55394372a50b45f20997eed9e1d25f121abf91518a962a073c402f5ed99", "kind": "ast.call", "loc": {"end_line": 140, "line": 140}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "complete_v1", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:aec95080c376d09ba34a90d6d3cff67115d5bb06c791d69179c606a88b09ca03", "kind": "ast.call", "loc": {"end_line": 144, "line": 144}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "complete_v1", "caller_name": "v2.backend.core.prompt_pipeline.llm.client.run"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:bba45f6d703e0f3bba33023b906f1deee095c3198e5b33cda4508762337aa7d0", "kind": "ast.call", "loc": {"end_line": 148, "line": 148}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\nDomain-agnostic LLM client.\n\nPublic entry points:\n  - complete_v1(provider, model, messages, ask_spec, api_key=None) -> str\n  - complete(provider, model, messages, ask_spec, api_key=None) -> str  (compat)\n  - run(provider, model, messages, ask_spec, api_key=None) -> str       (compat)\n\nNotes:\n- For provider=\"openai\", this uses the Chat Completions API.\n- The caller is responsible for supplying `api_key` (we do not read env here).\n- If the HTTP call fails, we return a deterministic JSON diagnostic so the\n  pipeline can continue.\n", "owner": "v2.backend.core.prompt_pipeline.llm.client", "owner_kind": "module"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:e3a75a65e30575130ec7b64a1c6487afdadd6238f3adc0d6dcc6471b6dffe30a", "kind": "ast.docstring", "loc": {"end_line": 1, "line": 1}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Convert legacy ask_spec.response_format into OpenAI's expected shape when possible.\n    - If ask_spec[\"response_format\"] == \"json\", map to {\"type\": \"json_object\"}.\n    - Otherwise, pass through unchanged.\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:53aac0604d5f38c6d50626235076c4c7a2bcad1d603b6d3e0dcdf3b2043dca2e", "kind": "ast.docstring", "loc": {"end_line": 37, "line": 27}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Ensure each message is {role, content} string as the OpenAI API expects.\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c652616add96613a02cb87084ee4b9e69d921874b5db9370e603a91617dbc4a4", "kind": "ast.docstring", "loc": {"end_line": 55, "line": 40}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Call OpenAI Chat Completions and return the top message content (string).\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:3079a1d6169361561ad412dcf3713962d4fc1c18b73c6d11c5ec741bcf69c0a9", "kind": "ast.docstring", "loc": {"end_line": 110, "line": 76}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Preferred entry point used by llm.providers.\n    Returns a *string* (raw model text). On failure, returns a deterministic mock JSON.\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:8843afe66df2828c905a8b51b9f3143533dc26e7477439a1f29ce3e97d16eefe", "kind": "ast.docstring", "loc": {"end_line": 140, "line": 115}, "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"arg_count": 1, "is_async": false, "loc": 11}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b23a4784453d655caa7352ea0e79b4765881b701164d9a7df8d91583c1c73c79", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format"}}
{"data": {"arg_count": 1, "is_async": false, "loc": 16}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b23a4784453d655caa7352ea0e79b4765881b701164d9a7df8d91583c1c73c79", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai"}}
{"data": {"arg_count": 1, "is_async": false, "loc": 7}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b23a4784453d655caa7352ea0e79b4765881b701164d9a7df8d91583c1c73c79", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._mock_items_json"}}
{"data": {"arg_count": 3, "is_async": false, "loc": 5}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b23a4784453d655caa7352ea0e79b4765881b701164d9a7df8d91583c1c73c79", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json"}}
{"data": {"arg_count": 5, "is_async": false, "loc": 35}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b23a4784453d655caa7352ea0e79b4765881b701164d9a7df8d91583c1c73c79", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete"}}
{"data": {"arg_count": 5, "is_async": false, "loc": 26}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b23a4784453d655caa7352ea0e79b4765881b701164d9a7df8d91583c1c73c79", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}}
{"data": {"arg_count": 5, "is_async": false, "loc": 2}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b23a4784453d655caa7352ea0e79b4765881b701164d9a7df8d91583c1c73c79", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client.complete"}}
{"data": {"arg_count": 5, "is_async": false, "loc": 2}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b23a4784453d655caa7352ea0e79b4765881b701164d9a7df8d91583c1c73c79", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/client.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client.run"}}
{"data": {"classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.providers._ensure_dir", "v2.backend.core.prompt_pipeline.llm.providers._save_json", "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"], "imports": ["__future__", "json", "openai", "pathlib", "typing"], "language": "python"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:4f0097742099596c78c64aadb69421a6ebf77fbe3463baca5dad930f9d55f94e", "kind": "python.module.index", "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "file", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:466b321cd4edae862bbdf05cd45a46d91164ae63401ad56d210b3efa7ae76374", "kind": "ast.symbol", "loc": {"end_line": 9, "line": 8}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.providers._ensure_dir"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:e781b8e803f9fafea235f24c1e29a89f7cbce2eb2201031fb789a49a35bb2d4f", "kind": "ast.symbol", "loc": {"end_line": 17, "line": 11}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.providers._save_json"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:84585a8ec65f6f2a65a11aa46ac73a964af2e0a29790032b3cfa6db57fc55a93", "kind": "ast.symbol", "loc": {"end_line": 42, "line": 19}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:8c8f8ddbdf45ad7f4976602dce52386bd0a7fbb99464d7f278fb991aa1dcd732", "kind": "ast.symbol", "loc": {"end_line": 72, "line": 44}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2e93ac0899d65cceb4edce92b745beb11ba9c8653d62b783e2a00e7331f4177e", "kind": "ast.symbol", "loc": {"end_line": 107, "line": 74}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:0e222a6c5482d3b9f092710437e201ce21b82bf20b613ab076764bcf81bcb158", "kind": "ast.symbol", "loc": {"end_line": 140, "line": 109}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}}
{"data": {"asname": null, "from_module": "__future__", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.providers"}, "type": "import_from"}, "fp": "sha256:ecf571d0bdf582c3b278f8d1f8d399663ece293b00c270378fc253bfc7389753", "kind": "edge.import", "loc": {"end_line": 2, "line": 2}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.providers"}, "type": "import"}, "fp": "sha256:e8712177bf7301b1efebd82f66cad1c4891623f775cd6ed6500f3ac9b888fccd", "kind": "edge.import", "loc": {"end_line": 4, "line": 4}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "pathlib", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.providers"}, "type": "import_from"}, "fp": "sha256:e677aa073b929d55318623a5cbd220e053d094dcf059284d638e93bd08cd7179", "kind": "edge.import", "loc": {"end_line": 5, "line": 5}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.providers"}, "type": "import_from"}, "fp": "sha256:a96e75275b9532d02699388295face0bc1cb721dc2cf7d43d7da23f13033c858", "kind": "edge.import", "loc": {"end_line": 6, "line": 6}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.providers"}, "type": "import_from"}, "fp": "sha256:a96e75275b9532d02699388295face0bc1cb721dc2cf7d43d7da23f13033c858", "kind": "edge.import", "loc": {"end_line": 6, "line": 6}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.providers"}, "type": "import_from"}, "fp": "sha256:a96e75275b9532d02699388295face0bc1cb721dc2cf7d43d7da23f13033c858", "kind": "edge.import", "loc": {"end_line": 6, "line": 6}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.providers"}, "type": "import_from"}, "fp": "sha256:a96e75275b9532d02699388295face0bc1cb721dc2cf7d43d7da23f13033c858", "kind": "edge.import", "loc": {"end_line": 6, "line": 6}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "openai", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.providers"}, "type": "import_from"}, "fp": "sha256:7531c42372d5902868d7fe21272434b429d5c7b8ba08eba48bb83f064ba08fd1", "kind": "edge.import", "loc": {"end_line": 47, "line": 47}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "p.mkdir", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._ensure_dir"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:9f6c04c8bbb77395d6976af3eea0351cfe945c69aef496deb65fcfe6b5f597b3", "kind": "ast.call", "loc": {"end_line": 9, "line": 9}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_ensure_dir", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._save_json"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:77fb3b016ea818a2d7e83e5c383d2adcfaa471d64f446ae6a4b6f825413c23a2", "kind": "ast.call", "loc": {"end_line": 13, "line": 13}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "path.write_text", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._save_json"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:908cd319adeaaec9e357eb81a80de9819d6e32aff28c2751ed209e2e587f4149", "kind": "ast.call", "loc": {"end_line": 14, "line": 14}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "json.dumps", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._save_json"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:908cd319adeaaec9e357eb81a80de9819d6e32aff28c2751ed209e2e587f4149", "kind": "ast.call", "loc": {"end_line": 14, "line": 14}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "getattr", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:d5011c3445751dadd80e065d472872f633af57b34e1dbe76da158b8355b40489", "kind": "ast.call", "loc": {"end_line": 22, "line": 22}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "callable", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c6ba7cfc30a907f1583f866ee3d62a016ae1a778b6403fb7ff48417fbcf59ca5", "kind": "ast.call", "loc": {"end_line": 23, "line": 23}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "fn", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:efff772ff1ce332a5aee6d33a982854e5279ac4e4a85f50e751dd42795a74a7e", "kind": "ast.call", "loc": {"end_line": 25, "line": 25}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:775bb009f4f573fe471ca3b378afa458bb78a5f4de2e7e26b7ae60f28076727a", "kind": "ast.call", "loc": {"end_line": 26, "line": 26}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "getattr", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:037d1c76ef9bd27ffdc02069113ffd5030cbf9daa45d9aae6918b207050be5a0", "kind": "ast.call", "loc": {"end_line": 32, "line": 32}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "callable", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:60e1fd1b4bb614ef946499b87f3fb60733738553f76353d8fe2b191a78e39281", "kind": "ast.call", "loc": {"end_line": 33, "line": 33}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "json.loads", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:34c23ec3e978d7a3aebbe785e06765aea5e5fc5d0d0be34e7bc9a27f02bc55f9", "kind": "ast.call", "loc": {"end_line": 35, "line": 35}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "fn", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:34c23ec3e978d7a3aebbe785e06765aea5e5fc5d0d0be34e7bc9a27f02bc55f9", "kind": "ast.call", "loc": {"end_line": 35, "line": 35}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:62c936df15d187f4d5088dd4a9c8d089c2ae542a2a0797ee4960d0d5913e14a3", "kind": "ast.call", "loc": {"end_line": 39, "line": 39}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "str", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:fbacaa6b711ea167a9ed1cee6f5ded091ab88d5bc0a7c0c3ddab7081e23f7e64", "kind": "ast.call", "loc": {"end_line": 42, "line": 42}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "OpenAI", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:a1d93d202461305dcc314fe7ae6fff483bc4834c86f555320a27a1a4ca9e3e47", "kind": "ast.call", "loc": {"end_line": 51, "line": 51}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "client.chat.completions.create", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:d60f5ab00a7821c38301aa7fbdf94f95c50204de917770dbc8911197579eef71", "kind": "ast.call", "loc": {"end_line": 69, "line": 69}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_to_dict", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:330a531bd67d8ccb957e5958f0db2b85f734a061ee0a6e8d7559242437075612", "kind": "ast.call", "loc": {"end_line": 70, "line": 70}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b8eab1959fed55291b9e316a3442120c2f4b0231ff1e219daebb3768b624f4db", "kind": "ast.call", "loc": {"end_line": 87, "line": 87}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:52e9db639756addccd31bdffc55ac530d04c07ca4ec392c4c9fb014494e46b1c", "kind": "ast.call", "loc": {"end_line": 88, "line": 88}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:717ae34726fec17cb183300a96a7b9059fabb7a4b7a1fa38454f11361958d291", "kind": "ast.call", "loc": {"end_line": 89, "line": 89}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:cec85944c3854a9190882037770c6c8d74464b5bbaadf55715df314c035956ba", "kind": "ast.call", "loc": {"end_line": 90, "line": 90}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:59de579646f867e8e707ab2800407baa7a1ef4618cdf1c4f12589b2e84590154", "kind": "ast.call", "loc": {"end_line": 91, "line": 91}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_openai_chat_complete", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:29ee5e06562d7a8ae43ae9cd34af3ff935f4e669b4f2c478c022d6db4742eefe", "kind": "ast.call", "loc": {"end_line": 100, "line": 100}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_save_json", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:6bc001ffa12963b0f8acc2e9000177e8a789da103358df66c9cbe3cc0c865ef2", "kind": "ast.call", "loc": {"end_line": 105, "line": 104}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "Path", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:fd957c9b83e6c039766ace0f9bd600c0adeefd32464db1caae63c0b453d511d1", "kind": "ast.call", "loc": {"end_line": 105, "line": 105}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:e88b1304dd6b84e0af68f526c972d9b8d5bb5c3b6644d0a8d3e0636ff9fe8697", "kind": "ast.call", "loc": {"end_line": 119, "line": 119}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:5202a324b7d510c0264229bc6a1428b87512d336e968e2aadbbfe33a0f609ed4", "kind": "ast.call", "loc": {"end_line": 120, "line": 120}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:201008ba2041e1c54b2fec230192a8cc45589b7d21566ae44ebd729ebb33f99e", "kind": "ast.call", "loc": {"end_line": 121, "line": 121}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:41e50b96ce164bf32e9ec07f4c3e3accf78b4a800c6aaf55c727a07ed94c9755", "kind": "ast.call", "loc": {"end_line": 122, "line": 122}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "payload.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:eb1ca9d942dc3e7dc242745ee6c0ecfffe9efd958b3fbbdf0cd69fb23b3aefd2", "kind": "ast.call", "loc": {"end_line": 123, "line": 123}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "enumerate", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2f89d68fab913e314d397ef40dbd660cbfbb7f38cba3041e976e1ea2e0504c48", "kind": "ast.call", "loc": {"end_line": 133, "line": 133}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_openai_chat_complete", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:70759214bb9f561dfd7b544abd3c763fad104762189495a8f563acea893a0bd4", "kind": "ast.call", "loc": {"end_line": 134, "line": 134}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "results.append", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:fc092f31a1aeb4df3c7373bd039d225f1188f681ec2383aec5df175650f0e64c", "kind": "ast.call", "loc": {"end_line": 135, "line": 135}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_save_json", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:39f3c78740b45b0e8b7b595bc6a49e2a4758f21afd524171db1cd9213ebb8e0f", "kind": "ast.call", "loc": {"end_line": 138, "line": 137}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "Path", "caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:f9398e58f2c649525afb44ed4eb4eea93485b522ef6291d05633b462bc4ff703", "kind": "ast.call", "loc": {"end_line": 138, "line": 138}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Capability: llm.complete.v1\n    Inputs:\n      - provider: \"openai\" (supported) | others (raise Problem)\n      - model: model id\n      - messages: OpenAI-style messages\n      - ask_spec: {temperature, top_p, max_tokens, response_format, ...}\n      - run_dir: optional path to persist raw results\n    Returns:\n      - raw provider response (dict) wrapped in a list (for consistency with batches)\n        OR a Problem artifact on failure.\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c8c79fc01c0d1ce919432877922a89a7b6d40d480b15af44e8da67619a99038a", "kind": "ast.docstring", "loc": {"end_line": 107, "line": 74}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Capability: llm.complete_batches.v1\n    Inputs:\n      - provider, model, ask_spec\n      - batches: List[List[message]]  (each is a chat message sequence)\n      - run_dir: optional path to persist raw results\n    Returns:\n      - List[raw provider response dicts] (one per batch)\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:0cf9d35c40d1818fcf9d991087031ce38a5e6b21b3a283ac8c8b1b7e115560ae", "kind": "ast.docstring", "loc": {"end_line": 140, "line": 109}, "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"arg_count": 1, "is_async": false, "loc": 2}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:937bf86f4ed695553c9e188813d8520b7aea323c08180792b15fbe3255bde217", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._ensure_dir"}}
{"data": {"arg_count": 2, "is_async": false, "loc": 7}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:937bf86f4ed695553c9e188813d8520b7aea323c08180792b15fbe3255bde217", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._save_json"}}
{"data": {"arg_count": 1, "is_async": false, "loc": 24}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:937bf86f4ed695553c9e188813d8520b7aea323c08180792b15fbe3255bde217", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}}
{"data": {"arg_count": 3, "is_async": false, "loc": 29}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:937bf86f4ed695553c9e188813d8520b7aea323c08180792b15fbe3255bde217", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete"}}
{"data": {"arg_count": 2, "is_async": false, "loc": 34}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:937bf86f4ed695553c9e188813d8520b7aea323c08180792b15fbe3255bde217", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}}
{"data": {"arg_count": 2, "is_async": false, "loc": 32}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:937bf86f4ed695553c9e188813d8520b7aea323c08180792b15fbe3255bde217", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/providers.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}}
{"data": {"classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe", "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"], "imports": ["__future__", "json", "re", "schema", "typing"], "language": "python"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:41ea5e42900c0713c99252e55b023c1474ac423d0272fb9c7f4d2319b085a510", "kind": "python.module.index", "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "file", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:d3b8e8e3bd376dde88acdd3c65234d7dfca7b144f9dd8b71b917b3240b5c981d", "kind": "ast.symbol", "loc": {"end_line": 24, "line": 21}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:4899f41e59d653d504be9df5debd1de3439c63cf881c6d4537e33fafcf85b19d", "kind": "ast.symbol", "loc": {"end_line": 31, "line": 27}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:e07127fedb7613c9964479fee0884d9152af6973e5d44c744f4063f27314f6be", "kind": "ast.symbol", "loc": {"end_line": 67, "line": 34}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:f65d9eaeb5c2e969fe24ed051929cd84a54e86edd4dc1d0c57b47e54de449d29", "kind": "ast.symbol", "loc": {"end_line": 101, "line": 70}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}}
{"data": {"asname": null, "from_module": "__future__", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "type": "import_from"}, "fp": "sha256:a6f5a7f47a918d4f96c67c52f1268145b4b46a7421ac485c886fb53d3b57b1e9", "kind": "edge.import", "loc": {"end_line": 9, "line": 9}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "type": "import"}, "fp": "sha256:d04f80c79254223fa75e9ad3144894c7ef2aace7a096ee62c8032fc3514f4d32", "kind": "edge.import", "loc": {"end_line": 11, "line": 11}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "type": "import"}, "fp": "sha256:996d5a74b75b576838b5243abd4b605d80e82836de354222d90ff1095d8f0a59", "kind": "edge.import", "loc": {"end_line": 12, "line": 12}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "type": "import_from"}, "fp": "sha256:130b4e184246e618e662278971e4cef73ed38c04e72426ab8642734c43063639", "kind": "edge.import", "loc": {"end_line": 13, "line": 13}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "type": "import_from"}, "fp": "sha256:130b4e184246e618e662278971e4cef73ed38c04e72426ab8642734c43063639", "kind": "edge.import", "loc": {"end_line": 13, "line": 13}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "type": "import_from"}, "fp": "sha256:130b4e184246e618e662278971e4cef73ed38c04e72426ab8642734c43063639", "kind": "edge.import", "loc": {"end_line": 13, "line": 13}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "type": "import_from"}, "fp": "sha256:130b4e184246e618e662278971e4cef73ed38c04e72426ab8642734c43063639", "kind": "edge.import", "loc": {"end_line": 13, "line": 13}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "type": "import_from"}, "fp": "sha256:130b4e184246e618e662278971e4cef73ed38c04e72426ab8642734c43063639", "kind": "edge.import", "loc": {"end_line": 13, "line": 13}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "schema", "level": 1}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "type": "import_from"}, "fp": "sha256:09633037b8d55a068ee161ab72a653faef5bce2a3da20d69a9e46473bea347b6", "kind": "edge.import", "loc": {"end_line": 15, "line": 15}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "re.compile", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:bdf2d047a8ed159cf8970a7004ceb6c9d953f38542cff68f62d37bac76c956c8", "kind": "ast.call", "loc": {"end_line": 18, "line": 18}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_FENCE_RE.sub.strip", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2ffcf79f9820907cb2d3da2933eebf018cd10129f917d9f7c40dbb1f4d27d75d", "kind": "ast.call", "loc": {"end_line": 24, "line": 24}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_FENCE_RE.sub", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2ffcf79f9820907cb2d3da2933eebf018cd10129f917d9f7c40dbb1f4d27d75d", "kind": "ast.call", "loc": {"end_line": 24, "line": 24}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "json.loads", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:9ab6c246f07ff787731d66c4baf02f10c0fc2e4409846fae2d45fb51b570792f", "kind": "ast.call", "loc": {"end_line": 29, "line": 29}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:a4ed58c9a2954b8f140e566c15b2de3ec390866b3ee00fabf208e15b872d9990", "kind": "ast.call", "loc": {"end_line": 46, "line": 46}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c96e7272930fa06b89fe4e4ac13016c738965e5b818203f9e458e5f32c76c578", "kind": "ast.call", "loc": {"end_line": 47, "line": 47}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:07e81843487a701a32822be784362789ddd92c34ad1c5499f5f8c3601ba160a2", "kind": "ast.call", "loc": {"end_line": 49, "line": 49}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:1af9c1a638cf0c8aee41938676ed9d36c93545c522eeaddf08dca8858d927998", "kind": "ast.call", "loc": {"end_line": 50, "line": 50}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "obj.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:1af9c1a638cf0c8aee41938676ed9d36c93545c522eeaddf08dca8858d927998", "kind": "ast.call", "loc": {"end_line": 50, "line": 50}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "obj.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:d5741b62a0def57eb0d885d67b908603a4ccc6c0e3a22e6f8c9c3fd37b5c405a", "kind": "ast.call", "loc": {"end_line": 51, "line": 51}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:d5741b62a0def57eb0d885d67b908603a4ccc6c0e3a22e6f8c9c3fd37b5c405a", "kind": "ast.call", "loc": {"end_line": 51, "line": 51}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:462cff7fab86fc8b43fa4b48f98c657807dda7bc7418f6f2e6500db677c2901a", "kind": "ast.call", "loc": {"end_line": 52, "line": 52}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "obj.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:462cff7fab86fc8b43fa4b48f98c657807dda7bc7418f6f2e6500db677c2901a", "kind": "ast.call", "loc": {"end_line": 52, "line": 52}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "obj.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:afeab749c00b5a18396a06ed89804c1c6c60a75a25eeda6e445a55f3ad1fbc76", "kind": "ast.call", "loc": {"end_line": 53, "line": 53}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:afeab749c00b5a18396a06ed89804c1c6c60a75a25eeda6e445a55f3ad1fbc76", "kind": "ast.call", "loc": {"end_line": 53, "line": 53}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "obj.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:1cf667a3e0ed6eb9014fc64878ef6b0416ce48705a2860eb76dad0ac24cfab08", "kind": "ast.call", "loc": {"end_line": 55, "line": 55}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:aaddaadddd7dd3cc4c2da5fd8b133f67e9dcc4909953777400fa7a5d6139dd1d", "kind": "ast.call", "loc": {"end_line": 56, "line": 56}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:58c6ba370ce63e8aa90e4fd0586cc8215fd6f9a98eb4ebc85e582c0a337ad519", "kind": "ast.call", "loc": {"end_line": 59, "line": 59}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "ch.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:58c6ba370ce63e8aa90e4fd0586cc8215fd6f9a98eb4ebc85e582c0a337ad519", "kind": "ast.call", "loc": {"end_line": 59, "line": 59}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:63ff9506053c56d32b0deae159c8d5830436db45634fdec79b98a761122c8b47", "kind": "ast.call", "loc": {"end_line": 60, "line": 60}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "msg.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:72857098112d7771f251b5043aa4351ac5738aa39f4829f2821246ffed52a441", "kind": "ast.call", "loc": {"end_line": 61, "line": 61}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2f4d747deb827b287ac9ca8f34c43cd65acc9c22da10e454476b39c6dc7f1cd8", "kind": "ast.call", "loc": {"end_line": 62, "line": 62}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_loads_maybe", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:e8ebd155195f2bbd95a4c0b8db85f1a96689062b8e6a21904e4d704873f5acfd", "kind": "ast.call", "loc": {"end_line": 63, "line": 63}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_strip_fences", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:e8ebd155195f2bbd95a4c0b8db85f1a96689062b8e6a21904e4d704873f5acfd", "kind": "ast.call", "loc": {"end_line": 63, "line": 63}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:f87260c3bcf0d5a53bfa3eef2185f7099c19cf32990bd110a72b2c14baad4033", "kind": "ast.call", "loc": {"end_line": 64, "line": 64}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_coerce_items", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:4e5a0602f11ffcc13e6d5116b4a1300192cd8ba67ec4b40dba9b86c856e7cde1", "kind": "ast.call", "loc": {"end_line": 65, "line": 65}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_strip_fences", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:ae138487bcc9fb8069dc5f4edb943d0b01d8d845fae3f1b09a881b790c5447a3", "kind": "ast.call", "loc": {"end_line": 78, "line": 78}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_loads_maybe", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b8dce79ef82c35fbd8eca1d7ae174ed5beb9aeca27693095276a45bd64065be2", "kind": "ast.call", "loc": {"end_line": 83, "line": 83}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_coerce_items", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:ef1e579ae10e441dfc4a6533fa57717a6206e2c5bc2442ab2b28a501f3f209ab", "kind": "ast.call", "loc": {"end_line": 85, "line": 85}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "text.find", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:fed7a9d619860924f778a7ff2206006a057c10a91bcf999247a00285ea94ae25", "kind": "ast.call", "loc": {"end_line": 88, "line": 88}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "text.find", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:df74b25c0bcdce746cfa06d94e0bea0fe3f7d3042badf75e55ad0ddbac64773a", "kind": "ast.call", "loc": {"end_line": 89, "line": 89}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "min", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2065db729eb47c1f0e56274364c85a9b936c4b597f772d90871740b4b29ee782", "kind": "ast.call", "loc": {"end_line": 93, "line": 93}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "range", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c515b1532dc5018d3e0cf5b36a6f4dcbd578315e2da2ef66190bc273ddce32d8", "kind": "ast.call", "loc": {"end_line": 95, "line": 95}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "len", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c515b1532dc5018d3e0cf5b36a6f4dcbd578315e2da2ef66190bc273ddce32d8", "kind": "ast.call", "loc": {"end_line": 95, "line": 95}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "text.strip", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:3f8660a1f52a3dca9bb26e2b236db4c1ff127e2bbc46b810ec9903bba3a5299b", "kind": "ast.call", "loc": {"end_line": 96, "line": 96}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_loads_maybe", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:da7927caa6afddbe10c5398589b466f85a4c4ca357aded651409d3b40ed807d0", "kind": "ast.call", "loc": {"end_line": 97, "line": 97}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_coerce_items", "caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:a07240407fe0ac977c0c99be1021f8ff9709952d91ef1776c04f73879e25ce95", "kind": "ast.call", "loc": {"end_line": 99, "line": 99}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\nLenient LLM response parsing.\n\n- Accepts raw model text and tries hard to extract a JSON object with an 'items' list.\n- Does NOT assume domain fields (e.g., 'docstring'). The engine/adapters handle that.\n", "owner": "v2.backend.core.prompt_pipeline.llm.response_parser", "owner_kind": "module"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c1a3a05c2d7f0d3cbae388ea7b054b729b27a675d3881402f0634d6117b06dfe", "kind": "ast.docstring", "loc": {"end_line": 1, "line": 1}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Normalize various shapes into {\"items\": [ ... ]}.\n    Accepted inputs:\n      - {\"items\":[...]}\n      - {\"results\":[...]}\n      - [ ... ]  -> becomes {\"items\":[...]}\n      - {\"choices\":[{\"message\":{\"content\":\"{...json...}\"}}], ...} (OpenAI-style) -> best-effort\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:d26e3ae247640d326b73892bdee41bec698ddbc8110af98b386d01f5d01f96ff", "kind": "ast.docstring", "loc": {"end_line": 67, "line": 34}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Parse raw model output into {\"items\":[ ...dict... ]}.\n\n    - If schema_key is provided and recognized, we still only *normalize* to 'items'\n      and leave field interpretation to adapters.\n    - If no valid JSON is found, returns {\"items\": []}.\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:65b4135c451bd5f572ce58f60329cdc105d2126288a5514be73ba41036e1b8e0", "kind": "ast.docstring", "loc": {"end_line": 101, "line": 70}, "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"arg_count": 1, "is_async": false, "loc": 4}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b4239a3251f3eceb777d282a567c12a19245a2b0ed4c8d64244a947d2c2a0e2e", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences"}}
{"data": {"arg_count": 1, "is_async": false, "loc": 5}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b4239a3251f3eceb777d282a567c12a19245a2b0ed4c8d64244a947d2c2a0e2e", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe"}}
{"data": {"arg_count": 1, "is_async": false, "loc": 34}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b4239a3251f3eceb777d282a567c12a19245a2b0ed4c8d64244a947d2c2a0e2e", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}}
{"data": {"arg_count": 2, "is_async": false, "loc": 32}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b4239a3251f3eceb777d282a567c12a19245a2b0ed4c8d64244a947d2c2a0e2e", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/response_parser.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}}
{"data": {"classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema"], "imports": ["__future__", "response_parser", "schema", "typing"], "language": "python"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:d55499dd45d4208f7ea6e71e4b59589e85ea24e72bba2d1cc37aa86d88ea774e", "kind": "python.module.index", "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "file", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:1f5d4e9b5ee6e5a15784c11878f1ceb97d9bc022422bb17eb2841c89d136c4e9", "kind": "ast.symbol", "loc": {"end_line": 41, "line": 17}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:19da17c630d6cad026fcec78dc3c02834d215ae25ab39f01409a333eb2d78c73", "kind": "ast.symbol", "loc": {"end_line": 51, "line": 44}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema"}}
{"data": {"asname": null, "from_module": "__future__", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.router"}, "type": "import_from"}, "fp": "sha256:3acc5839ff365e6a5d7c5d51948f90e2ceb3dab367255ecdcc15cc15745b987c", "kind": "edge.import", "loc": {"end_line": 2, "line": 2}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.router"}, "type": "import_from"}, "fp": "sha256:bc8c91cd5b8344d3b55f8e81aaab7f6679fa8fb229c23eda6ca3cf71423761de", "kind": "edge.import", "loc": {"end_line": 11, "line": 11}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.router"}, "type": "import_from"}, "fp": "sha256:bc8c91cd5b8344d3b55f8e81aaab7f6679fa8fb229c23eda6ca3cf71423761de", "kind": "edge.import", "loc": {"end_line": 11, "line": 11}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.router"}, "type": "import_from"}, "fp": "sha256:bc8c91cd5b8344d3b55f8e81aaab7f6679fa8fb229c23eda6ca3cf71423761de", "kind": "edge.import", "loc": {"end_line": 11, "line": 11}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "schema", "level": 1}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.router"}, "type": "import_from"}, "fp": "sha256:708bd331f6f91e943ade6b6809cb4f227eb81256fe82ba12e25bb36930f34058", "kind": "edge.import", "loc": {"end_line": 13, "line": 13}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "response_parser", "level": 1}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.router"}, "type": "import_from"}, "fp": "sha256:122cb22cbd4c4c936b4604c58eae99139b849221152400302114b604f62958a4", "kind": "edge.import", "loc": {"end_line": 14, "line": 14}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "set", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c9a26d2204e91963dec1189ee4f4c54ffd73860b997677e8d3fc1943c9a11ab9", "kind": "ast.call", "loc": {"end_line": 31, "line": 31}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "known_schema_keys", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c9a26d2204e91963dec1189ee4f4c54ffd73860b997677e8d3fc1943c9a11ab9", "kind": "ast.call", "loc": {"end_line": 31, "line": 31}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:76840c356d506b7e1b13d9e5dc6451b2a269905a70d6894ed8111975a638f778", "kind": "ast.call", "loc": {"end_line": 33, "line": 33}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "ask_spec.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:0f7fd5ca1071b2108b356685bc287ad56e70dc5b40fd2df1b2cdf81cf08b3e5f", "kind": "ast.call", "loc": {"end_line": 34, "line": 34}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:90e1eba4ca0854bd4187d3ebc9ac604b9ba42a47a35e0dd3214d6c491a907768", "kind": "ast.call", "loc": {"end_line": 35, "line": 35}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "isinstance", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c346d2d3f26b60e57b4edfbaf78b7d6f3614e1e1252adbccf2d8f627fd899472", "kind": "ast.call", "loc": {"end_line": 38, "line": 38}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "parse_json_response", "caller_name": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2445e6bb3f79a29e080ee98289f92e248ab89829624eac4cf51fb9dd74388f4a", "kind": "ast.call", "loc": {"end_line": 51, "line": 51}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Decide which schema to use.\n\n    Heuristics (non-binding; adapters can override upstream):\n      1) If ask_spec[\"schema_key\"] is a known key, use it.\n      2) If adapter_hint suggests a known key (e.g., \"docstrings.v1\"), use it.\n      3) Fallback to `default` (generic.v1).\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:78f7249698f49732b1ba0061918a88335fefcdb6b4471c3617af90b05895a2c5", "kind": "ast.docstring", "loc": {"end_line": 41, "line": 17}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Parse raw model text into {\"items\":[...]} with a selected schema key.\n\n    NOTE: The current parser is schema-tolerant; the schema key is accepted for\n    future extensibility and tooling but does not change parsing behavior today.\n    ", "owner": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:6698425f228ea2a81bc12c32288818b2e09ebe7c2c9a299a0b1d877b125ba0ef", "kind": "ast.docstring", "loc": {"end_line": 51, "line": 44}, "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"arg_count": 3, "is_async": false, "loc": 25}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:df72761bbcd6b3b572299fb8e6e8abc0d61de0ac2f5e2422155e1f265286307a", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key"}}
{"data": {"arg_count": 2, "is_async": false, "loc": 8}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:df72761bbcd6b3b572299fb8e6e8abc0d61de0ac2f5e2422155e1f265286307a", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/router.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema"}}
{"data": {"classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "v2.backend.core.prompt_pipeline.llm.schema.get_schema"], "imports": ["__future__", "typing"], "language": "python"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:d392c1450dc8ede9a2f76f8bddfd4af36975e3df2a9fb39d64ee93f4a95334cd", "kind": "python.module.index", "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "file", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:c185c30f12e1fa8e4002aa3679ea9dd75cada79a06e113ef9af2c5c6eced0c1f", "kind": "ast.symbol", "loc": {"end_line": 63, "line": 61}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:1d1e5a3409bdf65898ef785fd1380412dc8a60bbfdc61d0ac1328e10bd654538", "kind": "ast.symbol", "loc": {"end_line": 68, "line": 66}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema"}}
{"data": {"asname": null, "from_module": "__future__", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/schema.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.schema"}, "type": "import_from"}, "fp": "sha256:7893f53c8587f04992ae25dcb27f19514a6ec9d12a515e5ff5d29faba446d21e", "kind": "edge.import", "loc": {"end_line": 14, "line": 14}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/schema.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.schema"}, "type": "import_from"}, "fp": "sha256:42cafd180d0810c287b650a8664d42d6f8bd569dd82f71823b46f1e480ca8d6c", "kind": "edge.import", "loc": {"end_line": 16, "line": 16}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/schema.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.schema"}, "type": "import_from"}, "fp": "sha256:42cafd180d0810c287b650a8664d42d6f8bd569dd82f71823b46f1e480ca8d6c", "kind": "edge.import", "loc": {"end_line": 16, "line": 16}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/llm/schema.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.llm.schema"}, "type": "import_from"}, "fp": "sha256:42cafd180d0810c287b650a8664d42d6f8bd569dd82f71823b46f1e480ca8d6c", "kind": "edge.import", "loc": {"end_line": 16, "line": 16}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "list", "caller_name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2ec9a6f71028e06e35b83719229a0ba8552c6d7702deffb20fb72d274b5e4e3a", "kind": "ast.call", "loc": {"end_line": 63, "line": 63}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_SCHEMAS.keys", "caller_name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2ec9a6f71028e06e35b83719229a0ba8552c6d7702deffb20fb72d274b5e4e3a", "kind": "ast.call", "loc": {"end_line": 63, "line": 63}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "dict", "caller_name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b9800fee0b9c87ba3d219d704fe5b5733a94515ccb0cdb3e5f0c5d059597e46d", "kind": "ast.call", "loc": {"end_line": 68, "line": 68}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_SCHEMAS.get", "caller_name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b9800fee0b9c87ba3d219d704fe5b5733a94515ccb0cdb3e5f0c5d059597e46d", "kind": "ast.call", "loc": {"end_line": 68, "line": 68}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\nSchema registry for LLM result shapes.\n\nThe engine is domain-agnostic; adapters select a schema key (e.g., via Spine\ncapability `schema.select`). Parsers/providers should avoid hard-coding any\ndomain fields and instead accept whichever schema the adapter chooses.\n\nProvided:\n- known_schema_keys() -> List[str]\n- get_schema(key: str) -> Dict[str, Any]\n", "owner": "v2.backend.core.prompt_pipeline.llm.schema", "owner_kind": "module"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:9acb199698b536c851e510d4c9c84afbf5e4876dabd535f96532db1da881b4e9", "kind": "ast.docstring", "loc": {"end_line": 1, "line": 1}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "Return all known schema keys.", "owner": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b98c5e2458f51c962aed0e82d6c9cbf1b172818b401aa2242c8dec999c079d32", "kind": "ast.docstring", "loc": {"end_line": 63, "line": 61}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "Return a schema descriptor for a given key, or an empty dict if unknown.", "owner": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:39126e3423a92e687c7263abf10262f619c2eb6694adbd0f6833e06f8278223d", "kind": "ast.docstring", "loc": {"end_line": 68, "line": 66}, "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"arg_count": 0, "is_async": false, "loc": 3}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:400dbbc80e3cafd4e343587b202350b6c4839f03eee199ad6b6bcb1ad3a15c17", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys"}}
{"data": {"arg_count": 1, "is_async": false, "loc": 3}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:400dbbc80e3cafd4e343587b202350b6c4839f03eee199ad6b6bcb1ad3a15c17", "kind": "ast.symbol.metrics", "path": "./v2/backend/core/prompt_pipeline/llm/schema.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema"}}
{"data": {"classes": [], "functions": [], "imports": [], "language": "python"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:a6ea7f473980e97c076c37c7c9a3f2853d3f473dd1cba9e471d9b3dff395059b", "kind": "python.module.index", "path": "./v2/backend/core/prompt_pipeline/preflight/__init__.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "file", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "Core primitives: errors, types, budget, logs.", "owner": "v2.backend.core.prompt_pipeline.preflight", "owner_kind": "module"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:9ce1b7ad618ac187f5fb50d9876f6c826e23fef09a3c6095763511a562e4fa4b", "kind": "ast.docstring", "loc": {"end_line": 1, "line": 1}, "path": "./v2/backend/core/prompt_pipeline/preflight/__init__.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"classes": [], "functions": ["v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"], "imports": ["__future__", "typing"], "language": "python"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:50d7c5abec4c7b45bdd48f9a1e878800f4fcc2e79301615aa7459b0c96fa4d31", "kind": "python.module.index", "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "file", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:63f949adbcf8bc264591700eee49f4a519dd860e3daa191af5170d8b959a939d", "kind": "ast.symbol", "loc": {"end_line": 29, "line": 19}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:36a2d507f6c334d58823785a7343f6518a4d7c7cc4788a19420aadd1e4fdb6ec", "kind": "ast.symbol", "loc": {"end_line": 42, "line": 32}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:e736fd9476b60290551b4a24aece8e01fc66b6be11be0cb54b073c341f152195", "kind": "ast.symbol", "loc": {"end_line": 53, "line": 47}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens"}}
{"data": {"decorators": []}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:a3b563e2a8e4376ceb3f782f8c835c0020fcb7fed9c015733299a311f34d1cbc", "kind": "ast.symbol", "loc": {"end_line": 99, "line": 56}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}, "symbol": {"kind": "function", "name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}}
{"data": {"asname": null, "from_module": "__future__", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.preflight.budget"}, "type": "import_from"}, "fp": "sha256:0edf3e77f618ca4dccd4eaacb17c9c1c2fe483f0dff329bd2b5483c374f6dec1", "kind": "edge.import", "loc": {"end_line": 2, "line": 2}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.preflight.budget"}, "type": "import_from"}, "fp": "sha256:97ee55db188fe9580095a1c4cbfe62ccd9525af33866393306fd0ba46e04764d", "kind": "edge.import", "loc": {"end_line": 14, "line": 14}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.preflight.budget"}, "type": "import_from"}, "fp": "sha256:97ee55db188fe9580095a1c4cbfe62ccd9525af33866393306fd0ba46e04764d", "kind": "edge.import", "loc": {"end_line": 14, "line": 14}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.preflight.budget"}, "type": "import_from"}, "fp": "sha256:97ee55db188fe9580095a1c4cbfe62ccd9525af33866393306fd0ba46e04764d", "kind": "edge.import", "loc": {"end_line": 14, "line": 14}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"asname": null, "from_module": "typing", "level": 0}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "edge": {"from": {"path": "./v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"external": false, "name": "v2.backend.core.prompt_pipeline.preflight.budget"}, "type": "import_from"}, "fp": "sha256:97ee55db188fe9580095a1c4cbfe62ccd9525af33866393306fd0ba46e04764d", "kind": "edge.import", "loc": {"end_line": 14, "line": 14}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "max", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:0c5b32929333876d0d123c8a3d8d810b9cfedeb6b00f977691a8a1fb652379bb", "kind": "ast.call", "loc": {"end_line": 28, "line": 28}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "len", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:0c5b32929333876d0d123c8a3d8d810b9cfedeb6b00f977691a8a1fb652379bb", "kind": "ast.call", "loc": {"end_line": 28, "line": 28}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "m.get", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:2369e6a024ec6ea969910e6ad56afb68f964160c66db20806fbfac1d03eedd30", "kind": "ast.call", "loc": {"end_line": 38, "line": 38}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_approx_tokens_for_text", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:ff58ee2faafe9dcaaa5d4a6f5f87dc0b48412951c4a7e23190755eba572adb27", "kind": "ast.call", "loc": {"end_line": 39, "line": 39}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "str", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:ff58ee2faafe9dcaaa5d4a6f5f87dc0b48412951c4a7e23190755eba572adb27", "kind": "ast.call", "loc": {"end_line": 39, "line": 39}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_approx_tokens_for_messages", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:ad3c90093448ad942bfda8b30bc5f605faeb4694299d7ccbdcc6221186729d83", "kind": "ast.call", "loc": {"end_line": 53, "line": 53}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "estimate_tokens", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:84f4d4520a8ca579487cdb639282c77ab324413234459602a7d40efd485899d4", "kind": "ast.call", "loc": {"end_line": 69, "line": 69}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "estimate_tokens", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:167458ea93c6b907e43d9e789772b12eeeaa292cb3d39f1aaa9ea6aefd41478b", "kind": "ast.call", "loc": {"end_line": 71, "line": 71}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "reversed", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:cb56c8841eb3dff7c702437247575b30186ec04cdb84be91f85a32d9e45c7587", "kind": "ast.call", "loc": {"end_line": 81, "line": 81}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "str", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:df39137ba764cbeb8d0e0e3d94d922a42c849fbd04872213c1f5351f8ab6fbd2", "kind": "ast.call", "loc": {"end_line": 82, "line": 82}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "m.get", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:df39137ba764cbeb8d0e0e3d94d922a42c849fbd04872213c1f5351f8ab6fbd2", "kind": "ast.call", "loc": {"end_line": 82, "line": 82}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "_approx_tokens_for_text", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:a6551d9f686ac192137233c99e07a95f6cbf0be4d06b81d18eab45ee83314319", "kind": "ast.call", "loc": {"end_line": 83, "line": 83}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "remaining.append", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:94becb19345949f13f646da8351a3c0d03bc860c50b401bb558febd3991d345e", "kind": "ast.call", "loc": {"end_line": 85, "line": 85}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "remaining.append", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:f9c6ae41d9d34ae7a7cb86fe3ac1c693d72d006f7994b631373408fd210b47d5", "kind": "ast.call", "loc": {"end_line": 93, "line": 93}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "m.get", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:f9c6ae41d9d34ae7a7cb86fe3ac1c693d72d006f7994b631373408fd210b47d5", "kind": "ast.call", "loc": {"end_line": 93, "line": 93}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"callee": "remaining.reverse", "caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:b8400e9a1ec00c9241ad7828d73f5e28fd09e3074eba84aff1578f15a7fd7120", "kind": "ast.call", "loc": {"end_line": 98, "line": 98}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "edge", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Very rough token estimator:\n      - ~4 chars per token for English code/text blend (common rule of thumb)\n    We round up to err on the safe side.\n    ", "owner": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:73af38b2815742010a211deab9b8b45232ee7297e36c1f8a308151b7a8165109", "kind": "ast.docstring", "loc": {"end_line": 29, "line": 19}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Sum content token estimates across chat messages.\n    ", "owner": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:635db57a70a3575f0102fb71aaacba38d49ce2a1ed7d5193111de2f47cbc89da", "kind": "ast.docstring", "loc": {"end_line": 42, "line": 32}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
{"data": {"doc": "\n    Estimate tokens for a chat message list.\n    The `model` parameter is currently unused, but kept for compatibility\n    with more precise future model-specific tokenizers.\n    ", "owner": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "owner_kind": "function"}, "detected_at": "2025-09-07T23:29:17.878140+00:00", "fp": "sha256:6d9437a31a46aa214ab9c83c2c2a1885f12083e188dd4e9592e254cca570ea53", "kind": "ast.docstring", "loc": {"end_line": 53, "line": 47}, "path": "./v2/backend/core/prompt_pipeline/preflight/budget.py", "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "schema": "scanner.record.v1", "scope": "symbol", "status": {"ok": true, "parse_error": false, "reason": null, "suppressed": false}}
