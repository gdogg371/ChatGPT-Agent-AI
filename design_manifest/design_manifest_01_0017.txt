{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 132, "end_line": 132}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:1fd659f49c21e01a75a6e9ebd73abc1df56313294aaab21151419034b475b003"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 132, "end_line": 132}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "int"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:1fd659f49c21e01a75a6e9ebd73abc1df56313294aaab21151419034b475b003"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 138, "end_line": 138}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "str"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:3f6d8c9329a6e4109d92b7109040676bca309f548a2d028a8a95881baefb5a98"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 140, "end_line": 140}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "callee": "json.dumps"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:fc88a42c4dda545f135f9bd30941c49dd9efbca82f7c2e04640a6d4947180fbd"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 144, "end_line": 144}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.client.complete", "callee": "complete_v1"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:395abfdcb06279ca76e117e1e9168ee3c79cc87cdb0df7e303e9e1290bb957d0"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 148, "end_line": 148}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.client.run", "callee": "complete_v1"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:762b1f69bc56f172c9b1b459122ad34c7ea1148c676297dfcfd05bf2388172b7"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 1, "end_line": 1}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.client", "owner_kind": "module", "doc": "\nDomain-agnostic LLM client.\n\nPublic entry points:\n  - complete_v1(provider, model, messages, ask_spec, api_key=None) -> str\n  - complete(provider, model, messages, ask_spec, api_key=None) -> str  (compat)\n  - run(provider, model, messages, ask_spec, api_key=None) -> str       (compat)\n\nNotes:\n- For provider=\"openai\", this uses the Chat Completions API.\n- The caller is responsible for supplying `api_key` (we do not read env here).\n- If the HTTP call fails, we return a deterministic JSON diagnostic so the\n  pipeline can continue.\n"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:05498b5bb585b90af46b538cba05e59d868b94c6a605343f39fd2cba7fe4f83c"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 27, "end_line": 37}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "owner_kind": "function", "doc": "\n    Convert legacy ask_spec.response_format into OpenAI's expected shape when possible.\n    - If ask_spec[\"response_format\"] == \"json\", map to {\"type\": \"json_object\"}.\n    - Otherwise, pass through unchanged.\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:922176aa5e85fd09279be304046f4f492c49e5e337f042c8f450cbafbcc9a504"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 40, "end_line": 55}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "owner_kind": "function", "doc": "\n    Ensure each message is {role, content} string as the OpenAI API expects.\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:78eff46bfbe7b8dba4bc0126b0390a840750fc6c4297701f5fbcbb5dc49989e8"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 76, "end_line": 110}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "owner_kind": "function", "doc": "\n    Call OpenAI Chat Completions and return the top message content (string).\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:f500f908bd977ae6c5abdaf43801cfbf5917f6b9a9ebd2e0e33115688e809b58"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "loc": {"line": 115, "end_line": 140}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "owner_kind": "function", "doc": "\n    Preferred entry point used by llm.providers.\n    Returns a *string* (raw model text). On failure, returns a deterministic mock JSON.\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:e1f87d90eafb6b36af6cc033121bf571b178a6041d8bb12928f41bff435fa9dd"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format"}, "data": {"loc": 11, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:29ed4b6475c3cb4e47532ec6dbc5db76a27a64ebd2254d76aed0040d86cc6ab4"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai"}, "data": {"loc": 16, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:29ed4b6475c3cb4e47532ec6dbc5db76a27a64ebd2254d76aed0040d86cc6ab4"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._mock_items_json"}, "data": {"loc": 7, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:29ed4b6475c3cb4e47532ec6dbc5db76a27a64ebd2254d76aed0040d86cc6ab4"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json"}, "data": {"loc": 5, "arg_count": 3, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:29ed4b6475c3cb4e47532ec6dbc5db76a27a64ebd2254d76aed0040d86cc6ab4"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete"}, "data": {"loc": 35, "arg_count": 5, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:29ed4b6475c3cb4e47532ec6dbc5db76a27a64ebd2254d76aed0040d86cc6ab4"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1"}, "data": {"loc": 26, "arg_count": 5, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:29ed4b6475c3cb4e47532ec6dbc5db76a27a64ebd2254d76aed0040d86cc6ab4"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client.complete"}, "data": {"loc": 2, "arg_count": 5, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:29ed4b6475c3cb4e47532ec6dbc5db76a27a64ebd2254d76aed0040d86cc6ab4"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.client.run"}, "data": {"loc": 2, "arg_count": 5, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:29ed4b6475c3cb4e47532ec6dbc5db76a27a64ebd2254d76aed0040d86cc6ab4"}
{"schema": "scanner.record.v1", "kind": "python.module.index", "scope": "file", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "data": {"language": "python", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.providers._ensure_dir", "v2.backend.core.prompt_pipeline.llm.providers._save_json", "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"], "imports": ["__future__", "json", "openai", "pathlib", "typing"]}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:6cc60d83c4b8479c8399c9d12661556a2889ece3a42568ab8e3a5941341e9611"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 8, "end_line": 9}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._ensure_dir", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:dc9f04c28ff4da33f10657a9c4b2643f30a69b3d8e0e7cde8a3d1a7804816e4a"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 11, "end_line": 17}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._save_json", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:7c22a4378a902539086c8d3d118d0a640bc95322ce82bb7b11f049b88a2fe305"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 19, "end_line": 42}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:d17158dad0b9e56eb2f338771c66ebded5e071092918e0d520f4228a0dbe48a4"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 44, "end_line": 72}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:1e337c102c838bc4ecbf71c63ae2b165c398d4d109e1a449792e8a75b94d9d52"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 74, "end_line": 107}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:d55d45ebaeb3ad94df58d10d53d678e3d85083af64fd0cd5c51590a60abc5e9b"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 109, "end_line": 140}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:fcd1b33af1eed172245ba7a3cc540a6d92b3485df21cc972c986052fd3242af8"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 2, "end_line": 2}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.providers", "external": false}}, "data": {"from_module": "__future__", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b578eb2235c523a46e57717789b18caf8ad7fc2aa5b04737403c313b70c9be6b"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 4, "end_line": 4}, "edge": {"type": "import", "from": {"path": "v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.providers", "external": false}}, "data": {"asname": null}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:e535ee9b1b78042556f812f55fa78a113e017a6d725bbeaa47eb928dac0ecd45"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 5, "end_line": 5}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.providers", "external": false}}, "data": {"from_module": "pathlib", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:67ede81c3c7ae731c1914ca34a1d9989863260b9bd939ec5bf09426382564261"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 6, "end_line": 6}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.providers", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c15193a46e059102cb44253973f886c6361d5bbaf45482c79eb4c7c0a2f4fdab"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 6, "end_line": 6}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.providers", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c15193a46e059102cb44253973f886c6361d5bbaf45482c79eb4c7c0a2f4fdab"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 6, "end_line": 6}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.providers", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c15193a46e059102cb44253973f886c6361d5bbaf45482c79eb4c7c0a2f4fdab"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 6, "end_line": 6}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.providers", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c15193a46e059102cb44253973f886c6361d5bbaf45482c79eb4c7c0a2f4fdab"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 47, "end_line": 47}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/providers.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.providers", "external": false}}, "data": {"from_module": "openai", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ce92b0481bbc35fe7936642b6820984a3796848990896b0df6f8208e9039577e"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 9, "end_line": 9}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._ensure_dir", "callee": "p.mkdir"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:eb679bee73067ba09fcad50a0062abeee64bb39f174b12dbdc1d14f672a0ca86"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 13, "end_line": 13}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._save_json", "callee": "_ensure_dir"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:f25a1b318d7bf1dc895d251a718f8047b543d76285271b047f2cdc4cd25d1e6b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 14, "end_line": 14}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._save_json", "callee": "path.write_text"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:4626ae7a0a246b326696559694dae2ecfc8a66fa1a8851b422192e4d249f51cf"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 14, "end_line": 14}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._save_json", "callee": "json.dumps"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:4626ae7a0a246b326696559694dae2ecfc8a66fa1a8851b422192e4d249f51cf"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 22, "end_line": 22}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "getattr"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:2621501785978e90b10727a4cfcb2282954b6fdc9b9b6c9c30bbcc714236af27"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 23, "end_line": 23}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "callable"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:053e961b3abec4138f8797deed5e6441e58382f844211f8a3c529ab34259a62e"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 25, "end_line": 25}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "fn"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:834972f3bd2933bb98f60ad81cb013c981bce4f4f5e27b11cb6a4098f40ec39b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 26, "end_line": 26}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:424d114c6e67ff6c89a96bb8555b7270f06b19e13e5f5b244704a6fc24f4f05e"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 32, "end_line": 32}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "getattr"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:12b8eb6a59558802016464287fd88fac1e7cf7453470eafb6671e28acd0ffd0f"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 33, "end_line": 33}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "callable"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:2900f862433d51dbcdbd41316b7ab93958475eb5b6958a109f3f65e69ef0bf73"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 35, "end_line": 35}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "json.loads"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:04e0e07e9499a3927e827d190730c0be05b2bfd0d2425b7249282540d2329fe8"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 35, "end_line": 35}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "fn"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:04e0e07e9499a3927e827d190730c0be05b2bfd0d2425b7249282540d2329fe8"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 39, "end_line": 39}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c73d43ad456fcc6cd9c0a2d32a592234da72da49db6029818b7c0195ae283e37"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 42, "end_line": 42}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict", "callee": "str"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:3998aac905eb18bc39deb649b4ac1a9153ae07c068cd0dbf3bdd01e14381d525"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 51, "end_line": 51}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "callee": "OpenAI"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:d5999dcf0a5e2e880ffb467f4338d33fdc1e0fc981f4f7e49acc45370eae638c"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 69, "end_line": 69}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "callee": "client.chat.completions.create"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:802b63e5b4ede20c9ed56b6f724210809efbfe6a4f33d51bf75752b21fd79007"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 70, "end_line": 70}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete", "callee": "_to_dict"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:34a326d66859e1db1dbdaf21ccf5a0dabc010e6f5e9366ab3439a30ac13d8a18"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 87, "end_line": 87}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:f0a5f87946836c09d34ac89741949d4eaf99310223291942ea01664a75e61191"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 88, "end_line": 88}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:e58c66abe38bbc85b02b933007dc279854fc9ac0168f1892dfd35018559cbb3e"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 89, "end_line": 89}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:0e8f8f00ebd83e734a7494dd08f39c6deb2903be23f8e88e626bb0b0649a55e6"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 90, "end_line": 90}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:a1ed38d6690b95630a2d531cbc188fe95e1974a9bfba2cb57579783d400bae42"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 91, "end_line": 91}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:4d021425d2ceb5a0ded3b9d7d70d0c82f805a913d9336ab414b4c050dfa783bc"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 100, "end_line": 100}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "_openai_chat_complete"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b8220aa74bc842ccbdecdd534b3241c4e90f101c221e6ab3409079d058b577ab"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 104, "end_line": 105}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "_save_json"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:258c0a52956846d787060ef8196964b3f5069e4224fcf0b2552d68a7577368ae"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 105, "end_line": 105}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "callee": "Path"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:3fbfa1680225c789648b0bae28475ddacd6268fe808a2817650411cc39d0d233"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 119, "end_line": 119}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:2c17b86156026138f0e5470cba1f253dbf8f27da839bf974c284945b7a574696"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 120, "end_line": 120}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:3177be4e79996fbe2dc0f7af0a83427234d6ded0cf1c2c961ba849178863ed43"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 121, "end_line": 121}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:850ac53fed0ec0f3be0c54d16f3f921fd060f09371addc512146e57d2e49c4b6"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 122, "end_line": 122}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:2017cce93304d9681236b0b705b6114dd1e718923d6d77ce8d243688c85c6efc"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 123, "end_line": 123}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "payload.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c40aeef94dd67a2386ca82b7fa0d2badd504f30190fa3fb63ec201f9be82743b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 133, "end_line": 133}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "enumerate"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c9fc488e090a3ed5e8d2a9026f0e560758c923a6293a02a18941b7c7f0e27710"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 134, "end_line": 134}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "_openai_chat_complete"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c5fb0d78b999aa2253e16b26334fac4e872120fb3450d732a1e04c6e3899db83"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 135, "end_line": 135}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "results.append"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:af1d61a4454bd849bd899f2f11f22d8247359c7cd9fc98963a970538b5252341"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 137, "end_line": 138}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "_save_json"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5e26d6a901f49cb5284f0ae40f839251cd281823ff357c509cae015d7a66cbcd"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 138, "end_line": 138}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "callee": "Path"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5702a801fe5eddbbee5af319981520acce674ddba8bb1d9d51e3a0c32fbe7112"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 74, "end_line": 107}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1", "owner_kind": "function", "doc": "\n    Capability: llm.complete.v1\n    Inputs:\n      - provider: \"openai\" (supported) | others (raise Problem)\n      - model: model id\n      - messages: OpenAI-style messages\n      - ask_spec: {temperature, top_p, max_tokens, response_format, ...}\n      - run_dir: optional path to persist raw results\n    Returns:\n      - raw provider response (dict) wrapped in a list (for consistency with batches)\n        OR a Problem artifact on failure.\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:14968b6aafb2d7d1063fcb509385bec16f4a4c340375f0ca5f3c853e9db6bc38"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "loc": {"line": 109, "end_line": 140}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1", "owner_kind": "function", "doc": "\n    Capability: llm.complete_batches.v1\n    Inputs:\n      - provider, model, ask_spec\n      - batches: List[List[message]]  (each is a chat message sequence)\n      - run_dir: optional path to persist raw results\n    Returns:\n      - List[raw provider response dicts] (one per batch)\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:565835af22e8658abf8a510a475d2c7833fcd3208572401765a046fd9d496d82"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._ensure_dir"}, "data": {"loc": 2, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ef071257adf5356c8a0f611689e7eb3dd4e6b1c683d389560ec307e20d395ab1"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._save_json"}, "data": {"loc": 7, "arg_count": 2, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ef071257adf5356c8a0f611689e7eb3dd4e6b1c683d389560ec307e20d395ab1"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._to_dict"}, "data": {"loc": 24, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ef071257adf5356c8a0f611689e7eb3dd4e6b1c683d389560ec307e20d395ab1"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers._openai_chat_complete"}, "data": {"loc": 29, "arg_count": 3, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ef071257adf5356c8a0f611689e7eb3dd4e6b1c683d389560ec307e20d395ab1"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers.complete_v1"}, "data": {"loc": 34, "arg_count": 2, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ef071257adf5356c8a0f611689e7eb3dd4e6b1c683d389560ec307e20d395ab1"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/providers.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.providers.complete_batches_v1"}, "data": {"loc": 32, "arg_count": 2, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ef071257adf5356c8a0f611689e7eb3dd4e6b1c683d389560ec307e20d395ab1"}
{"schema": "scanner.record.v1", "kind": "python.module.index", "scope": "file", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "data": {"language": "python", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe", "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"], "imports": ["__future__", "json", "re", "schema", "typing"]}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:890ccccff1fd1f6372adb3339250441f7ad497065e056e765c9cdc81b3df8548"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 21, "end_line": 24}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:a184a70b6c1c608ef4005787952cc09b0cfc1fb15bf305d5e4b45f97de8c4265"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 27, "end_line": 31}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:d642a08c1a0cc4714f2390d7c7bac714613241a0a7430b31a881c0d189f4bb1d"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 34, "end_line": 67}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:79757e51a0a7931274eb2ae44ddce801c2b77c71ce025acf9e68deccd2f161f3"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 70, "end_line": 101}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:20b2588384c2af62f472571ebdf5516d50da3c8f2bec6ba2c520fdbe1e984e5e"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 9, "end_line": 9}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser", "external": false}}, "data": {"from_module": "__future__", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:9f4c8765cc56bada1bdf46955bf5dbae63e5d4dafcef201d2e923a6b3499a429"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 11, "end_line": 11}, "edge": {"type": "import", "from": {"path": "v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser", "external": false}}, "data": {"asname": null}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:e602e53c79f18445867027fa9a03d97d8471ea57992ffec3c524b3616d971751"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 12, "end_line": 12}, "edge": {"type": "import", "from": {"path": "v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser", "external": false}}, "data": {"asname": null}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b075c29cbfe2a348c8fe2932fb6a2b0679a83e22358b9e440af5021bc2345e4f"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 13, "end_line": 13}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:402d78b2c489b432fb2457325b44bafd103e8b2e109b2467b915cda7c4b86eb8"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 13, "end_line": 13}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:402d78b2c489b432fb2457325b44bafd103e8b2e109b2467b915cda7c4b86eb8"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 13, "end_line": 13}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:402d78b2c489b432fb2457325b44bafd103e8b2e109b2467b915cda7c4b86eb8"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 13, "end_line": 13}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:402d78b2c489b432fb2457325b44bafd103e8b2e109b2467b915cda7c4b86eb8"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 13, "end_line": 13}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:402d78b2c489b432fb2457325b44bafd103e8b2e109b2467b915cda7c4b86eb8"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 15, "end_line": 15}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/response_parser.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser", "external": false}}, "data": {"from_module": "schema", "asname": null, "level": 1}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:bc289b985edc0d906a1a5f6b392f7ea518432a1cbb8ced68c8497b27fbc404e8"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 18, "end_line": 18}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser", "callee": "re.compile"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:8c5e9ef469d592b37f01a1eeed94707ee00b95778de42252815bd3cf703810a3"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 24, "end_line": 24}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "callee": "_FENCE_RE.sub.strip"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:843099f8b3acc42924896b7b61b0e714ec66f3bc56f118753a6126448f78fee7"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 24, "end_line": 24}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences", "callee": "_FENCE_RE.sub"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:843099f8b3acc42924896b7b61b0e714ec66f3bc56f118753a6126448f78fee7"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 29, "end_line": 29}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe", "callee": "json.loads"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c60c6aee2bc6b54f0a59ffd7825be0d502f2e5bf91333eac1e9ad988863d473b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 46, "end_line": 46}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:a22f9ace22265fe96c2ca678fa22b2993c86237c93b05f04c32fa61db814a5d2"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 47, "end_line": 47}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:55cbc626091163b7ef4654d5097314e5a73da4ed393c9c534c6c7365e486e897"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 49, "end_line": 49}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:7b8c836969cf00de724e59e44407b4cc4932f88717f8050ac8cd6ac393f2ab8d"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 50, "end_line": 50}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:1742a0298a5f36362597f861b44ee6abd56e2312d8404e5da741f6bcc844c480"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 50, "end_line": 50}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:1742a0298a5f36362597f861b44ee6abd56e2312d8404e5da741f6bcc844c480"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 51, "end_line": 51}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:714dc3cf8dbf45c954a53d1aac7dad97992e2b09503acbff82276088b9553803"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 51, "end_line": 51}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:714dc3cf8dbf45c954a53d1aac7dad97992e2b09503acbff82276088b9553803"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 52, "end_line": 52}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:6c58d4e9b6a36c0ecb2d69a1609ebd5de46ae7fabcab4afba07a0f2c0ec53a09"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 52, "end_line": 52}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:6c58d4e9b6a36c0ecb2d69a1609ebd5de46ae7fabcab4afba07a0f2c0ec53a09"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 53, "end_line": 53}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:811e8a77ce9a4024e29619c134f8e014734b44310316d97c982ef272f9864321"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 53, "end_line": 53}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:811e8a77ce9a4024e29619c134f8e014734b44310316d97c982ef272f9864321"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 55, "end_line": 55}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "obj.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5c6ed1fd622013c2a4ced1c63d4c7b161014abd6ad43a4152e7d7e09e88ce80d"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 56, "end_line": 56}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:daf2b94220c7757d1f380d3f69fe9e4fdb83a4de81cf5c20661b9e2052c7d906"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 59, "end_line": 59}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:53fccc29e435beb2a8e08c002d9eda2bb33f4db8b0dfa3a40995b38f7bc6ad3b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 59, "end_line": 59}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "ch.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:53fccc29e435beb2a8e08c002d9eda2bb33f4db8b0dfa3a40995b38f7bc6ad3b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 60, "end_line": 60}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:6c6b494b384128b7becdf918566e1ccd33d0c605016bea0aa038c2ed0cc2007a"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 61, "end_line": 61}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "msg.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b842c83a9cef38ab206512bc31d3b807f4ad620ae09570b54b47134f1bbdcc8a"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 62, "end_line": 62}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:54d9161a93b61c5116b3d19abfd96d6887f6eff2f74127c58e843ebcc7677175"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 63, "end_line": 63}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "_loads_maybe"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:e2f5799d76cccc3dae2f54efb773eb34246782a3281a428e2fce857f645b4812"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 63, "end_line": 63}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "_strip_fences"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:e2f5799d76cccc3dae2f54efb773eb34246782a3281a428e2fce857f645b4812"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 64, "end_line": 64}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b66089e12e248f17c957625bb237d0dd80fb7e8d2c40cbb05630a65f170c101b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 65, "end_line": 65}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "callee": "_coerce_items"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:a98ba264faebe9bca96e366f8a10280c63c3bf7c5d1ee0c968a32bc22095fcaf"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 78, "end_line": 78}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_strip_fences"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:a83b5c12195e840594620cb68b8464384e9b2c3e69e605a6e4f3912240ade4f0"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 83, "end_line": 83}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_loads_maybe"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:887f2a1288ebe5350a11c8a2fdf23387ff2c20bc3336a104fb5dc32b2cda80dc"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 85, "end_line": 85}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_coerce_items"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:cc0d5fedd75042e18ddc98e7a2f04216a3df143a626b8cec2c45c1a7f6506a8b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 88, "end_line": 88}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "text.find"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5b78c0b09a078a305f7279aeb37503842a90aae9bf3d1ca1973870aec57a7b7d"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 89, "end_line": 89}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "text.find"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:acc3cd11036f1ca4226d379e254bd4bebe03f5bdc7c77ebc29d0a77ac1366966"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 93, "end_line": 93}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "min"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:3c409886675f012b2c1f7fbe5ca792a4cd782b5a21ad6f67a4b9228b8fd15bdb"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 95, "end_line": 95}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "range"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:702b988e402e89c021813fcb8ddbad86c5b5471d88895b29c79835b9c4f68440"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 95, "end_line": 95}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "len"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:702b988e402e89c021813fcb8ddbad86c5b5471d88895b29c79835b9c4f68440"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 96, "end_line": 96}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "text.strip"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:88a31c7be320697987f0e6641e541f973063e50c53139fbd601e5c6ad67fd219"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 97, "end_line": 97}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_loads_maybe"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:7a1a1f1a14309039771a88cc1ed6e99af10ef74ddb69fae021fe12bf52f82f46"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 99, "end_line": 99}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "callee": "_coerce_items"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:462a1149714e08962c6ed4fb1dbc60fa28edb8e3a6299329d18a720dbc6f9b26"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 1, "end_line": 1}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.response_parser", "owner_kind": "module", "doc": "\nLenient LLM response parsing.\n\n- Accepts raw model text and tries hard to extract a JSON object with an 'items' list.\n- Does NOT assume domain fields (e.g., 'docstring'). The engine/adapters handle that.\n"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:8d43f72e0fc491fe491c233718190618adedba3bb2a02b9f89ce772caeae21d6"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 34, "end_line": 67}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items", "owner_kind": "function", "doc": "\n    Normalize various shapes into {\"items\": [ ... ]}.\n    Accepted inputs:\n      - {\"items\":[...]}\n      - {\"results\":[...]}\n      - [ ... ]  -> becomes {\"items\":[...]}\n      - {\"choices\":[{\"message\":{\"content\":\"{...json...}\"}}], ...} (OpenAI-style) -> best-effort\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:045127212672f5fa3272bda9118d44fb11c0e717dcf2218248afe1666fdb7b05"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "loc": {"line": 70, "end_line": 101}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response", "owner_kind": "function", "doc": "\n    Parse raw model output into {\"items\":[ ...dict... ]}.\n\n    - If schema_key is provided and recognized, we still only *normalize* to 'items'\n      and leave field interpretation to adapters.\n    - If no valid JSON is found, returns {\"items\": []}.\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5cbeab0f6c508c6165afd87c98606531d62727ec37be6ed2c528e1c56a88526e"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser._strip_fences"}, "data": {"loc": 4, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5e4ff3c5f0261d230d1c3748b45e10d9b1ad9963bd1568e44ba4affda5b82c49"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser._loads_maybe"}, "data": {"loc": 5, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5e4ff3c5f0261d230d1c3748b45e10d9b1ad9963bd1568e44ba4affda5b82c49"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser._coerce_items"}, "data": {"loc": 34, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5e4ff3c5f0261d230d1c3748b45e10d9b1ad9963bd1568e44ba4affda5b82c49"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/response_parser.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.response_parser.parse_json_response"}, "data": {"loc": 32, "arg_count": 2, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5e4ff3c5f0261d230d1c3748b45e10d9b1ad9963bd1568e44ba4affda5b82c49"}
{"schema": "scanner.record.v1", "kind": "python.module.index", "scope": "file", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "data": {"language": "python", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema"], "imports": ["__future__", "response_parser", "schema", "typing"]}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:37fa1bf576b9de29b58865e285d060fa27c595a97e1bd65d42a106c717b7412f"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 17, "end_line": 41}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:e714a7e57c66eb2d012dd491be8c2e708bdc4364ec08c8c89d77b2d7dc40164a"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 44, "end_line": 51}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:171314739bca90928dc7ebf31b840d4157417c2e2778be8e9d9d9b8c5e32a668"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 2, "end_line": 2}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.router", "external": false}}, "data": {"from_module": "__future__", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:28961ba06dd58cb691c98bae9802d53f7469c3c6a02eb4f47b295b2f39070df7"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 11, "end_line": 11}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.router", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5b2ba8d1c53b109f0336456cec6c9940a503c83c174f7c8f03c01cf551c0958e"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 11, "end_line": 11}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.router", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5b2ba8d1c53b109f0336456cec6c9940a503c83c174f7c8f03c01cf551c0958e"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 11, "end_line": 11}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.router", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:5b2ba8d1c53b109f0336456cec6c9940a503c83c174f7c8f03c01cf551c0958e"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 13, "end_line": 13}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.router", "external": false}}, "data": {"from_module": "schema", "asname": null, "level": 1}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:bc83236473bca1254c387628b9a9ac8adbb98eac3d503db4f84b42e67b3ccc09"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 14, "end_line": 14}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/router.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.router", "external": false}}, "data": {"from_module": "response_parser", "asname": null, "level": 1}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:6807f0b62b7574671cb53915d9c3c1cdaafb945aa622050364b4a9ac65fae39b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 31, "end_line": 31}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "set"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:570ddf75b1d003f3c89a8927b3cb54e5163a76db1142b95fff0a0c2af03d8650"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 31, "end_line": 31}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "known_schema_keys"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:570ddf75b1d003f3c89a8927b3cb54e5163a76db1142b95fff0a0c2af03d8650"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 33, "end_line": 33}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:a4babbb681d320b0d4b9c289f20693d1d1ee4b1d32f9d4c9a1e072d3ef71427b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 34, "end_line": 34}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "ask_spec.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:1a8ee1e98262cb5ea83dd727985de5b99add702f06fafc7fb43f7538f027d2bc"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 35, "end_line": 35}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:7506712e806e9c69c15cad2bde79ed1233f60eaa58d81be7b66647161eee4ffb"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 38, "end_line": 38}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "callee": "isinstance"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:88a8ac2ccb8b6ba90bbd116e9755cf84f8127489320ad8bdba0868817d437507"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 51, "end_line": 51}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema", "callee": "parse_json_response"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:48dc9873d41bba3522bf602f94f4f2b2387430e9739bda20073ca05bda53d0cd"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 17, "end_line": 41}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key", "owner_kind": "function", "doc": "\n    Decide which schema to use.\n\n    Heuristics (non-binding; adapters can override upstream):\n      1) If ask_spec[\"schema_key\"] is a known key, use it.\n      2) If adapter_hint suggests a known key (e.g., \"docstrings.v1\"), use it.\n      3) Fallback to `default` (generic.v1).\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:4a8cbbb27fffa6c38b39b67c62e7f453ffa104f0c91b3fe05a39f9d37f2b263a"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "loc": {"line": 44, "end_line": 51}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema", "owner_kind": "function", "doc": "\n    Parse raw model text into {\"items\":[...]} with a selected schema key.\n\n    NOTE: The current parser is schema-tolerant; the schema key is accepted for\n    future extensibility and tooling but does not change parsing behavior today.\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c94c72d70338b950ddc8967573ba625f74149c9beb37442f20f00bc447996a99"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.router.select_schema_key"}, "data": {"loc": 25, "arg_count": 3, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:94e27b7a81ebde6087e9db46373e51383c70495d36c1069006c5fbf25633db2f"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/router.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.router.parse_with_schema"}, "data": {"loc": 8, "arg_count": 2, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:94e27b7a81ebde6087e9db46373e51383c70495d36c1069006c5fbf25633db2f"}
{"schema": "scanner.record.v1", "kind": "python.module.index", "scope": "file", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "data": {"language": "python", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "v2.backend.core.prompt_pipeline.llm.schema.get_schema"], "imports": ["__future__", "typing"]}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:a242f74a28e38c8c66c0ade147a9fc071c6223be612fbd00a1d1044705fd2891"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 61, "end_line": 63}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c832abda6b12d74e4cf4dc3b96186786a87ca644e3e08c7c87d3843f67f3b834"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 66, "end_line": 68}, "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:44d0c89a4e3a7c5e9fab99403185bb002c2a6b6f175e7c72e69921b770ecea7d"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 14, "end_line": 14}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/schema.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.schema", "external": false}}, "data": {"from_module": "__future__", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:447bc9882c085209f4edeb0342670bbd7ed56db0116d7ba34e2f0258c9c07b6f"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 16, "end_line": 16}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/schema.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.schema", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:21a1eebac87baf0e927ee183a312eefb0ef22e548cbe83fe5903c5d5a26b37c9"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 16, "end_line": 16}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/schema.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.schema", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:21a1eebac87baf0e927ee183a312eefb0ef22e548cbe83fe5903c5d5a26b37c9"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 16, "end_line": 16}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/llm/schema.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.llm.schema", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:21a1eebac87baf0e927ee183a312eefb0ef22e548cbe83fe5903c5d5a26b37c9"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 63, "end_line": 63}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "callee": "list"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b5c1912e2cb95646d5849d3b5b37d3e4feeddc5be6d92be71205566440ec8600"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 63, "end_line": 63}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "callee": "_SCHEMAS.keys"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b5c1912e2cb95646d5849d3b5b37d3e4feeddc5be6d92be71205566440ec8600"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 68, "end_line": 68}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "callee": "dict"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:345b92137312d9601ac0ef9884ed06ac1d6339decd822249d54a87b5719542a3"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 68, "end_line": 68}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "callee": "_SCHEMAS.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:345b92137312d9601ac0ef9884ed06ac1d6339decd822249d54a87b5719542a3"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 1, "end_line": 1}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.schema", "owner_kind": "module", "doc": "\nSchema registry for LLM result shapes.\n\nThe engine is domain-agnostic; adapters select a schema key (e.g., via Spine\ncapability `schema.select`). Parsers/providers should avoid hard-coding any\ndomain fields and instead accept whichever schema the adapter chooses.\n\nProvided:\n- known_schema_keys() -> List[str]\n- get_schema(key: str) -> Dict[str, Any]\n"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:0925ada27f3aca59515ee36b97c53e30f438a689e215ad45ea0f60f5c49d3743"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 61, "end_line": 63}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys", "owner_kind": "function", "doc": "Return all known schema keys."}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:efba9fe63e537a38f7fcf6e7914ba9efe469f9317f27dfb283d54e8c54a5bcb3"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "loc": {"line": 66, "end_line": 68}, "data": {"owner": "v2.backend.core.prompt_pipeline.llm.schema.get_schema", "owner_kind": "function", "doc": "Return a schema descriptor for a given key, or an empty dict if unknown."}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:654226b24bddb99dc0b96476fc7d76ef3c0e5ba39032e6fec1ad02eae52bd852"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.schema.known_schema_keys"}, "data": {"loc": 3, "arg_count": 0, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b55090761fc589e0d8e6b8538bb8010a0dfd122cce06d8c994d6bc80f7280fd8"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/llm/schema.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.llm.schema.get_schema"}, "data": {"loc": 3, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b55090761fc589e0d8e6b8538bb8010a0dfd122cce06d8c994d6bc80f7280fd8"}
{"schema": "scanner.record.v1", "kind": "python.module.index", "scope": "file", "path": "v2/backend/core/prompt_pipeline/preflight/__init__.py", "data": {"language": "python", "classes": [], "functions": [], "imports": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:8c58b54a36b6d16951af836189e3ca96da79eac3ebdd0ea48c5f2af1fb6c8006"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/__init__.py", "loc": {"line": 1, "end_line": 1}, "data": {"owner": "v2.backend.core.prompt_pipeline.preflight", "owner_kind": "module", "doc": "Core primitives: errors, types, budget, logs."}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:f89de85d32896288f9a0a273762dd53c3a5c86948e50596ca3cb98610520a7f1"}
{"schema": "scanner.record.v1", "kind": "python.module.index", "scope": "file", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "data": {"language": "python", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"], "imports": ["__future__", "typing"]}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:39d3e29515c4e98b1d86abaf6a7c88f24c7769383d29969a6c2b3abd0d35f843"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 19, "end_line": 29}, "symbol": {"name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:8003ae83410b1482f7fdaf30ea4023e743020aa9ad040f21f3a1a7ad08a7308f"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 32, "end_line": 42}, "symbol": {"name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:df9c1ad1014f8a9635c4380381514ff82cb7866b711244f8044fdab94b0acd6f"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 47, "end_line": 53}, "symbol": {"name": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:2f154d5d70a43267dd9386fea12b44857314ad2b7949b3a0c9aa812c96902ecc"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 56, "end_line": 99}, "symbol": {"name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:2b4e2b5fc1b087ce6219a84469c05080bcd8afc985ee44bb70098f635cbf24fd"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 2, "end_line": 2}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.preflight.budget", "external": false}}, "data": {"from_module": "__future__", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:d8c0d248077d9577e45154df485292eca38f024a976ac12fc575790c12bb45a6"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 14, "end_line": 14}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.preflight.budget", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:45cca9b626cae97f301811afcae8752d020387cc1d1d69ac3f3d0d099a143eb5"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 14, "end_line": 14}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.preflight.budget", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:45cca9b626cae97f301811afcae8752d020387cc1d1d69ac3f3d0d099a143eb5"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 14, "end_line": 14}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.preflight.budget", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:45cca9b626cae97f301811afcae8752d020387cc1d1d69ac3f3d0d099a143eb5"}
{"schema": "scanner.record.v1", "kind": "edge.import", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 14, "end_line": 14}, "edge": {"type": "import_from", "from": {"path": "v2/backend/core/prompt_pipeline/preflight/budget.py"}, "to": {"name": "v2.backend.core.prompt_pipeline.preflight.budget", "external": false}}, "data": {"from_module": "typing", "asname": null, "level": 0}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:45cca9b626cae97f301811afcae8752d020387cc1d1d69ac3f3d0d099a143eb5"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 28, "end_line": 28}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "callee": "max"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:4505f1dabbfe3d8a684b3f0fe029e8dcdc51ba9d74fe5785dc1918f296b2032b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 28, "end_line": 28}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "callee": "len"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:4505f1dabbfe3d8a684b3f0fe029e8dcdc51ba9d74fe5785dc1918f296b2032b"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 38, "end_line": 38}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "callee": "m.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ed05273d987c6a96e70a93cd0b5f11cc5adc1c8adcc7aa0a59e7c258c10902d8"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 39, "end_line": 39}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "callee": "_approx_tokens_for_text"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:001aa995f6ab8de6603307a883a069b2f41bb4db12a2a7d139df6834112663e0"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 39, "end_line": 39}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "callee": "str"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:001aa995f6ab8de6603307a883a069b2f41bb4db12a2a7d139df6834112663e0"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 53, "end_line": 53}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "callee": "_approx_tokens_for_messages"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:051c8e18018287fbdff71ff2e12f84dfd5c8e6ed4ec2843ee0536b5aa802a5c6"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 69, "end_line": 69}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "estimate_tokens"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c7027696cfca80be127fa1aa952f98c80f30b90b8c744ea76a6913268586ebab"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 71, "end_line": 71}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "estimate_tokens"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:44c19292a55fe604a9a711b03dc696d6d2e71c67cea8db0d3f577d88a3e46a2c"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 81, "end_line": 81}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "reversed"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:3d36942c71a17de1664a512596dc851a5975778e84713d1a524c46506df6a250"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 82, "end_line": 82}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "str"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:6d60680116fae495db572e3aff2e01c3c207296d41de3450dac85e7c4a88473d"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 82, "end_line": 82}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "m.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:6d60680116fae495db572e3aff2e01c3c207296d41de3450dac85e7c4a88473d"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 83, "end_line": 83}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "_approx_tokens_for_text"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:7eb104933f75ad04b2efbd6900faaac51322eae259cb11b973ac937e0ac7b7d6"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 85, "end_line": 85}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "remaining.append"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:c1eba242b21ea98428e6acb539cdfc3ad43827448a4aabb3dc7085689aa98b29"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 93, "end_line": 93}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "remaining.append"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:9ec451508be95427fd89774134919f42c754496558bf0b0c6793d77770a5c485"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 93, "end_line": 93}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "m.get"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:9ec451508be95427fd89774134919f42c754496558bf0b0c6793d77770a5c485"}
{"schema": "scanner.record.v1", "kind": "ast.call", "scope": "edge", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 98, "end_line": 98}, "data": {"caller_name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "callee": "remaining.reverse"}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ec35daad581d63e9e689c6c8ea312d5690bda3e7559636a102b10a40654c33f4"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 19, "end_line": 29}, "data": {"owner": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text", "owner_kind": "function", "doc": "\n    Very rough token estimator:\n      - ~4 chars per token for English code/text blend (common rule of thumb)\n    We round up to err on the safe side.\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ac4ddeb2875df71ee902d93ed3fdbcf809d0b9828f07ae22db5404c9e38dec87"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 32, "end_line": 42}, "data": {"owner": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages", "owner_kind": "function", "doc": "\n    Sum content token estimates across chat messages.\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ca52532eceea138dc7a8cbd34fcd0b7093377eb4b1408ce81de98308c5d55de5"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 47, "end_line": 53}, "data": {"owner": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens", "owner_kind": "function", "doc": "\n    Estimate tokens for a chat message list.\n    The `model` parameter is currently unused, but kept for compatibility\n    with more precise future model-specific tokenizers.\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:2be95afae2cfe4ec44aa279ba0c2549819f5be029810debeb3f7314d426c061f"}
{"schema": "scanner.record.v1", "kind": "ast.docstring", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "loc": {"line": 56, "end_line": 99}, "data": {"owner": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget", "owner_kind": "function", "doc": "\n    Clamp the messages to a rough token budget.\n\n    Returns:\n        (clamped_messages, estimated_tokens_after_clamp)\n    "}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:de3d2e07955a3067e2dbbd4568aae8a89a67f9a01d6e8ad806f994f378bf16f8"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_text"}, "data": {"loc": 11, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ebbc74d6d348312585a28bfa82e907efb44775507ae7b2f38fd28c41a3380dec"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.preflight.budget._approx_tokens_for_messages"}, "data": {"loc": 11, "arg_count": 1, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ebbc74d6d348312585a28bfa82e907efb44775507ae7b2f38fd28c41a3380dec"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.preflight.budget.estimate_tokens"}, "data": {"loc": 7, "arg_count": 2, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ebbc74d6d348312585a28bfa82e907efb44775507ae7b2f38fd28c41a3380dec"}
{"schema": "scanner.record.v1", "kind": "ast.symbol.metrics", "scope": "symbol", "path": "v2/backend/core/prompt_pipeline/preflight/budget.py", "symbol": {"name": "v2.backend.core.prompt_pipeline.preflight.budget.clamp_to_budget"}, "data": {"loc": 44, "arg_count": 3, "is_async": false}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:ebbc74d6d348312585a28bfa82e907efb44775507ae7b2f38fd28c41a3380dec"}
{"schema": "scanner.record.v1", "kind": "python.module.index", "scope": "file", "path": "v2/backend/core/run/__init__.py", "data": {"language": "python", "classes": [], "functions": [], "imports": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:e0e70bb753dabd26d100cdeed7325dc1ae8047d7a73deb754847b6c7c78efe2f"}
{"schema": "scanner.record.v1", "kind": "python.module.index", "scope": "file", "path": "v2/backend/core/run/docstrings.py", "data": {"language": "python", "classes": [], "functions": ["v2.backend.core.run.docstrings._ensure_dir", "v2.backend.core.run.docstrings._write_json", "v2.backend.core.run.docstrings._project_root", "v2.backend.core.run.docstrings._load_vars", "v2.backend.core.run.docstrings._now_token", "v2.backend.core.run.docstrings._import_callable", "v2.backend.core.run.docstrings._bootstrap_spine", "v2.backend.core.run.docstrings._arts_list", "v2.backend.core.run.docstrings._unwrap_meta", "v2.backend.core.run.docstrings._ensure_list_of_dicts", "v2.backend.core.run.docstrings._get", "v2.backend.core.run.docstrings._get_items", "v2.backend.core.run.docstrings._get_messages_and_batch", "v2.backend.core.run.docstrings._spine_run", "v2.backend.core.run.docstrings._normalize_record", "v2.backend.core.run.docstrings._normalize_records", "v2.backend.core.run.docstrings._normalize_enriched_item", "v2.backend.core.run.docstrings._normalize_enriched", "v2.backend.core.run.docstrings.main"], "imports": ["__future__", "datetime", "importlib", "json", "pathlib", "sys", "typing", "v2.backend.core.spine.registry", "yaml"]}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:b5c34db73e050001e254e8b079fa9e8b3f6f11859d7ee560ef587c47109a569b"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/run/docstrings.py", "loc": {"line": 10, "end_line": 10}, "symbol": {"name": "v2.backend.core.run.docstrings._ensure_dir", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:0474a90ba681b8dbde48e857c8eec51611440e2fd4437d856c326f3069778dd2"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/run/docstrings.py", "loc": {"line": 11, "end_line": 16}, "symbol": {"name": "v2.backend.core.run.docstrings._write_json", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:48433a44615fabf03c0cbbf8f19bfaa4d9564379b4f3e4b88362a866426612f6"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/run/docstrings.py", "loc": {"line": 18, "end_line": 23}, "symbol": {"name": "v2.backend.core.run.docstrings._project_root", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:25374f147fadaf71691c33e802d3c4f1f9c5271c17950dd6a013ed7b37a22528"}
{"schema": "scanner.record.v1", "kind": "ast.symbol", "scope": "symbol", "path": "v2/backend/core/run/docstrings.py", "loc": {"line": 25, "end_line": 28}, "symbol": {"name": "v2.backend.core.run.docstrings._load_vars", "kind": "function"}, "data": {"decorators": []}, "scanner": {"name": "v2.backend.core.utils.code_bundles.code_bundles.src.packager.scanners.python.python_index.index_python_file", "version": "unknown"}, "detected_at": "2025-09-07T23:29:28.181260+00:00", "status": {"ok": true, "parse_error": false, "suppressed": false, "reason": null}, "fp": "sha256:2d3631fc28e31b7b5ba49795aa733c55b0ebb0a8134f08ddc6de6f1ecc09982e"}
