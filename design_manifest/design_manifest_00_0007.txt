{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "name": "v2.backend.core.prompt_pipeline.executor.errors.ProviderError", "bases": ["PipelineError"], "decorators": [], "lineno": 25, "end_lineno": 26}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "name": "v2.backend.core.prompt_pipeline.executor.errors.ValidationError", "bases": ["PipelineError"], "decorators": [], "lineno": 29, "end_lineno": 30}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "name": "v2.backend.core.prompt_pipeline.executor.errors.ProblemSpec", "bases": [], "decorators": ["dataclass"], "lineno": 36, "end_lineno": 40}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "name": "v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta", "decorators": [], "lineno": 43, "end_lineno": 55}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 2, "end_lineno": 2}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "from_module": "dataclasses", "name": "dataclass", "asname": null, "level": 0, "lineno": 11, "end_lineno": 11}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 12, "end_lineno": 12}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 12, "end_lineno": 12}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 12, "end_lineno": 12}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "caller_name": "v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta", "callee": "bool", "lineno": 52, "end_lineno": 52}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "caller_name": "v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta", "callee": "dict", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "owner": "v2.backend.core.prompt_pipeline.executor.errors.PipelineError", "owner_kind": "class", "doc": "Base class for pipeline-related errors.", "lineno": 17, "end_lineno": 18}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "owner": "v2.backend.core.prompt_pipeline.executor.errors.CapabilityError", "owner_kind": "class", "doc": "Raised when a Spine capability is missing or fails.", "lineno": 21, "end_lineno": 22}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "owner": "v2.backend.core.prompt_pipeline.executor.errors.ProviderError", "owner_kind": "class", "doc": "Raised when an underlying provider (LLM, DB, etc.) fails.", "lineno": 25, "end_lineno": 26}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "owner": "v2.backend.core.prompt_pipeline.executor.errors.ValidationError", "owner_kind": "class", "doc": "Raised when inputs/outputs violate expected shapes.", "lineno": 29, "end_lineno": 30}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "owner": "v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta", "owner_kind": "function", "doc": "\n    Convert a ProblemSpec to a canonical 'problem' meta mapping that matches\n    the Spine Problem artifact expectation (no imports required).\n    ", "lineno": 43, "end_lineno": 55}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/errors.py", "module": "v2.backend.core.prompt_pipeline.executor.errors", "name": "v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta", "loc": 13, "arg_count": 1, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded", "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list", "v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact", "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run"], "imports": ["__future__", "importlib", "traceback", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded", "decorators": [], "lineno": 23, "end_lineno": 37}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "decorators": [], "lineno": 42, "end_lineno": 87}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list", "decorators": [], "lineno": 92, "end_lineno": 100}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact", "decorators": [], "lineno": 103, "end_lineno": 117}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "decorators": [], "lineno": 122, "end_lineno": 152}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 12, "end_lineno": 12}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "traceback", "asname": null, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "from_module": "importlib", "name": "import_module", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "from_module": "typing", "name": "Callable", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "from_module": "typing", "name": "Tuple", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded", "callee": "import_module", "lineno": 30, "end_lineno": 30}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded", "callee": "getattr", "lineno": 32, "end_lineno": 32}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded", "callee": "getattr", "lineno": 32, "end_lineno": 32}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "import_module", "lineno": 49, "end_lineno": 49}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 51, "end_lineno": 51}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "callable", "lineno": 52, "end_lineno": 52}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 54, "end_lineno": 54}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "callable", "lineno": 55, "end_lineno": 55}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 59, "end_lineno": 59}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 61, "end_lineno": 61}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "callable", "lineno": 62, "end_lineno": 62}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "import_module", "lineno": 69, "end_lineno": 69}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 70, "end_lineno": 70}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "callable", "lineno": 71, "end_lineno": 71}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 74, "end_lineno": 74}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "callable", "lineno": 75, "end_lineno": 75}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 75, "end_lineno": 75}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 76, "end_lineno": 76}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 78, "end_lineno": 78}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "callable", "lineno": 79, "end_lineno": 79}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "get_reg", "lineno": 80, "end_lineno": 80}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "getattr", "lineno": 81, "end_lineno": 81}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "callee": "callable", "lineno": 82, "end_lineno": 82}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list", "callee": "isinstance", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list", "callee": "isinstance", "lineno": 98, "end_lineno": 98}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list", "callee": "list", "lineno": 99, "end_lineno": 99}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact", "callee": "repr", "lineno": 110, "end_lineno": 110}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact", "callee": "traceback.format_exc", "lineno": 111, "end_lineno": 111}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "_ensure_caps_loaded", "lineno": 133, "end_lineno": 133}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "_resolve_runner", "lineno": 134, "end_lineno": 134}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "_problem_artifact", "lineno": 136, "end_lineno": 136}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "_to_artifacts_list", "lineno": 140, "end_lineno": 140}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "runner", "lineno": 140, "end_lineno": 140}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "_to_artifacts_list", "lineno": 144, "end_lineno": 144}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "runner", "lineno": 144, "end_lineno": 144}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "_to_artifacts_list", "lineno": 148, "end_lineno": 148}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "runner", "lineno": 148, "end_lineno": 148}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "_problem_artifact", "lineno": 150, "end_lineno": 150}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "caller_name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "callee": "_problem_artifact", "lineno": 152, "end_lineno": 152}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "owner": "v2.backend.core.prompt_pipeline.executor.orchestrator", "owner_kind": "module", "doc": "\nOrchestrator: thin wrapper around the Spine capability registry.\n\n- Expose `capability_run(name, payload, context=None)`.\n- Resolve a runner from the Spine layer (robust to package-level name shadowing).\n- Lazily load capabilities from config/spine/capabilities.yml on first use.\n- Normalize provider return types to a list.\n- **Hardened**: convert *any* provider exception into a structured Problem artifact.\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "owner": "v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded", "owner_kind": "function", "doc": "Load capabilities into the Spine registry (once) from the YAML map.", "lineno": 23, "end_lineno": 37}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "owner": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "owner_kind": "function", "doc": "\n    Locate a callable runner. Be robust to package-level name shadowing by\n    importing the *modules* directly instead of `from package import registry`.\n    ", "lineno": 42, "end_lineno": 87}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "owner": "v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list", "owner_kind": "function", "doc": "Coerce any provider result into a list.", "lineno": 92, "end_lineno": 100}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "owner": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "owner_kind": "function", "doc": "\n    Execute a Spine capability by name and normalize the result into a list.\n\n    Retry only on TypeError (signature mismatch); **catch any other Exception**\n    and turn it into a Problem artifact so callers never fail silently.\n    ", "lineno": 122, "end_lineno": 152}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded", "loc": 15, "arg_count": 0, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner", "loc": 46, "arg_count": 0, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list", "loc": 9, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact", "loc": 15, "arg_count": 4, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/orchestrator.py", "module": "v2.backend.core.prompt_pipeline.executor.orchestrator", "name": "v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run", "loc": 31, "arg_count": 3, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "classes": ["v2.backend.core.prompt_pipeline.executor.plugin_api.Item", "v2.backend.core.prompt_pipeline.executor.plugin_api.Result", "v2.backend.core.prompt_pipeline.executor.plugin_api.Batch"], "functions": ["v2.backend.core.prompt_pipeline.executor.plugin_api.v2.backend.core.prompt_pipeline.executor.plugin_api.Result.as_dict"], "imports": ["__future__", "dataclasses", "typing"]}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "name": "v2.backend.core.prompt_pipeline.executor.plugin_api.Item", "bases": [], "decorators": ["dataclass"], "lineno": 20, "end_lineno": 26}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "name": "v2.backend.core.prompt_pipeline.executor.plugin_api.Result", "bases": [], "decorators": ["dataclass"], "lineno": 30, "end_lineno": 50}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "name": "v2.backend.core.prompt_pipeline.executor.plugin_api.v2.backend.core.prompt_pipeline.executor.plugin_api.Result.as_dict", "decorators": [], "lineno": 45, "end_lineno": 50}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "name": "v2.backend.core.prompt_pipeline.executor.plugin_api.Batch", "bases": [], "decorators": ["dataclass"], "lineno": 54, "end_lineno": 57}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "from_module": "dataclasses", "name": "dataclass", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "from_module": "dataclasses", "name": "field", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "caller_name": "v2.backend.core.prompt_pipeline.executor.plugin_api.Item", "callee": "field", "lineno": 26, "end_lineno": 26}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "caller_name": "v2.backend.core.prompt_pipeline.executor.plugin_api.Result", "callee": "field", "lineno": 40, "end_lineno": 40}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "caller_name": "v2.backend.core.prompt_pipeline.executor.plugin_api.v2.backend.core.prompt_pipeline.executor.plugin_api.Result.as_dict", "callee": "dict", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "caller_name": "v2.backend.core.prompt_pipeline.executor.plugin_api.Batch", "callee": "field", "lineno": 57, "end_lineno": 57}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "owner": "v2.backend.core.prompt_pipeline.executor.plugin_api", "owner_kind": "module", "doc": "\nPlugin-facing dataclasses and types for the general-purpose prompt pipeline.\n\nThis module MUST remain domain-agnostic. Adapters can attach domain-specific\ndata inside the generic `meta` mapping.\n\nBackward compatibility:\n- `new_docstring` remains as an optional legacy field for older adapters.\n  New code should use `result` instead.\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "owner": "v2.backend.core.prompt_pipeline.executor.plugin_api.Result", "owner_kind": "class", "doc": "\n    Generic result from LLM/adapters.\n\n    - `result` holds the primary textual output (domain-agnostic).\n    - `meta` can hold any extra structured fields the adapter wants to pass.\n    - `new_docstring` is retained for legacy consumers (deprecated).\n    ", "lineno": 30, "end_lineno": 50}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/plugin_api.py", "module": "v2.backend.core.prompt_pipeline.executor.plugin_api", "name": "v2.backend.core.prompt_pipeline.executor.plugin_api.v2.backend.core.prompt_pipeline.executor.plugin_api.Result.as_dict", "loc": 6, "arg_count": 1, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt", "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "v2.backend.core.prompt_pipeline.executor.prompts.to_messages", "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance", "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages"], "imports": ["__future__", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt", "decorators": [], "lineno": 18, "end_lineno": 33}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "decorators": [], "lineno": 36, "end_lineno": 59}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.to_messages", "decorators": [], "lineno": 62, "end_lineno": 71}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "decorators": [], "lineno": 74, "end_lineno": 98}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance", "decorators": [], "lineno": 103, "end_lineno": 111}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "decorators": [], "lineno": 114, "end_lineno": 144}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 2, "end_lineno": 2}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "from_module": "typing", "name": "Iterable", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "from_module": "typing", "name": "Sequence", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt", "callee": "base.extend", "lineno": 32, "end_lineno": 32}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt", "callee": "str", "lineno": 32, "end_lineno": 32}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt", "callee": "Constant.join", "lineno": 33, "end_lineno": 33}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "str.strip", "lineno": 50, "end_lineno": 50}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "str", "lineno": 50, "end_lineno": 50}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "lines.append", "lineno": 52, "end_lineno": 52}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "lines.append", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "str.strip", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "str", "lineno": 53, "end_lineno": 53}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "lines.append", "lineno": 55, "end_lineno": 55}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "lines.append", "lineno": 56, "end_lineno": 56}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "inputs.items", "lineno": 57, "end_lineno": 57}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "lines.append", "lineno": 58, "end_lineno": 58}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "Constant.join.strip", "lineno": 59, "end_lineno": 59}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "callee": "Constant.join", "lineno": 59, "end_lineno": 59}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.to_messages", "callee": "msgs.append", "lineno": 68, "end_lineno": 68}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.to_messages", "callee": "str", "lineno": 68, "end_lineno": 68}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.to_messages", "callee": "msgs.append", "lineno": 70, "end_lineno": 70}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.to_messages", "callee": "str", "lineno": 70, "end_lineno": 70}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "isinstance", "lineno": 82, "end_lineno": 82}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "isinstance", "lineno": 85, "end_lineno": 85}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "out.append", "lineno": 86, "end_lineno": 86}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "str", "lineno": 86, "end_lineno": 86}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "str", "lineno": 86, "end_lineno": 86}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "isinstance", "lineno": 89, "end_lineno": 89}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "messages.get", "lineno": 90, "end_lineno": 90}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "messages.get", "lineno": 91, "end_lineno": 91}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "to_messages", "lineno": 92, "end_lineno": 92}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "isinstance", "lineno": 94, "end_lineno": 94}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "len", "lineno": 94, "end_lineno": 94}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "callee": "to_messages", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance", "callee": "BoolOp.rstrip", "lineno": 111, "end_lineno": 111}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "sum", "lineno": 123, "end_lineno": 123}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "len", "lineno": 123, "end_lineno": 123}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "m.get", "lineno": 123, "end_lineno": 123}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "reversed", "lineno": 130, "end_lineno": 130}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "m.get", "lineno": 131, "end_lineno": 131}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "len", "lineno": 132, "end_lineno": 132}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "trimmed.append", "lineno": 133, "end_lineno": 133}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "len", "lineno": 134, "end_lineno": 134}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "trimmed.append", "lineno": 139, "end_lineno": 139}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "m.get", "lineno": 139, "end_lineno": 139}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "list", "lineno": 144, "end_lineno": 144}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "caller_name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "callee": "reversed", "lineno": 144, "end_lineno": 144}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "owner": "v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt", "owner_kind": "function", "doc": "\n    Build a conservative system prompt describing the assistant role.\n    ", "lineno": 18, "end_lineno": 33}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "owner": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "owner_kind": "function", "doc": "\n    Build a neutral user prompt body.\n\n    Args:\n        task: one-line description of what to produce.\n        guidance: optional instructions about format/constraints.\n        inputs: optional key/value inputs to echo for context.\n    ", "lineno": 36, "end_lineno": 59}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "owner": "v2.backend.core.prompt_pipeline.executor.prompts.to_messages", "owner_kind": "function", "doc": "\n    Convert simple system/user strings into chat message list shape.\n    ", "lineno": 62, "end_lineno": 71}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "owner": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "owner_kind": "function", "doc": "\n    Best-effort normalization to `[{\"role\": \"...\", \"content\": \"...\"}]`.\n    Accepts:\n      - list of dicts with role/content\n      - {\"system\": \"...\", \"user\": \"...\"} mapping\n      - tuple/list with two strings (system, user)\n    ", "lineno": 74, "end_lineno": 98}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "owner": "v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance", "owner_kind": "function", "doc": "\n    Append minimal guidance to return a deterministic JSON object with 'items'.\n    ", "lineno": 103, "end_lineno": 111}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "owner": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "owner_kind": "function", "doc": "\n    Clamp total characters across all message contents to avoid oversized payloads.\n    Keeps as much of the tail (user) content as possible.\n    ", "lineno": 114, "end_lineno": 144}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt", "loc": 16, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt", "loc": 24, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.to_messages", "loc": 10, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages", "loc": 25, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance", "loc": 9, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/prompts.py", "module": "v2.backend.core.prompt_pipeline.executor.prompts", "name": "v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages", "loc": 31, "arg_count": 2, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "classes": ["v2.backend.core.prompt_pipeline.executor.providers._Item"], "functions": ["v2.backend.core.prompt_pipeline.executor.providers._as_posix", "v2.backend.core.prompt_pipeline.executor.providers._rel", "v2.backend.core.prompt_pipeline.executor.providers._is_excluded", "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1", "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce"], "imports": ["__future__", "dataclasses", "fnmatch", "json", "os", "pathlib", "typing", "v2.backend.core.prompt_pipeline.llm.response_parser"]}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers._Item", "bases": [], "decorators": ["dataclass"], "lineno": 24, "end_lineno": 30}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers._as_posix", "decorators": [], "lineno": 33, "end_lineno": 39}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "decorators": [], "lineno": 42, "end_lineno": 49}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers._is_excluded", "decorators": [], "lineno": 52, "end_lineno": 60}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "decorators": [], "lineno": 66, "end_lineno": 134}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1", "decorators": [], "lineno": 137, "end_lineno": 175}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "decorators": [], "lineno": 151, "end_lineno": 172}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 11, "end_lineno": 11}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "from_module": "dataclasses", "name": "dataclass", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "from_module": "pathlib", "name": "Path", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "from_module": "typing", "name": "Sequence", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "fnmatch", "asname": null, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "os", "asname": null, "lineno": 17, "end_lineno": 17}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "json", "asname": "_json", "lineno": 167, "end_lineno": 167}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "from_module": "v2.backend.core.prompt_pipeline.llm.response_parser", "name": "parse_json_response", "asname": null, "level": 0, "lineno": 168, "end_lineno": 168}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._as_posix", "callee": "str", "lineno": 37, "end_lineno": 37}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._as_posix", "callee": "Path.as_posix", "lineno": 37, "end_lineno": 37}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._as_posix", "callee": "Path", "lineno": 37, "end_lineno": 37}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "callee": "str", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "callee": "Path.resolve.relative_to.as_posix", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "callee": "Path.resolve.relative_to", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "callee": "Path.resolve", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "callee": "Path", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "callee": "Path.resolve", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "callee": "Path", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "callee": "_as_posix", "lineno": 49, "end_lineno": 49}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers._is_excluded", "callee": "fnmatch.fnmatchcase", "lineno": 58, "end_lineno": 58}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "getattr", "lineno": 93, "end_lineno": 93}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "payload.update", "lineno": 94, "end_lineno": 94}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "payload.get", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "payload.get", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "os.getcwd", "lineno": 96, "end_lineno": 96}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "list", "lineno": 97, "end_lineno": 97}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "payload.get", "lineno": 97, "end_lineno": 97}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "list", "lineno": 98, "end_lineno": 98}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "payload.get", "lineno": 98, "end_lineno": 98}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "payload.get", "lineno": 98, "end_lineno": 98}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "str", "lineno": 102, "end_lineno": 102}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 102, "end_lineno": 102}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 102, "end_lineno": 102}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 102, "end_lineno": 102}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 104, "end_lineno": 104}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 104, "end_lineno": 104}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 104, "end_lineno": 104}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "_as_posix", "lineno": 105, "end_lineno": 105}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 106, "end_lineno": 106}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "_rel", "lineno": 106, "end_lineno": 106}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "str", "lineno": 106, "end_lineno": 106}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "_is_excluded", "lineno": 108, "end_lineno": 108}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "_Item", "lineno": 111, "end_lineno": 118}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 115, "end_lineno": 115}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 116, "end_lineno": 116}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 116, "end_lineno": 116}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "r.get", "lineno": 117, "end_lineno": 117}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "items.append", "lineno": 120, "end_lineno": 129}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "callee": "_as_posix", "lineno": 123, "end_lineno": 123}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1", "callee": "getattr", "lineno": 148, "end_lineno": 148}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1", "callee": "payload.update", "lineno": 149, "end_lineno": 149}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 154, "end_lineno": 154}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 155, "end_lineno": 155}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 156, "end_lineno": 156}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 157, "end_lineno": 157}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "obj.get", "lineno": 157, "end_lineno": 157}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 158, "end_lineno": 158}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 159, "end_lineno": 159}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "obj.get", "lineno": 159, "end_lineno": 159}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 160, "end_lineno": 160}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 161, "end_lineno": 161}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "obj.get", "lineno": 161, "end_lineno": 161}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "_coerce", "lineno": 162, "end_lineno": 162}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 163, "end_lineno": 163}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "obj.get", "lineno": 163, "end_lineno": 163}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 166, "end_lineno": 166}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "isinstance", "lineno": 166, "end_lineno": 166}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "first.get.get", "lineno": 166, "end_lineno": 166}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "first.get", "lineno": 166, "end_lineno": 166}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "parse_json_response", "lineno": 170, "end_lineno": 170}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "callee": "_coerce", "lineno": 171, "end_lineno": 171}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "caller_name": "v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1", "callee": "_coerce", "lineno": 174, "end_lineno": 174}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "owner": "v2.backend.core.prompt_pipeline.executor.providers", "owner_kind": "module", "doc": " Generic providers for executor-stage capabilities.\n\nThis module must remain domain-agnostic. It turns DB/introspection records into\ngeneric pipeline \"items\" the engine can pass to domain adapters via Spine.\n\nCapabilities implemented here:\n  - retriever.enrich.v1 -> enrich_v1\n  - results.unpack.v1   -> unpack_results_v1\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "owner": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "owner_kind": "function", "doc": "Build generic items from introspection records.\n\n    Payload (task.payload + kwargs):\n    {\n      \"root\": \"\",\n      \"project_root\": \"\",        # optional; defaults to CWD\n      \"records\": [ {...}, ... ], # rows from introspect.fetch\n      \"exclude_globs\": [\"output/**\", ...],\n      \"segment_excludes\": [\"**/__pycache__/**\", ...]  # alias of exclude_globs\n    }\n\n    Returns:\n    {\n      \"items\": [\n        {\n          \"id\": \"\",\n          \"path\": \"\",\n          \"relpath\": \"\",\n          \"signature\": \"\",\n          \"lang\": \"\",\n          \"context\": { ... }  # passthrough extras\n        },\n        ...\n      ]\n    }\n    ", "lineno": 66, "end_lineno": 134}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "owner": "v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1", "owner_kind": "function", "doc": "Domain-agnostic 'unpack' that normalizes various result wrappers into {\"items\":[...]}.\n\n    Payload accepts any of:\n      - {\"items\":[...]}\n      - {\"results\":[...]}\n      - {\"result\":{\"items\":[...]}}\n      - {\"choices\":[...]}  # raw LLM envelope (best-effort fallback)\n\n    Returns: {\"items\":[ ...dict... ]}\n    ", "lineno": 137, "end_lineno": 175}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers._as_posix", "loc": 7, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers._rel", "loc": 8, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers._is_excluded", "loc": 9, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers.enrich_v1", "loc": 69, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1", "loc": 39, "arg_count": 3, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/providers.py", "module": "v2.backend.core.prompt_pipeline.executor.providers", "name": "v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce", "loc": 22, "arg_count": 1, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "classes": ["v2.backend.core.prompt_pipeline.executor.retriever.Record"], "functions": ["v2.backend.core.prompt_pipeline.executor.retriever.normalize_record"], "imports": ["__future__", "dataclasses", "pathlib", "typing"]}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "name": "v2.backend.core.prompt_pipeline.executor.retriever.Record", "bases": [], "decorators": ["dataclass"], "lineno": 18, "end_lineno": 24}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "decorators": [], "lineno": 27, "end_lineno": 50}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 10, "end_lineno": 10}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "from_module": "dataclasses", "name": "dataclass", "asname": null, "level": 0, "lineno": 12, "end_lineno": 12}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "from_module": "pathlib", "name": "Path", "asname": null, "level": 0, "lineno": 13, "end_lineno": 13}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 14, "end_lineno": 14}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "str", "lineno": 34, "end_lineno": 34}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "r.get", "lineno": 34, "end_lineno": 34}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "r.get", "lineno": 34, "end_lineno": 34}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "r.get", "lineno": 34, "end_lineno": 34}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "r.get", "lineno": 35, "end_lineno": 35}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "r.get", "lineno": 36, "end_lineno": 36}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "str", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "Path.resolve.relative_to.as_posix", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "Path.resolve.relative_to", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "Path.resolve", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "Path", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "Path.resolve", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "Path", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "str", "lineno": 41, "end_lineno": 41}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "Path.as_posix", "lineno": 41, "end_lineno": 41}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "Path", "lineno": 41, "end_lineno": 41}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "r.get", "lineno": 47, "end_lineno": 47}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "r.get", "lineno": 48, "end_lineno": 48}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "r.get", "lineno": 48, "end_lineno": 48}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "caller_name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "callee": "r.get", "lineno": 49, "end_lineno": 49}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "owner": "v2.backend.core.prompt_pipeline.executor.retriever", "owner_kind": "module", "doc": "\nGeneric retrieval helpers (domain-agnostic).\n\nNOTE: The engine calls the Spine capability `retriever.enrich.v1` implemented\nin `executor.providers:enrich_v1`. This module contains optional helpers for\nfuture use and remains neutral.\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "owner": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "owner_kind": "function", "doc": "\n    Convert an introspection record into a neutral item dict.\n\n    Keeps only portable fields:\n      - id, path, relpath, signature, lang, context\n    ", "lineno": 27, "end_lineno": 50}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/retriever.py", "module": "v2.backend.core.prompt_pipeline.executor.retriever", "name": "v2.backend.core.prompt_pipeline.executor.retriever.normalize_record", "loc": 24, "arg_count": 2, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.executor.sources._payload_of", "v2.backend.core.prompt_pipeline.executor.sources._as_list", "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1"], "imports": ["__future__", "contextlib", "sqlalchemy", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "decorators": [], "lineno": 34, "end_lineno": 43}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources._as_list", "decorators": [], "lineno": 46, "end_lineno": 51}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "decorators": [], "lineno": 54, "end_lineno": 86}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "decorators": [], "lineno": 89, "end_lineno": 127}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "decorators": [], "lineno": 133, "end_lineno": 261}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 16, "end_lineno": 16}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "typing", "name": "Iterable", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "typing", "name": "Sequence", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "typing", "name": "Tuple", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "contextlib", "asname": null, "lineno": 20, "end_lineno": 20}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "sqlalchemy", "name": "create_engine", "asname": null, "level": 0, "lineno": 24, "end_lineno": 24}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "sqlalchemy", "name": "text", "asname": null, "level": 0, "lineno": 24, "end_lineno": 24}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "from_module": "sqlalchemy", "name": "inspect", "asname": null, "level": 0, "lineno": 24, "end_lineno": 24}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "callee": "hasattr", "lineno": 36, "end_lineno": 36}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "callee": "isinstance", "lineno": 36, "end_lineno": 36}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "callee": "getattr", "lineno": 36, "end_lineno": 36}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "callee": "dict", "lineno": 37, "end_lineno": 37}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "callee": "isinstance", "lineno": 38, "end_lineno": 38}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "callee": "dict", "lineno": 39, "end_lineno": 39}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "callee": "base.update", "lineno": 42, "end_lineno": 42}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._as_list", "callee": "isinstance", "lineno": 49, "end_lineno": 49}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._as_list", "callee": "list", "lineno": 50, "end_lineno": 50}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "inspect", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "insp.get_columns", "lineno": 64, "end_lineno": 64}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "isinstance", "lineno": 65, "end_lineno": 65}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "c.get", "lineno": 67, "end_lineno": 67}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "isinstance", "lineno": 68, "end_lineno": 68}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "cols.append", "lineno": 69, "end_lineno": 69}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "engine.connect", "lineno": 77, "end_lineno": 77}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "conn.execute", "lineno": 78, "end_lineno": 78}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "text", "lineno": 78, "end_lineno": 78}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "len", "lineno": 81, "end_lineno": 81}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "isinstance", "lineno": 82, "end_lineno": 82}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "callee": "cols.append", "lineno": 83, "end_lineno": 83}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "set", "lineno": 99, "end_lineno": 99}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "select_parts.append", "lineno": 111, "end_lineno": 111}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "output_cols.append", "lineno": 112, "end_lineno": 112}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "select_parts.append", "lineno": 114, "end_lineno": 114}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "output_cols.append", "lineno": 115, "end_lineno": 115}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "set", "lineno": 118, "end_lineno": 118}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "select_parts.append", "lineno": 123, "end_lineno": 123}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "output_cols.append", "lineno": 124, "end_lineno": 124}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "seen.add", "lineno": 125, "end_lineno": 125}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "callee": "Constant.join", "lineno": 127, "end_lineno": 127}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "_payload_of", "lineno": 148, "end_lineno": 148}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "payload.get", "lineno": 149, "end_lineno": 149}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "payload.get", "lineno": 150, "end_lineno": 150}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "payload.get", "lineno": 151, "end_lineno": 151}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "_as_list", "lineno": 152, "end_lineno": 152}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "payload.get", "lineno": 152, "end_lineno": 152}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "int", "lineno": 153, "end_lineno": 153}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "payload.get", "lineno": 153, "end_lineno": 153}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "_as_list", "lineno": 177, "end_lineno": 177}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "payload.get", "lineno": 177, "end_lineno": 177}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "contextlib.ExitStack", "lineno": 194, "end_lineno": 194}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "create_engine", "lineno": 195, "end_lineno": 195}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "stack.enter_context", "lineno": 196, "end_lineno": 196}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "engine.connect", "lineno": 196, "end_lineno": 196}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "_discover_columns", "lineno": 199, "end_lineno": 199}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "_make_select_columns", "lineno": 200, "end_lineno": 200}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "where_clauses.append", "lineno": 207, "end_lineno": 207}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "enumerate", "lineno": 212, "end_lineno": 212}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "keys.append", "lineno": 214, "end_lineno": 214}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "where_clauses.append", "lineno": 216, "end_lineno": 216}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "Constant.join", "lineno": 216, "end_lineno": 216}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "Constant.join", "lineno": 218, "end_lineno": 218}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "conn.execute", "lineno": 226, "end_lineno": 226}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "text", "lineno": 226, "end_lineno": 226}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "res.mappings", "lineno": 229, "end_lineno": 229}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "dict", "lineno": 237, "end_lineno": 237}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "isinstance", "lineno": 240, "end_lineno": 240}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "enumerate", "lineno": 241, "end_lineno": 241}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "len", "lineno": 241, "end_lineno": 241}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "isinstance", "lineno": 243, "end_lineno": 243}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "list", "lineno": 243, "end_lineno": 243}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "rec.get", "lineno": 246, "end_lineno": 246}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "rec.get", "lineno": 249, "end_lineno": 249}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "rec.get", "lineno": 249, "end_lineno": 249}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "rec.get", "lineno": 249, "end_lineno": 249}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "records.append", "lineno": 250, "end_lineno": 250}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "caller_name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "callee": "len", "lineno": 261, "end_lineno": 261}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "owner": "v2.backend.core.prompt_pipeline.executor.sources", "owner_kind": "module", "doc": "\nGeneric data sources for the prompt pipeline.\n\nCapability implemented here:\n  - introspect.fetch.v1  -> fetch_v1\n\nThis provider MUST be domain-agnostic. It simply pulls rows from a DB table\naccording to the payload parameters and returns a normalized shape:\n\n  {\"records\": [ {<row>...}, ... ], \"count\": <int>}\n\nOn error, it still returns {\"records\": []} and includes an \"error\" message.\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "owner": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "owner_kind": "function", "doc": "Extract a dict payload from either a Task-like (.payload) or a dict.", "lineno": 34, "end_lineno": 43}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "owner": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "owner_kind": "function", "doc": "\n    Return the actual column names for `table`, best-effort.\n    Uses SQLAlchemy inspector; if unavailable or fails, tries SQLite PRAGMA.\n    ", "lineno": 54, "end_lineno": 86}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "owner": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "owner_kind": "function", "doc": "\n    Build the SELECT columns clause from requested vs actual.\n\n    - Keep only intersection of requested∩actual\n    - If intersection is empty, return \"*\" (SELECT all)\n    - If 'filepath' is not present but 'file' is, alias it as \"file AS filepath\"\n    Returns (select_clause, output_columns) where output_columns are the keys that will\n    appear in each record dict (post-normalization).\n    ", "lineno": 89, "end_lineno": 127}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "owner": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "owner_kind": "function", "doc": "\n    Fetch rows from a SQL table.\n\n    Expected payload keys (all optional except sqlalchemy_url/sqlalchemy_table):\n      sqlalchemy_url: \"sqlite:///path/to/db.sqlite\"\n      sqlalchemy_table: \"introspection_index\"\n      status: \"todo\"                        # optional single status filter\n      status_any: [\"todo\", \"active\"]        # optional multi-status filter\n      max_rows: 50                          # limit\n      columns: [\"id\",\"filepath\",\"name\",...] # optional explicit column list\n\n    Returns:\n      {\"records\":[{...},{...}], \"count\": N}\n    ", "lineno": 133, "end_lineno": 261}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources._payload_of", "loc": 10, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources._as_list", "loc": 6, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources._discover_columns", "loc": 33, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources._make_select_columns", "loc": 39, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/sources.py", "module": "v2.backend.core.prompt_pipeline.executor.sources", "name": "v2.backend.core.prompt_pipeline.executor.sources.fetch_v1", "loc": 129, "arg_count": 3, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "classes": ["v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep", "v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep"], "functions": ["v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt", "v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt", "v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep.run", "v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep.run"], "imports": ["__future__", "dataclasses", "typing"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt", "decorators": [], "lineno": 23, "end_lineno": 33}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt", "decorators": [], "lineno": 36, "end_lineno": 46}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep", "bases": [], "decorators": ["dataclass"], "lineno": 52, "end_lineno": 64}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep.run", "decorators": [], "lineno": 60, "end_lineno": 64}
{"record_type": "ast.symbol", "kind": "class", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep", "bases": [], "decorators": ["dataclass"], "lineno": 68, "end_lineno": 80}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep.run", "decorators": [], "lineno": 76, "end_lineno": 80}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 15, "end_lineno": 15}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "from_module": "dataclasses", "name": "dataclass", "asname": null, "level": 0, "lineno": 17, "end_lineno": 17}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 18, "end_lineno": 18}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "caller_name": "v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt", "callee": "meta.get", "lineno": 28, "end_lineno": 28}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "caller_name": "v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt", "callee": "Constant.format", "lineno": 29, "end_lineno": 33}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "caller_name": "v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt", "callee": "ctx.get", "lineno": 41, "end_lineno": 41}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "caller_name": "v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt", "callee": "ctx.get", "lineno": 42, "end_lineno": 45}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "caller_name": "v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep.run", "callee": "isinstance", "lineno": 61, "end_lineno": 61}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "caller_name": "v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep.run", "callee": "isinstance", "lineno": 77, "end_lineno": 77}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "owner": "v2.backend.core.prompt_pipeline.executor.steps", "owner_kind": "module", "doc": "\nGeneric helper steps for the prompt pipeline.\n\nThis module is intentionally *domain-agnostic*. It avoids embedding any\ndomain-specific (e.g., docstrings) assumptions in prompts or payload shapes.\n\nNotes:\n- The main engine now delegates prompt/content building to adapters via Spine\n  (e.g., `prompts.build.v1`, `context.build`), so these helpers are optional.\n- We keep them as safe, neutral utilities to preserve import stability for any\n  legacy callers that still reference them.\n", "lineno": 1, "end_lineno": 1}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "owner": "v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt", "owner_kind": "function", "doc": "\n    Return a *generic* system prompt. Adapters should override via Spine.\n    ", "lineno": 23, "end_lineno": 33}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "owner": "v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt", "owner_kind": "function", "doc": "\n    Return a *generic* user prompt body. Adapters should override via Spine.\n    ", "lineno": 36, "end_lineno": 46}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "owner": "v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep", "owner_kind": "class", "doc": "\n    Legacy no-op context builder kept for compatibility.\n    The engine now calls `context.build` via Spine.\n    ", "lineno": 52, "end_lineno": 64}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "owner": "v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep", "owner_kind": "class", "doc": "\n    Legacy no-op unpack step kept for compatibility.\n    The engine now expects adapters (via Spine) to unpack domain-specific results.\n    ", "lineno": 68, "end_lineno": 80}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt", "loc": 11, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt", "loc": 11, "arg_count": 1, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep.run", "loc": 5, "arg_count": 2, "is_async": false}
{"record_type": "ast.symbol_metrics", "path": "v2/backend/core/prompt_pipeline/executor/steps.py", "module": "v2.backend.core.prompt_pipeline.executor.steps", "name": "v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep.run", "loc": 5, "arg_count": 2, "is_async": false}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/llm/__init__.py", "module": "v2.backend.core.prompt_pipeline.llm", "classes": [], "functions": [], "imports": []}
{"record_type": "ast.docstring", "path": "v2/backend/core/prompt_pipeline/llm/__init__.py", "module": "v2.backend.core.prompt_pipeline.llm", "owner": "v2.backend.core.prompt_pipeline.llm", "owner_kind": "module", "doc": "LLM client, router, schema, parser.", "lineno": 1, "end_lineno": 1}
{"record_type": "module_index", "language": "python", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "classes": [], "functions": ["v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "v2.backend.core.prompt_pipeline.llm.client._mock_items_json", "v2.backend.core.prompt_pipeline.llm.client._http_post_json", "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "v2.backend.core.prompt_pipeline.llm.client.complete", "v2.backend.core.prompt_pipeline.llm.client.run"], "imports": ["__future__", "json", "typing", "urllib.error", "urllib.request"]}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "decorators": [], "lineno": 27, "end_lineno": 37}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "decorators": [], "lineno": 40, "end_lineno": 55}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._mock_items_json", "decorators": [], "lineno": 58, "end_lineno": 64}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json", "decorators": [], "lineno": 67, "end_lineno": 71}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "decorators": [], "lineno": 76, "end_lineno": 110}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client.complete_v1", "decorators": [], "lineno": 115, "end_lineno": 140}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client.complete", "decorators": [], "lineno": 143, "end_lineno": 144}
{"record_type": "ast.symbol", "kind": "function", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "v2.backend.core.prompt_pipeline.llm.client.run", "decorators": [], "lineno": 147, "end_lineno": 148}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "from_module": "__future__", "name": "annotations", "asname": null, "level": 0, "lineno": 17, "end_lineno": 17}
{"record_type": "ast.xref", "kind": "import", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "name": "json", "asname": null, "lineno": 19, "end_lineno": 19}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "from_module": "typing", "name": "Any", "asname": null, "level": 0, "lineno": 20, "end_lineno": 20}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "from_module": "typing", "name": "Dict", "asname": null, "level": 0, "lineno": 20, "end_lineno": 20}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "from_module": "typing", "name": "List", "asname": null, "level": 0, "lineno": 20, "end_lineno": 20}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "from_module": "typing", "name": "Optional", "asname": null, "level": 0, "lineno": 20, "end_lineno": 20}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "from_module": "urllib.request", "name": "Request", "asname": null, "level": 0, "lineno": 21, "end_lineno": 21}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "from_module": "urllib.request", "name": "urlopen", "asname": null, "level": 0, "lineno": 21, "end_lineno": 21}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "from_module": "urllib.error", "name": "URLError", "asname": null, "level": 0, "lineno": 22, "end_lineno": 22}
{"record_type": "ast.xref", "kind": "import_from", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "from_module": "urllib.error", "name": "HTTPError", "asname": null, "level": 0, "lineno": 22, "end_lineno": 22}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "callee": "dict", "lineno": 33, "end_lineno": 33}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "callee": "out.get", "lineno": 34, "end_lineno": 34}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "callee": "isinstance", "lineno": 35, "end_lineno": 35}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._shim_response_format", "callee": "rf.lower", "lineno": 35, "end_lineno": 35}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "callee": "isinstance", "lineno": 46, "end_lineno": 46}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "callee": "str", "lineno": 48, "end_lineno": 48}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "callee": "m.get", "lineno": 48, "end_lineno": 48}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "callee": "m.get", "lineno": 49, "end_lineno": 49}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "callee": "isinstance", "lineno": 50, "end_lineno": 50}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "callee": "json.dumps", "lineno": 51, "end_lineno": 51}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "callee": "out.append", "lineno": 54, "end_lineno": 54}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._messages_to_openai", "callee": "str", "lineno": 54, "end_lineno": 54}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._mock_items_json", "callee": "range", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._mock_items_json", "callee": "max", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._mock_items_json", "callee": "int", "lineno": 60, "end_lineno": 60}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._mock_items_json", "callee": "items.append", "lineno": 63, "end_lineno": 63}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._mock_items_json", "callee": "json.dumps", "lineno": 64, "end_lineno": 64}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json", "callee": "json.dumps.encode", "lineno": 68, "end_lineno": 68}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json", "callee": "json.dumps", "lineno": 68, "end_lineno": 68}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json", "callee": "Request", "lineno": 69, "end_lineno": 69}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json", "callee": "urlopen", "lineno": 70, "end_lineno": 70}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json", "callee": "resp.read.decode", "lineno": 71, "end_lineno": 71}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._http_post_json", "callee": "resp.read", "lineno": 71, "end_lineno": 71}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "isinstance", "lineno": 80, "end_lineno": 80}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "RuntimeError", "lineno": 81, "end_lineno": 81}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "BoolOp.strip", "lineno": 83, "end_lineno": 83}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "ask_spec.get", "lineno": 83, "end_lineno": 83}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "_shim_response_format", "lineno": 84, "end_lineno": 84}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "_messages_to_openai", "lineno": 87, "end_lineno": 87}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "_http_post_json", "lineno": 99, "end_lineno": 99}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "json.loads", "lineno": 100, "end_lineno": 100}
{"record_type": "ast.call", "path": "v2/backend/core/prompt_pipeline/llm/client.py", "module": "v2.backend.core.prompt_pipeline.llm.client", "caller_name": "v2.backend.core.prompt_pipeline.llm.client._openai_complete", "callee": "isinstance", "lineno": 103, "end_lineno": 103}
