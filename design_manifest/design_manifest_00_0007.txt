{"doc":"\nGeneral-purpose, capability-routed pipeline engine.\n\nPhases:\n  FETCH -> ENRICH -> CONTEXT.BUILD -> BUILD -> BUNDLE.INJECT -> LLM -> SANITIZE -> VERIFY -> PATCH.APPLY_FILES\n\nAll cross-module work is performed via Spine capabilities. This file wires phases\ntogether and persists run artifacts/output.\n\nThis build ONLY changes the way we extract records from the FETCH provider, so that\nwe can handle nested Artifact-in-`result` shapes (your current case) in addition to\nthe older plain-dict shapes.\n","end_lineno":1,"lineno":1,"module":"v2.backend.core.prompt_pipeline.executor.engine","owner":"v2.backend.core.prompt_pipeline.executor.engine","owner_kind":"module","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.docstring"}
{"doc":"\n    Robustly extract records/items from provider meta.\n\n    Supports all of:\n      - meta[\"records\"]\n      - meta[\"items\"]\n      - (meta[\"result\"] as dict).records / .items\n      - (meta[\"result\"] as Artifact-object).meta.records / .items\n      - list already (return as-is)\n    ","end_lineno":118,"lineno":67,"module":"v2.backend.core.prompt_pipeline.executor.engine","owner":"v2.backend.core.prompt_pipeline.executor.engine._get_records","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.docstring"}
{"doc":"\n    Returns: (batches, messages_flattened_for_logging)\n    Builder may return:\n      - {\"messages\": [{\"role\":...,\"content\":...}, ...], \"ids\":[...], \"batch\":[...]}\n      - or {\"messages\": {\"system\":\"...\",\"user\":\"...\"}}\n    ","end_lineno":137,"lineno":121,"module":"v2.backend.core.prompt_pipeline.executor.engine","owner":"v2.backend.core.prompt_pipeline.executor.engine._messages_from_build","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.docstring"}
{"doc":"\n    Parse a single LLM raw text into a list of item dicts. Intentionally domain-neutral.\n    ","end_lineno":165,"lineno":140,"module":"v2.backend.core.prompt_pipeline.executor.engine","owner":"v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.docstring"}
{"doc":"\n    Domain-neutral per-item fallback:\n      - For each item, delegate to `prompts.build.v1` for that single item.\n    ","end_lineno":199,"lineno":168,"module":"v2.backend.core.prompt_pipeline.executor.engine","owner":"v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.docstring"}
{"doc":"\n    Engine entry point.\n    Accepts a 'task' or raw dict payload. Returns summary dict with run_dir and counts.\n    ","end_lineno":442,"lineno":204,"module":"v2.backend.core.prompt_pipeline.executor.engine","owner":"v2.backend.core.prompt_pipeline.executor.engine.run_v1","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.docstring"}
{"arg_count":1,"is_async":false,"loc":2,"module":"v2.backend.core.prompt_pipeline.executor.engine","name":"v2.backend.core.prompt_pipeline.executor.engine._ensure_dir","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.symbol_metrics"}
{"arg_count":2,"is_async":false,"loc":7,"module":"v2.backend.core.prompt_pipeline.executor.engine","name":"v2.backend.core.prompt_pipeline.executor.engine._write_json","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.symbol_metrics"}
{"arg_count":0,"is_async":false,"loc":2,"module":"v2.backend.core.prompt_pipeline.executor.engine","name":"v2.backend.core.prompt_pipeline.executor.engine._now_token","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":6,"module":"v2.backend.core.prompt_pipeline.executor.engine","name":"v2.backend.core.prompt_pipeline.executor.engine._normalize","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":52,"module":"v2.backend.core.prompt_pipeline.executor.engine","name":"v2.backend.core.prompt_pipeline.executor.engine._get_records","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":17,"module":"v2.backend.core.prompt_pipeline.executor.engine","name":"v2.backend.core.prompt_pipeline.executor.engine._messages_from_build","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":26,"module":"v2.backend.core.prompt_pipeline.executor.engine","name":"v2.backend.core.prompt_pipeline.executor.engine._parse_llm_items","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.symbol_metrics"}
{"arg_count":3,"is_async":false,"loc":32,"module":"v2.backend.core.prompt_pipeline.executor.engine","name":"v2.backend.core.prompt_pipeline.executor.engine._make_per_item_batches","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.symbol_metrics"}
{"arg_count":3,"is_async":false,"loc":239,"module":"v2.backend.core.prompt_pipeline.executor.engine","name":"v2.backend.core.prompt_pipeline.executor.engine.run_v1","path":"v2/backend/core/prompt_pipeline/executor/engine.py","record_type":"ast.symbol_metrics"}
{"classes":["v2.backend.core.prompt_pipeline.executor.errors.PipelineError","v2.backend.core.prompt_pipeline.executor.errors.CapabilityError","v2.backend.core.prompt_pipeline.executor.errors.ProviderError","v2.backend.core.prompt_pipeline.executor.errors.ValidationError","v2.backend.core.prompt_pipeline.executor.errors.ProblemSpec"],"functions":["v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta"],"imports":["__future__","dataclasses","typing"],"language":"python","module":"v2.backend.core.prompt_pipeline.executor.errors","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"module_index"}
{"bases":["RuntimeError"],"decorators":[],"end_lineno":18,"kind":"class","lineno":17,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"v2.backend.core.prompt_pipeline.executor.errors.PipelineError","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.symbol"}
{"bases":["PipelineError"],"decorators":[],"end_lineno":22,"kind":"class","lineno":21,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"v2.backend.core.prompt_pipeline.executor.errors.CapabilityError","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.symbol"}
{"bases":["PipelineError"],"decorators":[],"end_lineno":26,"kind":"class","lineno":25,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"v2.backend.core.prompt_pipeline.executor.errors.ProviderError","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.symbol"}
{"bases":["PipelineError"],"decorators":[],"end_lineno":30,"kind":"class","lineno":29,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"v2.backend.core.prompt_pipeline.executor.errors.ValidationError","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.symbol"}
{"bases":[],"decorators":["dataclass"],"end_lineno":40,"kind":"class","lineno":36,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"v2.backend.core.prompt_pipeline.executor.errors.ProblemSpec","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":55,"kind":"function","lineno":43,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.symbol"}
{"asname":null,"end_lineno":2,"from_module":"__future__","kind":"import_from","level":0,"lineno":2,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"annotations","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":11,"from_module":"dataclasses","kind":"import_from","level":0,"lineno":11,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"dataclass","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":12,"from_module":"typing","kind":"import_from","level":0,"lineno":12,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"Any","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":12,"from_module":"typing","kind":"import_from","level":0,"lineno":12,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"Dict","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":12,"from_module":"typing","kind":"import_from","level":0,"lineno":12,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"Optional","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.xref"}
{"callee":"bool","caller_name":"v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta","end_lineno":52,"lineno":52,"module":"v2.backend.core.prompt_pipeline.executor.errors","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.call"}
{"callee":"dict","caller_name":"v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta","end_lineno":53,"lineno":53,"module":"v2.backend.core.prompt_pipeline.executor.errors","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.call"}
{"doc":"Base class for pipeline-related errors.","end_lineno":18,"lineno":17,"module":"v2.backend.core.prompt_pipeline.executor.errors","owner":"v2.backend.core.prompt_pipeline.executor.errors.PipelineError","owner_kind":"class","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.docstring"}
{"doc":"Raised when a Spine capability is missing or fails.","end_lineno":22,"lineno":21,"module":"v2.backend.core.prompt_pipeline.executor.errors","owner":"v2.backend.core.prompt_pipeline.executor.errors.CapabilityError","owner_kind":"class","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.docstring"}
{"doc":"Raised when an underlying provider (LLM, DB, etc.) fails.","end_lineno":26,"lineno":25,"module":"v2.backend.core.prompt_pipeline.executor.errors","owner":"v2.backend.core.prompt_pipeline.executor.errors.ProviderError","owner_kind":"class","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.docstring"}
{"doc":"Raised when inputs/outputs violate expected shapes.","end_lineno":30,"lineno":29,"module":"v2.backend.core.prompt_pipeline.executor.errors","owner":"v2.backend.core.prompt_pipeline.executor.errors.ValidationError","owner_kind":"class","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.docstring"}
{"doc":"\n    Convert a ProblemSpec to a canonical 'problem' meta mapping that matches\n    the Spine Problem artifact expectation (no imports required).\n    ","end_lineno":55,"lineno":43,"module":"v2.backend.core.prompt_pipeline.executor.errors","owner":"v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.docstring"}
{"arg_count":1,"is_async":false,"loc":13,"module":"v2.backend.core.prompt_pipeline.executor.errors","name":"v2.backend.core.prompt_pipeline.executor.errors.to_problem_meta","path":"v2/backend/core/prompt_pipeline/executor/errors.py","record_type":"ast.symbol_metrics"}
{"classes":[],"functions":["v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded","v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list","v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact","v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run"],"imports":["__future__","importlib","traceback","typing"],"language":"python","module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"module_index"}
{"decorators":[],"end_lineno":37,"kind":"function","lineno":23,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":87,"kind":"function","lineno":42,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":100,"kind":"function","lineno":92,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":117,"kind":"function","lineno":103,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":152,"kind":"function","lineno":122,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol"}
{"asname":null,"end_lineno":12,"from_module":"__future__","kind":"import_from","level":0,"lineno":12,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"annotations","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":14,"kind":"import","lineno":14,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"traceback","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":15,"from_module":"importlib","kind":"import_from","level":0,"lineno":15,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"import_module","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"Any","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"Callable","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"Dict","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"List","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"Optional","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"Tuple","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.xref"}
{"callee":"import_module","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded","end_lineno":30,"lineno":30,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded","end_lineno":32,"lineno":32,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded","end_lineno":32,"lineno":32,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"import_module","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":49,"lineno":49,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":51,"lineno":51,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"callable","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":52,"lineno":52,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":54,"lineno":54,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"callable","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":55,"lineno":55,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":59,"lineno":59,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":61,"lineno":61,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"callable","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":62,"lineno":62,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"import_module","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":69,"lineno":69,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":70,"lineno":70,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"callable","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":71,"lineno":71,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":74,"lineno":74,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"callable","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":75,"lineno":75,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":75,"lineno":75,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":76,"lineno":76,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":78,"lineno":78,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"callable","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":79,"lineno":79,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"get_reg","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":80,"lineno":80,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":81,"lineno":81,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"callable","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","end_lineno":82,"lineno":82,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list","end_lineno":96,"lineno":96,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list","end_lineno":98,"lineno":98,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"list","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list","end_lineno":99,"lineno":99,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"repr","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact","end_lineno":110,"lineno":110,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"traceback.format_exc","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact","end_lineno":111,"lineno":111,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"_ensure_caps_loaded","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":133,"lineno":133,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"_resolve_runner","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":134,"lineno":134,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"_problem_artifact","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":136,"lineno":136,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"_to_artifacts_list","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":140,"lineno":140,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"runner","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":140,"lineno":140,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"_to_artifacts_list","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":144,"lineno":144,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"runner","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":144,"lineno":144,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"_to_artifacts_list","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":148,"lineno":148,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"runner","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":148,"lineno":148,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"_problem_artifact","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":150,"lineno":150,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"callee":"_problem_artifact","caller_name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","end_lineno":152,"lineno":152,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.call"}
{"doc":"\nOrchestrator: thin wrapper around the Spine capability registry.\n\n- Expose `capability_run(name, payload, context=None)`.\n- Resolve a runner from the Spine layer (robust to package-level name shadowing).\n- Lazily load capabilities from config/spine/capabilities.yml on first use.\n- Normalize provider return types to a list.\n- **Hardened**: convert *any* provider exception into a structured Problem artifact.\n","end_lineno":1,"lineno":1,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","owner":"v2.backend.core.prompt_pipeline.executor.orchestrator","owner_kind":"module","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.docstring"}
{"doc":"Load capabilities into the Spine registry (once) from the YAML map.","end_lineno":37,"lineno":23,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","owner":"v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.docstring"}
{"doc":"\n    Locate a callable runner. Be robust to package-level name shadowing by\n    importing the *modules* directly instead of `from package import registry`.\n    ","end_lineno":87,"lineno":42,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","owner":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.docstring"}
{"doc":"Coerce any provider result into a list.","end_lineno":100,"lineno":92,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","owner":"v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.docstring"}
{"doc":"\n    Execute a Spine capability by name and normalize the result into a list.\n\n    Retry only on TypeError (signature mismatch); **catch any other Exception**\n    and turn it into a Problem artifact so callers never fail silently.\n    ","end_lineno":152,"lineno":122,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","owner":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.docstring"}
{"arg_count":0,"is_async":false,"loc":15,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator._ensure_caps_loaded","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol_metrics"}
{"arg_count":0,"is_async":false,"loc":46,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator._resolve_runner","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":9,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator._to_artifacts_list","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol_metrics"}
{"arg_count":4,"is_async":false,"loc":15,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator._problem_artifact","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol_metrics"}
{"arg_count":3,"is_async":false,"loc":31,"module":"v2.backend.core.prompt_pipeline.executor.orchestrator","name":"v2.backend.core.prompt_pipeline.executor.orchestrator.capability_run","path":"v2/backend/core/prompt_pipeline/executor/orchestrator.py","record_type":"ast.symbol_metrics"}
{"classes":["v2.backend.core.prompt_pipeline.executor.plugin_api.Item","v2.backend.core.prompt_pipeline.executor.plugin_api.Result","v2.backend.core.prompt_pipeline.executor.plugin_api.Batch"],"functions":["v2.backend.core.prompt_pipeline.executor.plugin_api.v2.backend.core.prompt_pipeline.executor.plugin_api.Result.as_dict"],"imports":["__future__","dataclasses","typing"],"language":"python","module":"v2.backend.core.prompt_pipeline.executor.plugin_api","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"module_index"}
{"bases":[],"decorators":["dataclass"],"end_lineno":26,"kind":"class","lineno":20,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"v2.backend.core.prompt_pipeline.executor.plugin_api.Item","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.symbol"}
{"bases":[],"decorators":["dataclass"],"end_lineno":50,"kind":"class","lineno":30,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"v2.backend.core.prompt_pipeline.executor.plugin_api.Result","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":50,"kind":"function","lineno":45,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"v2.backend.core.prompt_pipeline.executor.plugin_api.v2.backend.core.prompt_pipeline.executor.plugin_api.Result.as_dict","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.symbol"}
{"bases":[],"decorators":["dataclass"],"end_lineno":57,"kind":"class","lineno":54,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"v2.backend.core.prompt_pipeline.executor.plugin_api.Batch","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.symbol"}
{"asname":null,"end_lineno":13,"from_module":"__future__","kind":"import_from","level":0,"lineno":13,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"annotations","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":15,"from_module":"dataclasses","kind":"import_from","level":0,"lineno":15,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"dataclass","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":15,"from_module":"dataclasses","kind":"import_from","level":0,"lineno":15,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"field","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"Any","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"Dict","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"List","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"from_module":"typing","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"Optional","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.xref"}
{"callee":"field","caller_name":"v2.backend.core.prompt_pipeline.executor.plugin_api.Item","end_lineno":26,"lineno":26,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.call"}
{"callee":"field","caller_name":"v2.backend.core.prompt_pipeline.executor.plugin_api.Result","end_lineno":40,"lineno":40,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.call"}
{"callee":"dict","caller_name":"v2.backend.core.prompt_pipeline.executor.plugin_api.v2.backend.core.prompt_pipeline.executor.plugin_api.Result.as_dict","end_lineno":46,"lineno":46,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.call"}
{"callee":"field","caller_name":"v2.backend.core.prompt_pipeline.executor.plugin_api.Batch","end_lineno":57,"lineno":57,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.call"}
{"doc":"\nPlugin-facing dataclasses and types for the general-purpose prompt pipeline.\n\nThis module MUST remain domain-agnostic. Adapters can attach domain-specific\ndata inside the generic `meta` mapping.\n\nBackward compatibility:\n- `new_docstring` remains as an optional legacy field for older adapters.\n  New code should use `result` instead.\n","end_lineno":1,"lineno":1,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","owner":"v2.backend.core.prompt_pipeline.executor.plugin_api","owner_kind":"module","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.docstring"}
{"doc":"\n    Generic result from LLM/adapters.\n\n    - `result` holds the primary textual output (domain-agnostic).\n    - `meta` can hold any extra structured fields the adapter wants to pass.\n    - `new_docstring` is retained for legacy consumers (deprecated).\n    ","end_lineno":50,"lineno":30,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","owner":"v2.backend.core.prompt_pipeline.executor.plugin_api.Result","owner_kind":"class","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.docstring"}
{"arg_count":1,"is_async":false,"loc":6,"module":"v2.backend.core.prompt_pipeline.executor.plugin_api","name":"v2.backend.core.prompt_pipeline.executor.plugin_api.v2.backend.core.prompt_pipeline.executor.plugin_api.Result.as_dict","path":"v2/backend/core/prompt_pipeline/executor/plugin_api.py","record_type":"ast.symbol_metrics"}
{"classes":[],"functions":["v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt","v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","v2.backend.core.prompt_pipeline.executor.prompts.to_messages","v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance","v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages"],"imports":["__future__","typing"],"language":"python","module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"module_index"}
{"decorators":[],"end_lineno":33,"kind":"function","lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":59,"kind":"function","lineno":36,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":71,"kind":"function","lineno":62,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.to_messages","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":98,"kind":"function","lineno":74,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":111,"kind":"function","lineno":103,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":144,"kind":"function","lineno":114,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol"}
{"asname":null,"end_lineno":2,"from_module":"__future__","kind":"import_from","level":0,"lineno":2,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"annotations","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":13,"from_module":"typing","kind":"import_from","level":0,"lineno":13,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"Any","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":13,"from_module":"typing","kind":"import_from","level":0,"lineno":13,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"Dict","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":13,"from_module":"typing","kind":"import_from","level":0,"lineno":13,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"Iterable","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":13,"from_module":"typing","kind":"import_from","level":0,"lineno":13,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"List","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":13,"from_module":"typing","kind":"import_from","level":0,"lineno":13,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"Optional","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":13,"from_module":"typing","kind":"import_from","level":0,"lineno":13,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"Sequence","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.xref"}
{"callee":"base.extend","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt","end_lineno":32,"lineno":32,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt","end_lineno":32,"lineno":32,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"Constant.join","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt","end_lineno":33,"lineno":33,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"str.strip","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":50,"lineno":50,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":50,"lineno":50,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"lines.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":52,"lineno":52,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"lines.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":53,"lineno":53,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"str.strip","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":53,"lineno":53,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":53,"lineno":53,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"lines.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":55,"lineno":55,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"lines.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":56,"lineno":56,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"inputs.items","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":57,"lineno":57,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"lines.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":58,"lineno":58,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"Constant.join.strip","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":59,"lineno":59,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"Constant.join","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","end_lineno":59,"lineno":59,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"msgs.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.to_messages","end_lineno":68,"lineno":68,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.to_messages","end_lineno":68,"lineno":68,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"msgs.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.to_messages","end_lineno":70,"lineno":70,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.to_messages","end_lineno":70,"lineno":70,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":82,"lineno":82,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":85,"lineno":85,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"out.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":86,"lineno":86,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":86,"lineno":86,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":86,"lineno":86,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":89,"lineno":89,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"messages.get","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":90,"lineno":90,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"messages.get","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":91,"lineno":91,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"to_messages","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":92,"lineno":92,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":94,"lineno":94,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"len","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":94,"lineno":94,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"to_messages","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","end_lineno":96,"lineno":96,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"BoolOp.rstrip","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance","end_lineno":111,"lineno":111,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"sum","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":123,"lineno":123,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"len","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":123,"lineno":123,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"m.get","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":123,"lineno":123,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"reversed","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":130,"lineno":130,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"m.get","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":131,"lineno":131,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"len","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":132,"lineno":132,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"trimmed.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":133,"lineno":133,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"len","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":134,"lineno":134,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"trimmed.append","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":139,"lineno":139,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"m.get","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":139,"lineno":139,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"list","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":144,"lineno":144,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"callee":"reversed","caller_name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","end_lineno":144,"lineno":144,"module":"v2.backend.core.prompt_pipeline.executor.prompts","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.call"}
{"doc":"\n    Build a conservative system prompt describing the assistant role.\n    ","end_lineno":33,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.prompts","owner":"v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.docstring"}
{"doc":"\n    Build a neutral user prompt body.\n\n    Args:\n        task: one-line description of what to produce.\n        guidance: optional instructions about format/constraints.\n        inputs: optional key/value inputs to echo for context.\n    ","end_lineno":59,"lineno":36,"module":"v2.backend.core.prompt_pipeline.executor.prompts","owner":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.docstring"}
{"doc":"\n    Convert simple system/user strings into chat message list shape.\n    ","end_lineno":71,"lineno":62,"module":"v2.backend.core.prompt_pipeline.executor.prompts","owner":"v2.backend.core.prompt_pipeline.executor.prompts.to_messages","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.docstring"}
{"doc":"\n    Best-effort normalization to `[{\"role\": \"...\", \"content\": \"...\"}]`.\n    Accepts:\n      - list of dicts with role/content\n      - {\"system\": \"...\", \"user\": \"...\"} mapping\n      - tuple/list with two strings (system, user)\n    ","end_lineno":98,"lineno":74,"module":"v2.backend.core.prompt_pipeline.executor.prompts","owner":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.docstring"}
{"doc":"\n    Append minimal guidance to return a deterministic JSON object with 'items'.\n    ","end_lineno":111,"lineno":103,"module":"v2.backend.core.prompt_pipeline.executor.prompts","owner":"v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.docstring"}
{"doc":"\n    Clamp total characters across all message contents to avoid oversized payloads.\n    Keeps as much of the tail (user) content as possible.\n    ","end_lineno":144,"lineno":114,"module":"v2.backend.core.prompt_pipeline.executor.prompts","owner":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.docstring"}
{"arg_count":2,"is_async":false,"loc":16,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.make_system_prompt","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol_metrics"}
{"arg_count":3,"is_async":false,"loc":24,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.make_user_prompt","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol_metrics"}
{"arg_count":2,"is_async":false,"loc":10,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.to_messages","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":25,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.ensure_chat_messages","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":9,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.add_json_return_guidance","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol_metrics"}
{"arg_count":2,"is_async":false,"loc":31,"module":"v2.backend.core.prompt_pipeline.executor.prompts","name":"v2.backend.core.prompt_pipeline.executor.prompts.clamp_messages","path":"v2/backend/core/prompt_pipeline/executor/prompts.py","record_type":"ast.symbol_metrics"}
{"classes":["v2.backend.core.prompt_pipeline.executor.providers._Item"],"functions":["v2.backend.core.prompt_pipeline.executor.providers._as_posix","v2.backend.core.prompt_pipeline.executor.providers._rel","v2.backend.core.prompt_pipeline.executor.providers._is_excluded","v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1","v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce"],"imports":["__future__","dataclasses","fnmatch","json","os","pathlib","typing","v2.backend.core.prompt_pipeline.llm.response_parser"],"language":"python","module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"module_index"}
{"bases":[],"decorators":["dataclass"],"end_lineno":30,"kind":"class","lineno":24,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers._Item","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":39,"kind":"function","lineno":33,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers._as_posix","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":49,"kind":"function","lineno":42,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers._rel","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":60,"kind":"function","lineno":52,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers._is_excluded","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":134,"kind":"function","lineno":66,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":175,"kind":"function","lineno":137,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":172,"kind":"function","lineno":151,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol"}
{"asname":null,"end_lineno":11,"from_module":"__future__","kind":"import_from","level":0,"lineno":11,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"annotations","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":13,"from_module":"dataclasses","kind":"import_from","level":0,"lineno":13,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"dataclass","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":14,"from_module":"pathlib","kind":"import_from","level":0,"lineno":14,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"Path","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":15,"from_module":"typing","kind":"import_from","level":0,"lineno":15,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"Any","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":15,"from_module":"typing","kind":"import_from","level":0,"lineno":15,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"Dict","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":15,"from_module":"typing","kind":"import_from","level":0,"lineno":15,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"List","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":15,"from_module":"typing","kind":"import_from","level":0,"lineno":15,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"Optional","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":15,"from_module":"typing","kind":"import_from","level":0,"lineno":15,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"Sequence","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":16,"kind":"import","lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"fnmatch","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":17,"kind":"import","lineno":17,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"os","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":"_json","end_lineno":167,"kind":"import","lineno":167,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"json","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":168,"from_module":"v2.backend.core.prompt_pipeline.llm.response_parser","kind":"import_from","level":0,"lineno":168,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"parse_json_response","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.xref"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._as_posix","end_lineno":37,"lineno":37,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"Path.as_posix","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._as_posix","end_lineno":37,"lineno":37,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"Path","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._as_posix","end_lineno":37,"lineno":37,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._rel","end_lineno":46,"lineno":46,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"Path.resolve.relative_to.as_posix","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._rel","end_lineno":46,"lineno":46,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"Path.resolve.relative_to","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._rel","end_lineno":46,"lineno":46,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"Path.resolve","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._rel","end_lineno":46,"lineno":46,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"Path","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._rel","end_lineno":46,"lineno":46,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"Path.resolve","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._rel","end_lineno":46,"lineno":46,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"Path","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._rel","end_lineno":46,"lineno":46,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"_as_posix","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._rel","end_lineno":49,"lineno":49,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"fnmatch.fnmatchcase","caller_name":"v2.backend.core.prompt_pipeline.executor.providers._is_excluded","end_lineno":58,"lineno":58,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":93,"lineno":93,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"payload.update","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":94,"lineno":94,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":96,"lineno":96,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":96,"lineno":96,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"os.getcwd","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":96,"lineno":96,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"list","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":97,"lineno":97,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":97,"lineno":97,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"list","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":98,"lineno":98,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":98,"lineno":98,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":98,"lineno":98,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":102,"lineno":102,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":102,"lineno":102,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":102,"lineno":102,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":102,"lineno":102,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":104,"lineno":104,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":104,"lineno":104,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":104,"lineno":104,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"_as_posix","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":105,"lineno":105,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":106,"lineno":106,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"_rel","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":106,"lineno":106,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":106,"lineno":106,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"_is_excluded","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":108,"lineno":108,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"_Item","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":118,"lineno":111,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":115,"lineno":115,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":116,"lineno":116,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":116,"lineno":116,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":117,"lineno":117,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"items.append","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":129,"lineno":120,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"_as_posix","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","end_lineno":123,"lineno":123,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1","end_lineno":148,"lineno":148,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"payload.update","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1","end_lineno":149,"lineno":149,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":154,"lineno":154,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":155,"lineno":155,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":156,"lineno":156,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":157,"lineno":157,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"obj.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":157,"lineno":157,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":158,"lineno":158,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":159,"lineno":159,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"obj.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":159,"lineno":159,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":160,"lineno":160,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":161,"lineno":161,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"obj.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":161,"lineno":161,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"_coerce","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":162,"lineno":162,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":163,"lineno":163,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"obj.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":163,"lineno":163,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":166,"lineno":166,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":166,"lineno":166,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"first.get.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":166,"lineno":166,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"first.get","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":166,"lineno":166,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"parse_json_response","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":170,"lineno":170,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"_coerce","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","end_lineno":171,"lineno":171,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"callee":"_coerce","caller_name":"v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1","end_lineno":174,"lineno":174,"module":"v2.backend.core.prompt_pipeline.executor.providers","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.call"}
{"doc":" Generic providers for executor-stage capabilities.\n\nThis module must remain domain-agnostic. It turns DB/introspection records into\ngeneric pipeline \"items\" the engine can pass to domain adapters via Spine.\n\nCapabilities implemented here:\n  - retriever.enrich.v1 -> enrich_v1\n  - results.unpack.v1   -> unpack_results_v1\n","end_lineno":1,"lineno":1,"module":"v2.backend.core.prompt_pipeline.executor.providers","owner":"v2.backend.core.prompt_pipeline.executor.providers","owner_kind":"module","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.docstring"}
{"doc":"Build generic items from introspection records.\n\n    Payload (task.payload + kwargs):\n    {\n      \"root\": \"\",\n      \"project_root\": \"\",        # optional; defaults to CWD\n      \"records\": [ {...}, ... ], # rows from introspect.fetch\n      \"exclude_globs\": [\"output/**\", ...],\n      \"segment_excludes\": [\"**/__pycache__/**\", ...]  # alias of exclude_globs\n    }\n\n    Returns:\n    {\n      \"items\": [\n        {\n          \"id\": \"\",\n          \"path\": \"\",\n          \"relpath\": \"\",\n          \"signature\": \"\",\n          \"lang\": \"\",\n          \"context\": { ... }  # passthrough extras\n        },\n        ...\n      ]\n    }\n    ","end_lineno":134,"lineno":66,"module":"v2.backend.core.prompt_pipeline.executor.providers","owner":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.docstring"}
{"doc":"Domain-agnostic 'unpack' that normalizes various result wrappers into {\"items\":[...]}.\n\n    Payload accepts any of:\n      - {\"items\":[...]}\n      - {\"results\":[...]}\n      - {\"result\":{\"items\":[...]}}\n      - {\"choices\":[...]}  # raw LLM envelope (best-effort fallback)\n\n    Returns: {\"items\":[ ...dict... ]}\n    ","end_lineno":175,"lineno":137,"module":"v2.backend.core.prompt_pipeline.executor.providers","owner":"v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.docstring"}
{"arg_count":1,"is_async":false,"loc":7,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers._as_posix","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol_metrics"}
{"arg_count":2,"is_async":false,"loc":8,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers._rel","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol_metrics"}
{"arg_count":2,"is_async":false,"loc":9,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers._is_excluded","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol_metrics"}
{"arg_count":3,"is_async":false,"loc":69,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers.enrich_v1","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol_metrics"}
{"arg_count":3,"is_async":false,"loc":39,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":22,"module":"v2.backend.core.prompt_pipeline.executor.providers","name":"v2.backend.core.prompt_pipeline.executor.providers.v2.backend.core.prompt_pipeline.executor.providers.unpack_results_v1._coerce","path":"v2/backend/core/prompt_pipeline/executor/providers.py","record_type":"ast.symbol_metrics"}
{"classes":["v2.backend.core.prompt_pipeline.executor.retriever.Record"],"functions":["v2.backend.core.prompt_pipeline.executor.retriever.normalize_record"],"imports":["__future__","dataclasses","pathlib","typing"],"language":"python","module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"module_index"}
{"bases":[],"decorators":["dataclass"],"end_lineno":24,"kind":"class","lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"v2.backend.core.prompt_pipeline.executor.retriever.Record","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":50,"kind":"function","lineno":27,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.symbol"}
{"asname":null,"end_lineno":10,"from_module":"__future__","kind":"import_from","level":0,"lineno":10,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"annotations","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":12,"from_module":"dataclasses","kind":"import_from","level":0,"lineno":12,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"dataclass","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":13,"from_module":"pathlib","kind":"import_from","level":0,"lineno":13,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"Path","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":14,"from_module":"typing","kind":"import_from","level":0,"lineno":14,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"Any","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":14,"from_module":"typing","kind":"import_from","level":0,"lineno":14,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"Dict","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":14,"from_module":"typing","kind":"import_from","level":0,"lineno":14,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"List","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":14,"from_module":"typing","kind":"import_from","level":0,"lineno":14,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"Optional","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.xref"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":34,"lineno":34,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":34,"lineno":34,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":34,"lineno":34,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":34,"lineno":34,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":35,"lineno":35,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":36,"lineno":36,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":39,"lineno":39,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"Path.resolve.relative_to.as_posix","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":39,"lineno":39,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"Path.resolve.relative_to","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":39,"lineno":39,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"Path.resolve","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":39,"lineno":39,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"Path","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":39,"lineno":39,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"Path.resolve","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":39,"lineno":39,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"Path","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":39,"lineno":39,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":41,"lineno":41,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"Path.as_posix","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":41,"lineno":41,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"Path","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":41,"lineno":41,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":47,"lineno":47,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":48,"lineno":48,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":48,"lineno":48,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"callee":"r.get","caller_name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","end_lineno":49,"lineno":49,"module":"v2.backend.core.prompt_pipeline.executor.retriever","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.call"}
{"doc":"\nGeneric retrieval helpers (domain-agnostic).\n\nNOTE: The engine calls the Spine capability `retriever.enrich.v1` implemented\nin `executor.providers:enrich_v1`. This module contains optional helpers for\nfuture use and remains neutral.\n","end_lineno":1,"lineno":1,"module":"v2.backend.core.prompt_pipeline.executor.retriever","owner":"v2.backend.core.prompt_pipeline.executor.retriever","owner_kind":"module","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.docstring"}
{"doc":"\n    Convert an introspection record into a neutral item dict.\n\n    Keeps only portable fields:\n      - id, path, relpath, signature, lang, context\n    ","end_lineno":50,"lineno":27,"module":"v2.backend.core.prompt_pipeline.executor.retriever","owner":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.docstring"}
{"arg_count":2,"is_async":false,"loc":24,"module":"v2.backend.core.prompt_pipeline.executor.retriever","name":"v2.backend.core.prompt_pipeline.executor.retriever.normalize_record","path":"v2/backend/core/prompt_pipeline/executor/retriever.py","record_type":"ast.symbol_metrics"}
{"classes":[],"functions":["v2.backend.core.prompt_pipeline.executor.sources._payload_of","v2.backend.core.prompt_pipeline.executor.sources._as_list","v2.backend.core.prompt_pipeline.executor.sources._discover_columns","v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","v2.backend.core.prompt_pipeline.executor.sources.fetch_v1"],"imports":["__future__","contextlib","sqlalchemy","typing"],"language":"python","module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"module_index"}
{"decorators":[],"end_lineno":43,"kind":"function","lineno":34,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":51,"kind":"function","lineno":46,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources._as_list","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":86,"kind":"function","lineno":54,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":127,"kind":"function","lineno":89,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":261,"kind":"function","lineno":133,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol"}
{"asname":null,"end_lineno":16,"from_module":"__future__","kind":"import_from","level":0,"lineno":16,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"annotations","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"Any","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"Dict","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"Iterable","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"List","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"Optional","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"Sequence","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"Tuple","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":20,"kind":"import","lineno":20,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"contextlib","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":24,"from_module":"sqlalchemy","kind":"import_from","level":0,"lineno":24,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"create_engine","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":24,"from_module":"sqlalchemy","kind":"import_from","level":0,"lineno":24,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"text","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":24,"from_module":"sqlalchemy","kind":"import_from","level":0,"lineno":24,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"inspect","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.xref"}
{"callee":"hasattr","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","end_lineno":36,"lineno":36,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","end_lineno":36,"lineno":36,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"getattr","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","end_lineno":36,"lineno":36,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"dict","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","end_lineno":37,"lineno":37,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","end_lineno":38,"lineno":38,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"dict","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","end_lineno":39,"lineno":39,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"base.update","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","end_lineno":42,"lineno":42,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._as_list","end_lineno":49,"lineno":49,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"list","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._as_list","end_lineno":50,"lineno":50,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"inspect","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":63,"lineno":63,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"insp.get_columns","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":64,"lineno":64,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":65,"lineno":65,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"c.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":67,"lineno":67,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":68,"lineno":68,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"cols.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":69,"lineno":69,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"engine.connect","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":77,"lineno":77,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"conn.execute","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":78,"lineno":78,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"text","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":78,"lineno":78,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"len","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":81,"lineno":81,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":82,"lineno":82,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"cols.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","end_lineno":83,"lineno":83,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"set","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":99,"lineno":99,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"select_parts.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":111,"lineno":111,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"output_cols.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":112,"lineno":112,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"select_parts.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":114,"lineno":114,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"output_cols.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":115,"lineno":115,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"set","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":118,"lineno":118,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"select_parts.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":123,"lineno":123,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"output_cols.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":124,"lineno":124,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"seen.add","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":125,"lineno":125,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"Constant.join","caller_name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","end_lineno":127,"lineno":127,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"_payload_of","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":148,"lineno":148,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":149,"lineno":149,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":150,"lineno":150,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":151,"lineno":151,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"_as_list","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":152,"lineno":152,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":152,"lineno":152,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"int","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":153,"lineno":153,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":153,"lineno":153,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"_as_list","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":177,"lineno":177,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"payload.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":177,"lineno":177,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"contextlib.ExitStack","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":194,"lineno":194,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"create_engine","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":195,"lineno":195,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"stack.enter_context","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":196,"lineno":196,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"engine.connect","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":196,"lineno":196,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"_discover_columns","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":199,"lineno":199,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"_make_select_columns","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":200,"lineno":200,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"where_clauses.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":207,"lineno":207,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"enumerate","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":212,"lineno":212,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"keys.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":214,"lineno":214,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"where_clauses.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":216,"lineno":216,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"Constant.join","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":216,"lineno":216,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"Constant.join","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":218,"lineno":218,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"conn.execute","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":226,"lineno":226,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"text","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":226,"lineno":226,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"res.mappings","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":229,"lineno":229,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"dict","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":237,"lineno":237,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":240,"lineno":240,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"enumerate","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":241,"lineno":241,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"len","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":241,"lineno":241,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":243,"lineno":243,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"list","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":243,"lineno":243,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"rec.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":246,"lineno":246,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"rec.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":249,"lineno":249,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"rec.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":249,"lineno":249,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"rec.get","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":249,"lineno":249,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"records.append","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":250,"lineno":250,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"callee":"len","caller_name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","end_lineno":261,"lineno":261,"module":"v2.backend.core.prompt_pipeline.executor.sources","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.call"}
{"doc":"\nGeneric data sources for the prompt pipeline.\n\nCapability implemented here:\n  - introspect.fetch.v1  -> fetch_v1\n\nThis provider MUST be domain-agnostic. It simply pulls rows from a DB table\naccording to the payload parameters and returns a normalized shape:\n\n  {\"records\": [ {<row>...}, ... ], \"count\": <int>}\n\nOn error, it still returns {\"records\": []} and includes an \"error\" message.\n","end_lineno":1,"lineno":1,"module":"v2.backend.core.prompt_pipeline.executor.sources","owner":"v2.backend.core.prompt_pipeline.executor.sources","owner_kind":"module","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.docstring"}
{"doc":"Extract a dict payload from either a Task-like (.payload) or a dict.","end_lineno":43,"lineno":34,"module":"v2.backend.core.prompt_pipeline.executor.sources","owner":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.docstring"}
{"doc":"\n    Return the actual column names for `table`, best-effort.\n    Uses SQLAlchemy inspector; if unavailable or fails, tries SQLite PRAGMA.\n    ","end_lineno":86,"lineno":54,"module":"v2.backend.core.prompt_pipeline.executor.sources","owner":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.docstring"}
{"doc":"\n    Build the SELECT columns clause from requested vs actual.\n\n    - Keep only intersection of requestedactual\n    - If intersection is empty, return \"*\" (SELECT all)\n    - If 'filepath' is not present but 'file' is, alias it as \"file AS filepath\"\n    Returns (select_clause, output_columns) where output_columns are the keys that will\n    appear in each record dict (post-normalization).\n    ","end_lineno":127,"lineno":89,"module":"v2.backend.core.prompt_pipeline.executor.sources","owner":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.docstring"}
{"doc":"\n    Fetch rows from a SQL table.\n\n    Expected payload keys (all optional except sqlalchemy_url/sqlalchemy_table):\n      sqlalchemy_url: \"sqlite:///path/to/db.sqlite\"\n      sqlalchemy_table: \"introspection_index\"\n      status: \"todo\"                        # optional single status filter\n      status_any: [\"todo\", \"active\"]        # optional multi-status filter\n      max_rows: 50                          # limit\n      columns: [\"id\",\"filepath\",\"name\",...] # optional explicit column list\n\n    Returns:\n      {\"records\":[{...},{...}], \"count\": N}\n    ","end_lineno":261,"lineno":133,"module":"v2.backend.core.prompt_pipeline.executor.sources","owner":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.docstring"}
{"arg_count":2,"is_async":false,"loc":10,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources._payload_of","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":6,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources._as_list","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol_metrics"}
{"arg_count":2,"is_async":false,"loc":33,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources._discover_columns","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol_metrics"}
{"arg_count":2,"is_async":false,"loc":39,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources._make_select_columns","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol_metrics"}
{"arg_count":3,"is_async":false,"loc":129,"module":"v2.backend.core.prompt_pipeline.executor.sources","name":"v2.backend.core.prompt_pipeline.executor.sources.fetch_v1","path":"v2/backend/core/prompt_pipeline/executor/sources.py","record_type":"ast.symbol_metrics"}
{"classes":["v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep","v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep"],"functions":["v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt","v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt","v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep.run","v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep.run"],"imports":["__future__","dataclasses","typing"],"language":"python","module":"v2.backend.core.prompt_pipeline.executor.steps","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"module_index"}
{"decorators":[],"end_lineno":33,"kind":"function","lineno":23,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":46,"kind":"function","lineno":36,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol"}
{"bases":[],"decorators":["dataclass"],"end_lineno":64,"kind":"class","lineno":52,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":64,"kind":"function","lineno":60,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep.run","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol"}
{"bases":[],"decorators":["dataclass"],"end_lineno":80,"kind":"class","lineno":68,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":80,"kind":"function","lineno":76,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep.run","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol"}
{"asname":null,"end_lineno":15,"from_module":"__future__","kind":"import_from","level":0,"lineno":15,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"annotations","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":17,"from_module":"dataclasses","kind":"import_from","level":0,"lineno":17,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"dataclass","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"Any","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"Dict","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"List","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":18,"from_module":"typing","kind":"import_from","level":0,"lineno":18,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"Optional","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.xref"}
{"callee":"meta.get","caller_name":"v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt","end_lineno":28,"lineno":28,"module":"v2.backend.core.prompt_pipeline.executor.steps","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.call"}
{"callee":"Constant.format","caller_name":"v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt","end_lineno":33,"lineno":29,"module":"v2.backend.core.prompt_pipeline.executor.steps","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.call"}
{"callee":"ctx.get","caller_name":"v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt","end_lineno":41,"lineno":41,"module":"v2.backend.core.prompt_pipeline.executor.steps","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.call"}
{"callee":"ctx.get","caller_name":"v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt","end_lineno":45,"lineno":42,"module":"v2.backend.core.prompt_pipeline.executor.steps","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep.run","end_lineno":61,"lineno":61,"module":"v2.backend.core.prompt_pipeline.executor.steps","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep.run","end_lineno":77,"lineno":77,"module":"v2.backend.core.prompt_pipeline.executor.steps","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.call"}
{"doc":"\nGeneric helper steps for the prompt pipeline.\n\nThis module is intentionally *domain-agnostic*. It avoids embedding any\ndomain-specific (e.g., docstrings) assumptions in prompts or payload shapes.\n\nNotes:\n- The main engine now delegates prompt/content building to adapters via Spine\n  (e.g., `prompts.build.v1`, `context.build`), so these helpers are optional.\n- We keep them as safe, neutral utilities to preserve import stability for any\n  legacy callers that still reference them.\n","end_lineno":1,"lineno":1,"module":"v2.backend.core.prompt_pipeline.executor.steps","owner":"v2.backend.core.prompt_pipeline.executor.steps","owner_kind":"module","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.docstring"}
{"doc":"\n    Return a *generic* system prompt. Adapters should override via Spine.\n    ","end_lineno":33,"lineno":23,"module":"v2.backend.core.prompt_pipeline.executor.steps","owner":"v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.docstring"}
{"doc":"\n    Return a *generic* user prompt body. Adapters should override via Spine.\n    ","end_lineno":46,"lineno":36,"module":"v2.backend.core.prompt_pipeline.executor.steps","owner":"v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt","owner_kind":"function","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.docstring"}
{"doc":"\n    Legacy no-op context builder kept for compatibility.\n    The engine now calls `context.build` via Spine.\n    ","end_lineno":64,"lineno":52,"module":"v2.backend.core.prompt_pipeline.executor.steps","owner":"v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep","owner_kind":"class","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.docstring"}
{"doc":"\n    Legacy no-op unpack step kept for compatibility.\n    The engine now expects adapters (via Spine) to unpack domain-specific results.\n    ","end_lineno":80,"lineno":68,"module":"v2.backend.core.prompt_pipeline.executor.steps","owner":"v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep","owner_kind":"class","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.docstring"}
{"arg_count":1,"is_async":false,"loc":11,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.build_system_prompt","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol_metrics"}
{"arg_count":1,"is_async":false,"loc":11,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.build_user_prompt","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol_metrics"}
{"arg_count":2,"is_async":false,"loc":5,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.BuildContextStep.run","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol_metrics"}
{"arg_count":2,"is_async":false,"loc":5,"module":"v2.backend.core.prompt_pipeline.executor.steps","name":"v2.backend.core.prompt_pipeline.executor.steps.v2.backend.core.prompt_pipeline.executor.steps.UnpackResultsStep.run","path":"v2/backend/core/prompt_pipeline/executor/steps.py","record_type":"ast.symbol_metrics"}
{"classes":[],"functions":[],"imports":[],"language":"python","module":"v2.backend.core.prompt_pipeline.llm","path":"v2/backend/core/prompt_pipeline/llm/__init__.py","record_type":"module_index"}
{"doc":"LLM client, router, schema, parser.","end_lineno":1,"lineno":1,"module":"v2.backend.core.prompt_pipeline.llm","owner":"v2.backend.core.prompt_pipeline.llm","owner_kind":"module","path":"v2/backend/core/prompt_pipeline/llm/__init__.py","record_type":"ast.docstring"}
{"classes":[],"functions":["v2.backend.core.prompt_pipeline.llm.client._shim_response_format","v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","v2.backend.core.prompt_pipeline.llm.client._mock_items_json","v2.backend.core.prompt_pipeline.llm.client._http_post_json","v2.backend.core.prompt_pipeline.llm.client._openai_complete","v2.backend.core.prompt_pipeline.llm.client.complete_v1","v2.backend.core.prompt_pipeline.llm.client.complete","v2.backend.core.prompt_pipeline.llm.client.run"],"imports":["__future__","json","typing","urllib.error","urllib.request"],"language":"python","module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"module_index"}
{"decorators":[],"end_lineno":37,"kind":"function","lineno":27,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"v2.backend.core.prompt_pipeline.llm.client._shim_response_format","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":55,"kind":"function","lineno":40,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":64,"kind":"function","lineno":58,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"v2.backend.core.prompt_pipeline.llm.client._mock_items_json","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":71,"kind":"function","lineno":67,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"v2.backend.core.prompt_pipeline.llm.client._http_post_json","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":110,"kind":"function","lineno":76,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":140,"kind":"function","lineno":115,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"v2.backend.core.prompt_pipeline.llm.client.complete_v1","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":144,"kind":"function","lineno":143,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"v2.backend.core.prompt_pipeline.llm.client.complete","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.symbol"}
{"decorators":[],"end_lineno":148,"kind":"function","lineno":147,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"v2.backend.core.prompt_pipeline.llm.client.run","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.symbol"}
{"asname":null,"end_lineno":17,"from_module":"__future__","kind":"import_from","level":0,"lineno":17,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"annotations","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":19,"kind":"import","lineno":19,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"json","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":20,"from_module":"typing","kind":"import_from","level":0,"lineno":20,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"Any","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":20,"from_module":"typing","kind":"import_from","level":0,"lineno":20,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"Dict","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":20,"from_module":"typing","kind":"import_from","level":0,"lineno":20,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"List","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":20,"from_module":"typing","kind":"import_from","level":0,"lineno":20,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"Optional","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":21,"from_module":"urllib.request","kind":"import_from","level":0,"lineno":21,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"Request","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":21,"from_module":"urllib.request","kind":"import_from","level":0,"lineno":21,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"urlopen","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":22,"from_module":"urllib.error","kind":"import_from","level":0,"lineno":22,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"URLError","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"asname":null,"end_lineno":22,"from_module":"urllib.error","kind":"import_from","level":0,"lineno":22,"module":"v2.backend.core.prompt_pipeline.llm.client","name":"HTTPError","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.xref"}
{"callee":"dict","caller_name":"v2.backend.core.prompt_pipeline.llm.client._shim_response_format","end_lineno":33,"lineno":33,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"out.get","caller_name":"v2.backend.core.prompt_pipeline.llm.client._shim_response_format","end_lineno":34,"lineno":34,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.llm.client._shim_response_format","end_lineno":35,"lineno":35,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"rf.lower","caller_name":"v2.backend.core.prompt_pipeline.llm.client._shim_response_format","end_lineno":35,"lineno":35,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","end_lineno":46,"lineno":46,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","end_lineno":48,"lineno":48,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"m.get","caller_name":"v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","end_lineno":48,"lineno":48,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"m.get","caller_name":"v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","end_lineno":49,"lineno":49,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","end_lineno":50,"lineno":50,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"json.dumps","caller_name":"v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","end_lineno":51,"lineno":51,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"out.append","caller_name":"v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","end_lineno":54,"lineno":54,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"str","caller_name":"v2.backend.core.prompt_pipeline.llm.client._messages_to_openai","end_lineno":54,"lineno":54,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"range","caller_name":"v2.backend.core.prompt_pipeline.llm.client._mock_items_json","end_lineno":60,"lineno":60,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"max","caller_name":"v2.backend.core.prompt_pipeline.llm.client._mock_items_json","end_lineno":60,"lineno":60,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"int","caller_name":"v2.backend.core.prompt_pipeline.llm.client._mock_items_json","end_lineno":60,"lineno":60,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"items.append","caller_name":"v2.backend.core.prompt_pipeline.llm.client._mock_items_json","end_lineno":63,"lineno":63,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"json.dumps","caller_name":"v2.backend.core.prompt_pipeline.llm.client._mock_items_json","end_lineno":64,"lineno":64,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"json.dumps.encode","caller_name":"v2.backend.core.prompt_pipeline.llm.client._http_post_json","end_lineno":68,"lineno":68,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"json.dumps","caller_name":"v2.backend.core.prompt_pipeline.llm.client._http_post_json","end_lineno":68,"lineno":68,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"Request","caller_name":"v2.backend.core.prompt_pipeline.llm.client._http_post_json","end_lineno":69,"lineno":69,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"urlopen","caller_name":"v2.backend.core.prompt_pipeline.llm.client._http_post_json","end_lineno":70,"lineno":70,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"resp.read.decode","caller_name":"v2.backend.core.prompt_pipeline.llm.client._http_post_json","end_lineno":71,"lineno":71,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"resp.read","caller_name":"v2.backend.core.prompt_pipeline.llm.client._http_post_json","end_lineno":71,"lineno":71,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","end_lineno":80,"lineno":80,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"RuntimeError","caller_name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","end_lineno":81,"lineno":81,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"BoolOp.strip","caller_name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","end_lineno":83,"lineno":83,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"ask_spec.get","caller_name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","end_lineno":83,"lineno":83,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"_shim_response_format","caller_name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","end_lineno":84,"lineno":84,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"_messages_to_openai","caller_name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","end_lineno":87,"lineno":87,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"_http_post_json","caller_name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","end_lineno":99,"lineno":99,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"json.loads","caller_name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","end_lineno":100,"lineno":100,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
{"callee":"isinstance","caller_name":"v2.backend.core.prompt_pipeline.llm.client._openai_complete","end_lineno":103,"lineno":103,"module":"v2.backend.core.prompt_pipeline.llm.client","path":"v2/backend/core/prompt_pipeline/llm/client.py","record_type":"ast.call"}
